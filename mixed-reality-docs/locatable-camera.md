---
title: 可定位照相机
description: HoloLens 前置相机、 它的工作原理，以及配置文件的常规信息和解决方法可供开发人员。
author: cdedmonds
ms.author: wguyman, cdedmonds
ms.date: 06/12/2019
ms.topic: article
keywords: 相机、 hololens，颜色照相机前端面向
ms.openlocfilehash: f661fc82fbeab9a870e8ccf7044c9bb375bed7e3
ms.sourcegitcommit: 30246ab9b9be44a3c707061753e53d4bf401eb6b
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/22/2019
ms.locfileid: "67326293"
---
# <a name="locatable-camera"></a><span data-ttu-id="d387e-104">可定位照相机</span><span class="sxs-lookup"><span data-stu-id="d387e-104">Locatable camera</span></span>

<span data-ttu-id="d387e-105">HoloLens 包括设备这能使应用程序以查看用户看到的内容的正面上装载了世界摄像头。</span><span class="sxs-lookup"><span data-stu-id="d387e-105">HoloLens includes a world-facing camera mounted on the front of the device which enables apps to see what the user sees.</span></span> <span data-ttu-id="d387e-106">开发人员有权访问和控制的照相机就像用于智能手机、 笔记本或台式机上的颜色相机。</span><span class="sxs-lookup"><span data-stu-id="d387e-106">Developers have access to and control of the camera just as they would for color cameras on smartphones, portables, or desktops.</span></span> <span data-ttu-id="d387e-107">相同的通用 windows[媒体捕获](https://msdn.microsoft.com/library/windows/apps/windows.media.capture.mediacapture.aspx)，在 HoloLens 上的 windows media foundation Api 适用于移动和桌面工作。</span><span class="sxs-lookup"><span data-stu-id="d387e-107">The same universal windows [media capture](https://msdn.microsoft.com/library/windows/apps/windows.media.capture.mediacapture.aspx) and windows media foundation APIs that work on mobile and desktop work on HoloLens.</span></span> <span data-ttu-id="d387e-108">Unity[也具有包装这些 windows Api](locatable-camera-in-unity.md)抽象 HoloLens 的任务，例如正则照片和视频 （有或没有全息） 并在查找中的照相机的位置和角度来看的照相机的简单用法场景。</span><span class="sxs-lookup"><span data-stu-id="d387e-108">Unity [has also wrapped these windows APIs](locatable-camera-in-unity.md) to abstract simple usage of the camera on HoloLens for tasks such as taking regular photos and videos (with or without holograms) and locating the camera's position in and perspective on the scene.</span></span>

## <a name="device-camera-information"></a><span data-ttu-id="d387e-109">设备相机信息</span><span class="sxs-lookup"><span data-stu-id="d387e-109">Device camera information</span></span>

### <a name="hololens-first-generation"></a><span data-ttu-id="d387e-110">HoloLens （第一代）</span><span class="sxs-lookup"><span data-stu-id="d387e-110">HoloLens (first-generation)</span></span>

* <span data-ttu-id="d387e-111">固定的焦点照片/视频 (PV) 摄像机，白色自动平衡、 自动公开与完整的映像处理管道</span><span class="sxs-lookup"><span data-stu-id="d387e-111">Fixed focus photo/video (PV) camera, with auto white balance, auto exposure, and full image processing pipe</span></span>
* <span data-ttu-id="d387e-112">面向全球的白色隐私发光二极管会只要照相机处于活动状态</span><span class="sxs-lookup"><span data-stu-id="d387e-112">White Privacy LED facing the world will illuminate whenever the camera is active</span></span>
* <span data-ttu-id="d387e-113">照相机支持在 30、 24、 20、 15 和 5 帧/秒 （所有模式都都纵横比为 16:9） 的以下模式：</span><span class="sxs-lookup"><span data-stu-id="d387e-113">The camera supports the following modes (all modes are 16:9 aspect ratio) at 30, 24, 20, 15, and 5 fps:</span></span>

  |  <span data-ttu-id="d387e-114">视频</span><span class="sxs-lookup"><span data-stu-id="d387e-114">Video</span></span>  |  <span data-ttu-id="d387e-115">预览</span><span class="sxs-lookup"><span data-stu-id="d387e-115">Preview</span></span>  |  <span data-ttu-id="d387e-116">仍</span><span class="sxs-lookup"><span data-stu-id="d387e-116">Still</span></span>  |  <span data-ttu-id="d387e-117">水平视野 (FOV H)</span><span class="sxs-lookup"><span data-stu-id="d387e-117">Horizontal Field of View (H-FOV)</span></span> |  <span data-ttu-id="d387e-118">建议的用法</span><span class="sxs-lookup"><span data-stu-id="d387e-118">Suggested usage</span></span> | 
  |----------|----------|----------|----------|----------|
  |  <span data-ttu-id="d387e-119">1280x720</span><span class="sxs-lookup"><span data-stu-id="d387e-119">1280x720</span></span> |  <span data-ttu-id="d387e-120">1280x720</span><span class="sxs-lookup"><span data-stu-id="d387e-120">1280x720</span></span> |  <span data-ttu-id="d387e-121">1280x720</span><span class="sxs-lookup"><span data-stu-id="d387e-121">1280x720</span></span> |  <span data-ttu-id="d387e-122">45deg</span><span class="sxs-lookup"><span data-stu-id="d387e-122">45deg</span></span>  |  <span data-ttu-id="d387e-123">（通过视频防抖动的默认模式）</span><span class="sxs-lookup"><span data-stu-id="d387e-123">(default mode with video stabilization)</span></span> | 
  |  <span data-ttu-id="d387e-124">不可用</span><span class="sxs-lookup"><span data-stu-id="d387e-124">N/A</span></span> |  <span data-ttu-id="d387e-125">不可用</span><span class="sxs-lookup"><span data-stu-id="d387e-125">N/A</span></span> |  <span data-ttu-id="d387e-126">2048x1152</span><span class="sxs-lookup"><span data-stu-id="d387e-126">2048x1152</span></span> |  <span data-ttu-id="d387e-127">67deg</span><span class="sxs-lookup"><span data-stu-id="d387e-127">67deg</span></span> |  <span data-ttu-id="d387e-128">最高分辨率静止图像</span><span class="sxs-lookup"><span data-stu-id="d387e-128">Highest resolution still image</span></span> | 
  |  <span data-ttu-id="d387e-129">1408x792</span><span class="sxs-lookup"><span data-stu-id="d387e-129">1408x792</span></span> |  <span data-ttu-id="d387e-130">1408x792</span><span class="sxs-lookup"><span data-stu-id="d387e-130">1408x792</span></span> |  <span data-ttu-id="d387e-131">1408x792</span><span class="sxs-lookup"><span data-stu-id="d387e-131">1408x792</span></span> |  <span data-ttu-id="d387e-132">48deg</span><span class="sxs-lookup"><span data-stu-id="d387e-132">48deg</span></span> |  <span data-ttu-id="d387e-133">视频防抖动之前自定大小 （填充） 解析</span><span class="sxs-lookup"><span data-stu-id="d387e-133">Overscan (padding) resolution before video stabilization</span></span> | 
  |  <span data-ttu-id="d387e-134">1344x756</span><span class="sxs-lookup"><span data-stu-id="d387e-134">1344x756</span></span> |  <span data-ttu-id="d387e-135">1344x756</span><span class="sxs-lookup"><span data-stu-id="d387e-135">1344x756</span></span> |  <span data-ttu-id="d387e-136">1344x756</span><span class="sxs-lookup"><span data-stu-id="d387e-136">1344x756</span></span> |  <span data-ttu-id="d387e-137">67deg</span><span class="sxs-lookup"><span data-stu-id="d387e-137">67deg</span></span> |  <span data-ttu-id="d387e-138">使用过度扫描大型 FOV 视频模式</span><span class="sxs-lookup"><span data-stu-id="d387e-138">Large FOV video mode with overscan</span></span> | 
  |  <span data-ttu-id="d387e-139">896x504</span><span class="sxs-lookup"><span data-stu-id="d387e-139">896x504</span></span> |  <span data-ttu-id="d387e-140">896x504</span><span class="sxs-lookup"><span data-stu-id="d387e-140">896x504</span></span> |  <span data-ttu-id="d387e-141">896x504</span><span class="sxs-lookup"><span data-stu-id="d387e-141">896x504</span></span> |  <span data-ttu-id="d387e-142">48deg</span><span class="sxs-lookup"><span data-stu-id="d387e-142">48deg</span></span> |  <span data-ttu-id="d387e-143">低功耗 / 图像的低分辨率模式处理任务</span><span class="sxs-lookup"><span data-stu-id="d387e-143">Low power / Low resolution mode for image processing tasks</span></span> | 

### <a name="hololens-2"></a><span data-ttu-id="d387e-144">HoloLens 2</span><span class="sxs-lookup"><span data-stu-id="d387e-144">HoloLens 2</span></span>

* <span data-ttu-id="d387e-145">自动聚焦照片/视频 (PV) 摄像机，白色自动平衡、 自动公开与完整的映像处理管道</span><span class="sxs-lookup"><span data-stu-id="d387e-145">Auto-focus photo/video (PV) camera, with auto white balance, auto exposure, and full image processing pipe</span></span>
* <span data-ttu-id="d387e-146">面向全球的白色隐私发光二极管会只要照相机处于活动状态</span><span class="sxs-lookup"><span data-stu-id="d387e-146">White Privacy LED facing the world will illuminate whenever the camera is active</span></span>
* <span data-ttu-id="d387e-147">照相机支持以下模式 （所有视频的模式是纵横比为 16:9）：</span><span class="sxs-lookup"><span data-stu-id="d387e-147">The camera supports the following modes (all video modes are 16:9 aspect ratio):</span></span>

  >[!NOTE]
  ><span data-ttu-id="d387e-148">这些模式会在 HoloLens 2 正式发布之前的更改。</span><span class="sxs-lookup"><span data-stu-id="d387e-148">These modes are subject to change prior to HoloLens 2 general availability.</span></span>

  |  <span data-ttu-id="d387e-149">视频</span><span class="sxs-lookup"><span data-stu-id="d387e-149">Video</span></span>  |  <span data-ttu-id="d387e-150">预览</span><span class="sxs-lookup"><span data-stu-id="d387e-150">Preview</span></span>  |  <span data-ttu-id="d387e-151">仍</span><span class="sxs-lookup"><span data-stu-id="d387e-151">Still</span></span>  |  <span data-ttu-id="d387e-152">帧速率</span><span class="sxs-lookup"><span data-stu-id="d387e-152">Frame rates</span></span>  |  <span data-ttu-id="d387e-153">水平视野 (FOV H)</span><span class="sxs-lookup"><span data-stu-id="d387e-153">Horizontal Field of View (H-FOV)</span></span> |  <span data-ttu-id="d387e-154">建议的用法</span><span class="sxs-lookup"><span data-stu-id="d387e-154">Suggested usage</span></span> | 
  |----------|----------|----------|----------|----------|----------|
  |  <span data-ttu-id="d387e-155">1920x1080</span><span class="sxs-lookup"><span data-stu-id="d387e-155">1920x1080</span></span> |  <span data-ttu-id="d387e-156">1920x1080</span><span class="sxs-lookup"><span data-stu-id="d387e-156">1920x1080</span></span> |  <span data-ttu-id="d387e-157">不可用</span><span class="sxs-lookup"><span data-stu-id="d387e-157">N/A</span></span> |  <span data-ttu-id="d387e-158">30、 15 帧/秒</span><span class="sxs-lookup"><span data-stu-id="d387e-158">30, 15 fps</span></span>  |  <span data-ttu-id="d387e-159">54deg</span><span class="sxs-lookup"><span data-stu-id="d387e-159">54deg</span></span>  |  <span data-ttu-id="d387e-160">（通过视频防抖动的默认模式）</span><span class="sxs-lookup"><span data-stu-id="d387e-160">(default mode with video stabilization)</span></span> | 
  |  <span data-ttu-id="d387e-161">不可用</span><span class="sxs-lookup"><span data-stu-id="d387e-161">N/A</span></span> |  <span data-ttu-id="d387e-162">不可用</span><span class="sxs-lookup"><span data-stu-id="d387e-162">N/A</span></span> |  <span data-ttu-id="d387e-163">3904X2196</span><span class="sxs-lookup"><span data-stu-id="d387e-163">3904X2196</span></span> |  <span data-ttu-id="d387e-164">不可用</span><span class="sxs-lookup"><span data-stu-id="d387e-164">N/A</span></span>  |  <span data-ttu-id="d387e-165">64deg</span><span class="sxs-lookup"><span data-stu-id="d387e-165">64deg</span></span> |  <span data-ttu-id="d387e-166">最高分辨率静止图像</span><span class="sxs-lookup"><span data-stu-id="d387e-166">Highest resolution still image</span></span> | 
  |  <span data-ttu-id="d387e-167">2272x1278</span><span class="sxs-lookup"><span data-stu-id="d387e-167">2272x1278</span></span> |  <span data-ttu-id="d387e-168">2272x1278</span><span class="sxs-lookup"><span data-stu-id="d387e-168">2272x1278</span></span> |  <span data-ttu-id="d387e-169">不可用</span><span class="sxs-lookup"><span data-stu-id="d387e-169">N/A</span></span> |  <span data-ttu-id="d387e-170">30、 15 帧/秒</span><span class="sxs-lookup"><span data-stu-id="d387e-170">30, 15 fps</span></span>  |  <span data-ttu-id="d387e-171">64deg</span><span class="sxs-lookup"><span data-stu-id="d387e-171">64deg</span></span> |  <span data-ttu-id="d387e-172">视频防抖动之前自定大小 （填充） 解析</span><span class="sxs-lookup"><span data-stu-id="d387e-172">Overscan (padding) resolution before video stabilization</span></span> | 
  |  <span data-ttu-id="d387e-173">1952x1100</span><span class="sxs-lookup"><span data-stu-id="d387e-173">1952x1100</span></span> |  <span data-ttu-id="d387e-174">1952x1100</span><span class="sxs-lookup"><span data-stu-id="d387e-174">1952x1100</span></span> |  <span data-ttu-id="d387e-175">1952x1100</span><span class="sxs-lookup"><span data-stu-id="d387e-175">1952x1100</span></span>  |  <span data-ttu-id="d387e-176">30、 15 帧/秒</span><span class="sxs-lookup"><span data-stu-id="d387e-176">30, 15 fps</span></span>  |  <span data-ttu-id="d387e-177">64deg</span><span class="sxs-lookup"><span data-stu-id="d387e-177">64deg</span></span> |  <span data-ttu-id="d387e-178">高质量的流式处理</span><span class="sxs-lookup"><span data-stu-id="d387e-178">High-quality streaming</span></span> | 
  |  <span data-ttu-id="d387e-179">1280x720</span><span class="sxs-lookup"><span data-stu-id="d387e-179">1280x720</span></span> |  <span data-ttu-id="d387e-180">1280x720</span><span class="sxs-lookup"><span data-stu-id="d387e-180">1280x720</span></span> |  <span data-ttu-id="d387e-181">不可用</span><span class="sxs-lookup"><span data-stu-id="d387e-181">N/A</span></span> |  <span data-ttu-id="d387e-182">30、 15、 5 帧/秒</span><span class="sxs-lookup"><span data-stu-id="d387e-182">30, 15, 5 fps</span></span>  |  <span data-ttu-id="d387e-183">64deg</span><span class="sxs-lookup"><span data-stu-id="d387e-183">64deg</span></span> |  <span data-ttu-id="d387e-184">流式处理和图像处理任务的每个分辨率低电源模式</span><span class="sxs-lookup"><span data-stu-id="d387e-184">Low power/resolution mode for streaming and image processing tasks</span></span> | 

## <a name="locating-the-device-camera-in-the-world"></a><span data-ttu-id="d387e-185">在世界上定位设备相机</span><span class="sxs-lookup"><span data-stu-id="d387e-185">Locating the Device Camera in the World</span></span>

<span data-ttu-id="d387e-186">照片和视频 HoloLens 时，捕获的帧世界，以及照相机的镜头模型中包括的照相机的位置。</span><span class="sxs-lookup"><span data-stu-id="d387e-186">When HoloLens takes photos and videos, the captured frames include the location of the camera in the world, as well as the lens model of the camera.</span></span> <span data-ttu-id="d387e-187">这样，应用程序的原因有关的扩充式映像方案现实生活中的照相机的位置信息。</span><span class="sxs-lookup"><span data-stu-id="d387e-187">This allows applications to reason about the position of the camera in the real world for augmented imaging scenarios.</span></span> <span data-ttu-id="d387e-188">开发人员可以创造性地回滚其自己的方案使用他们最喜爱的图像处理或自定义计算机影像库。</span><span class="sxs-lookup"><span data-stu-id="d387e-188">Developers can creatively roll their own scenarios using their favorite image processing or custom computer vision libraries.</span></span>

<span data-ttu-id="d387e-189">HoloLens 文档中的其他位置的"照相机"可能指"虚拟游戏照相机"（截锥应用程序呈现为）。</span><span class="sxs-lookup"><span data-stu-id="d387e-189">"Camera" elsewhere in HoloLens documentation may refer to the "virtual game camera" (the frustum the app renders to).</span></span> <span data-ttu-id="d387e-190">否则表示，除非在此页上的"照相机"是指实际的 RGB 颜色照相机。</span><span class="sxs-lookup"><span data-stu-id="d387e-190">Unless denoted otherwise, "camera" on this page refers to the real-world RGB color camera.</span></span>

<span data-ttu-id="d387e-191">有关此页覆盖中使用的详细信息[MediaFrameReference](https://docs.microsoft.com/en-us/uwp/api/windows.media.capture.frames.mediaframereference)类，但是也有 Api 拉取照相机内部函数和使用的位置[Media Foundation 属性](https://msdn.microsoft.com/library/windows/desktop/mt740395(v=vs.85).aspx)。</span><span class="sxs-lookup"><span data-stu-id="d387e-191">The details on this page cover using the [MediaFrameReference](https://docs.microsoft.com/en-us/uwp/api/windows.media.capture.frames.mediaframereference) class, however there are also APIs to pull camera intrinsics and locations using [Media Foundation Attributes](https://msdn.microsoft.com/library/windows/desktop/mt740395(v=vs.85).aspx).</span></span> <span data-ttu-id="d387e-192">请参阅[Holographic 跟踪示例的人脸](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/HolographicFaceTracking)有关详细信息。</span><span class="sxs-lookup"><span data-stu-id="d387e-192">Please refer to the [Holographic face tracking sample](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/HolographicFaceTracking) for more information.</span></span>

### <a name="images-with-coordinate-systems"></a><span data-ttu-id="d387e-193">与坐标系统的映像</span><span class="sxs-lookup"><span data-stu-id="d387e-193">Images with Coordinate Systems</span></span>

<span data-ttu-id="d387e-194">每个图像帧 (是否照片或视频) 包括[SpatialCoordinateSystem](https://docs.microsoft.com/en-us/uwp/api/windows.perception.spatial.spatialcoordinatesystem)捕获可使用访问时根节点的照相机[坐标系](https://docs.microsoft.com/en-us/uwp/api/windows.media.capture.frames.mediaframereference.coordinatesystem#Windows_Media_Capture_Frames_MediaFrameReference_CoordinateSystem)属性您[MediaFrameReference](https://docs.microsoft.com/en-us/uwp/api/Windows.Media.Capture.Frames.MediaFrameReference)。</span><span class="sxs-lookup"><span data-stu-id="d387e-194">Each image frame (whether photo or video) includes a [SpatialCoordinateSystem](https://docs.microsoft.com/en-us/uwp/api/windows.perception.spatial.spatialcoordinatesystem) rooted at the camera at the time of capture which can be accessed using the [CoordinateSystem](https://docs.microsoft.com/en-us/uwp/api/windows.media.capture.frames.mediaframereference.coordinatesystem#Windows_Media_Capture_Frames_MediaFrameReference_CoordinateSystem) property of your [MediaFrameReference](https://docs.microsoft.com/en-us/uwp/api/Windows.Media.Capture.Frames.MediaFrameReference).</span></span> <span data-ttu-id="d387e-195">此外，每个帧包含照相机镜头模型中可以找到的说明[CameraIntrinsics](https://docs.microsoft.com/en-us/uwp/api/windows.media.capture.frames.videomediaframe.cameraintrinsics#Windows_Media_Capture_Frames_VideoMediaFrame_CameraIntrinsics)属性。</span><span class="sxs-lookup"><span data-stu-id="d387e-195">In addition, each frame contains a description of the camera lens model which can be found in the [CameraIntrinsics](https://docs.microsoft.com/en-us/uwp/api/windows.media.capture.frames.videomediaframe.cameraintrinsics#Windows_Media_Capture_Frames_VideoMediaFrame_CameraIntrinsics) property.</span></span> <span data-ttu-id="d387e-196">在一起，这些转换定义为每个像素 ray 在 3D 空间中表示生成像素 photons 所采用的路径。</span><span class="sxs-lookup"><span data-stu-id="d387e-196">Together, these transforms define for each pixel a ray in 3D space representing the path taken by the photons that produced the pixel.</span></span> <span data-ttu-id="d387e-197">这些大气可以与通过对某些其他坐标系统从框架的坐标系统获取转换应用程序中的其他内容 (例如，从[固定参考框架](coordinate-systems.md#stationary-frame-of-reference))。</span><span class="sxs-lookup"><span data-stu-id="d387e-197">These rays can be related to other content in the app by obtaining the transform from the frame's coordinate system to some other coordinate system (e.g. from a [stationary frame of reference](coordinate-systems.md#stationary-frame-of-reference)).</span></span> <span data-ttu-id="d387e-198">总之，每个图像帧提供以下功能：</span><span class="sxs-lookup"><span data-stu-id="d387e-198">To summarize, each image frame provides the following:</span></span>
* <span data-ttu-id="d387e-199">像素格式的数据 （RGB/NV12/JPEG/等）</span><span class="sxs-lookup"><span data-stu-id="d387e-199">Pixel Data (in RGB/NV12/JPEG/etc. format)</span></span>
* <span data-ttu-id="d387e-200">一个[SpatialCoordinateSystem](https://docs.microsoft.com/en-us/uwp/api/windows.perception.spatial.spatialcoordinatesystem)从捕获的位置</span><span class="sxs-lookup"><span data-stu-id="d387e-200">A [SpatialCoordinateSystem](https://docs.microsoft.com/en-us/uwp/api/windows.perception.spatial.spatialcoordinatesystem) from the location of capture</span></span>
* <span data-ttu-id="d387e-201">一个[CameraIntrinsics](https://docs.microsoft.com/en-us/uwp/api/windows.media.capture.frames.videomediaframe.cameraintrinsics#Windows_Media_Capture_Frames_VideoMediaFrame_CameraIntrinsics)类包含照相机的可重用功能区模式</span><span class="sxs-lookup"><span data-stu-id="d387e-201">A [CameraIntrinsics](https://docs.microsoft.com/en-us/uwp/api/windows.media.capture.frames.videomediaframe.cameraintrinsics#Windows_Media_Capture_Frames_VideoMediaFrame_CameraIntrinsics) class containing the lens mode of the camera</span></span>

### <a name="camera-to-application-specified-coordinate-system"></a><span data-ttu-id="d387e-202">照相机传送到应用程序指定坐标系统</span><span class="sxs-lookup"><span data-stu-id="d387e-202">Camera to Application-specified Coordinate System</span></span>

<span data-ttu-id="d387e-203">若要从 CameraIntrinsics 和 CameraCoordinateSystem 转到应用程序/世界坐标系统，你将需要：</span><span class="sxs-lookup"><span data-stu-id="d387e-203">To go from the 'CameraIntrinsics' and 'CameraCoordinateSystem' to your application/world coordinate system, you'll need the following:</span></span>

<span data-ttu-id="d387e-204">[在 Unity 中的定位照相机](locatable-camera-in-unity.md):CameraToWorldMatrix 会自动提供由 PhotoCaptureFrame 类 （因此，无需担心 CameraCoordinateSystem 转换）。</span><span class="sxs-lookup"><span data-stu-id="d387e-204">[Locatable camera in Unity](locatable-camera-in-unity.md): CameraToWorldMatrix is automatically provided by PhotoCaptureFrame class(so you don't need to worry about the CameraCoordinateSystem transforms).</span></span>

<span data-ttu-id="d387e-205">[在 DirectX 可定位照相机](locatable-camera-in-directx.md):演示了查询的照相机的坐标系统和你自己的应用程序 coordinate system(s) 之间的转换非常简单的方法。</span><span class="sxs-lookup"><span data-stu-id="d387e-205">[Locatable camera in DirectX](locatable-camera-in-directx.md): Shows the fairly straightforward way to query for the transform between the camera's coordinate system and your own application coordinate system(s).</span></span>

### <a name="distortion-error"></a><span data-ttu-id="d387e-206">扭曲错误</span><span class="sxs-lookup"><span data-stu-id="d387e-206">Distortion Error</span></span>

<span data-ttu-id="d387e-207">HoloLens，在视频和仍图像流是未扭曲系统的映像处理管道中之前帧都提供给应用程序 （预览流包含原始失真的帧）。</span><span class="sxs-lookup"><span data-stu-id="d387e-207">On HoloLens, the video and still image streams are undistorted in the system's image processing pipeline before the frames are made available to the application (the preview stream contains the original distorted frames).</span></span> <span data-ttu-id="d387e-208">由于仅 CameraIntrinsics 都可用，应用程序必须假定图像帧表示完美 pinhole 照相机，但是变形纠正函数中的图像处理器可能仍将保留最多 10 个像素的错误上 HoloLens （第一代）在使用 CameraIntrinsics 帧元数据中。</span><span class="sxs-lookup"><span data-stu-id="d387e-208">Because only the CameraIntrinsics are made available, applications must assume image frames represent a perfect pinhole camera, however the undistortion function in the image processor may still leave an error of up to 10 pixels on HoloLens (first-generation) when using the CameraIntrinsics in the frame metadata.</span></span> <span data-ttu-id="d387e-209">在许多用例，此错误将不起作用，但如果要对齐全息到实际海报/标记，例如，且您注意到 < 10px 偏移量 （大致为全息定位 2 米消失的 11 毫米） 此扭曲错误可能是原因。</span><span class="sxs-lookup"><span data-stu-id="d387e-209">In many use cases, this error will not matter, but if you are aligning holograms to real world posters/markers, for example, and you notice a <10px offset (roughly 11mm for holograms positioned 2 meters away) this distortion error could be the cause.</span></span> 

## <a name="locatable-camera-usage-scenarios"></a><span data-ttu-id="d387e-210">可定位照相机使用方案</span><span class="sxs-lookup"><span data-stu-id="d387e-210">Locatable Camera Usage Scenarios</span></span>

### <a name="show-a-photo-or-video-in-the-world-where-it-was-captured"></a><span data-ttu-id="d387e-211">在捕获时的世界中显示的照片或视频</span><span class="sxs-lookup"><span data-stu-id="d387e-211">Show a photo or video in the world where it was captured</span></span>

<span data-ttu-id="d387e-212">设备相机帧附带"照相机 World"转换，用于显示准确的设备时图像捕获。</span><span class="sxs-lookup"><span data-stu-id="d387e-212">The Device Camera frames come with a "Camera To World" transform, that can be used to show exactly where the device was when the image was taken.</span></span> <span data-ttu-id="d387e-213">例如在 （CameraToWorld.MultiplyPoint(Vector3.zero)) 和甚至绘图小箭头方向照相机面向 (CameraToWorld.MultiplyVector(Vector3.forward)) 此位置开始位置小 holographic 图标。</span><span class="sxs-lookup"><span data-stu-id="d387e-213">For example you could position a small holographic icon at this location (CameraToWorld.MultiplyPoint(Vector3.zero)) and even draw a little arrow in the direction that the camera was facing (CameraToWorld.MultiplyVector(Vector3.forward)).</span></span>

### <a name="tag--pattern--poster--object-tracking"></a><span data-ttu-id="d387e-214">标记 / 海报 / 对象跟踪</span><span class="sxs-lookup"><span data-stu-id="d387e-214">Tag / Pattern / Poster / Object Tracking</span></span>

<span data-ttu-id="d387e-215">许多混合的现实应用程序使用可识别图像或 visual 模式空间中创建的可跟踪点。</span><span class="sxs-lookup"><span data-stu-id="d387e-215">Many mixed reality applications use a recognizable image or visual pattern to create a trackable point in space.</span></span> <span data-ttu-id="d387e-216">这再用于呈现对象相对于的点或创建一个已知的位置。</span><span class="sxs-lookup"><span data-stu-id="d387e-216">This is then used to render objects relative to that point or create a known location.</span></span> <span data-ttu-id="d387e-217">HoloLens 的一些用途包括的查找现实世界对象标记为裂痕 （例如一个有 QR 码电视监视器）、 通过裂痕，放置全息和直观地与已设置为与通过 HoloLens 的平板电脑之类的非 HoloLens 设备配对Wi-fi。</span><span class="sxs-lookup"><span data-stu-id="d387e-217">Some uses for HoloLens include finding a real world object tagged with fiducials (e.g. a TV monitor with a QR code), placing holograms over fiducials, and visually pairing with non-HoloLens devices like tablets that have been setup to communicate with HoloLens via Wi-Fi.</span></span>

<span data-ttu-id="d387e-218">若要识别 visual 模式，然后将该对象放在应用程序世界空间中，你将需要几件事：</span><span class="sxs-lookup"><span data-stu-id="d387e-218">To recognize a visual pattern, and then place that object in the applications world space, you'll need a few things:</span></span>
1. <span data-ttu-id="d387e-219">一个映像模式识别的工具包，如 QR 码、 AR 标记、 人脸 finder、 圆形跟踪器、 OCR 等。</span><span class="sxs-lookup"><span data-stu-id="d387e-219">An image pattern recognition toolkit, such as QR code, AR tags, face finder, circle trackers, OCR etc.</span></span>
2. <span data-ttu-id="d387e-220">收集在运行时，图像帧，并将其传递给识别层</span><span class="sxs-lookup"><span data-stu-id="d387e-220">Collect image frames at runtime, and pass them to the recognition layer</span></span>
3. <span data-ttu-id="d387e-221">Unproject 回世界位置或可能世界大气其映像位置。</span><span class="sxs-lookup"><span data-stu-id="d387e-221">Unproject their image locations back into world positions, or likely world rays.</span></span> <span data-ttu-id="d387e-222">请参阅</span><span class="sxs-lookup"><span data-stu-id="d387e-222">See</span></span>
4. <span data-ttu-id="d387e-223">虚拟模型放这些世界位置</span><span class="sxs-lookup"><span data-stu-id="d387e-223">Position your virtual models over these world locations</span></span>

<span data-ttu-id="d387e-224">一些重要的图像处理链接：</span><span class="sxs-lookup"><span data-stu-id="d387e-224">Some important image processing links:</span></span>
* [<span data-ttu-id="d387e-225">OpenCV</span><span class="sxs-lookup"><span data-stu-id="d387e-225">OpenCV</span></span>](http://opencv.org/)
* [<span data-ttu-id="d387e-226">QR 标记</span><span class="sxs-lookup"><span data-stu-id="d387e-226">QR Tags</span></span>](https://en.wikipedia.org/wiki/QR_code)
* [<span data-ttu-id="d387e-227">FaceSDK</span><span class="sxs-lookup"><span data-stu-id="d387e-227">FaceSDK</span></span>](http://research.microsoft.com/projects/facesdk/)
* [<span data-ttu-id="d387e-228">Microsoft Translator</span><span class="sxs-lookup"><span data-stu-id="d387e-228">Microsoft Translator</span></span>](https://www.microsoft.com/translator/business)

<span data-ttu-id="d387e-229">保留交互式应用程序帧速率至关重要，尤其是在处理长时间运行图像识别算法。</span><span class="sxs-lookup"><span data-stu-id="d387e-229">Keeping an interactive application frame-rate is critical, especially when dealing with long-running image recognition algorithms.</span></span> <span data-ttu-id="d387e-230">因此我们通常使用以下模式：</span><span class="sxs-lookup"><span data-stu-id="d387e-230">For this reason we commonly use the following pattern:</span></span>
1. <span data-ttu-id="d387e-231">主线程： 管理相机对象</span><span class="sxs-lookup"><span data-stu-id="d387e-231">Main Thread: manages the camera object</span></span>
2. <span data-ttu-id="d387e-232">主线程： 请求新帧 （异步）</span><span class="sxs-lookup"><span data-stu-id="d387e-232">Main Thread: requests new frames (async)</span></span>
3. <span data-ttu-id="d387e-233">主线程： 将新帧传递给跟踪线索</span><span class="sxs-lookup"><span data-stu-id="d387e-233">Main Thread: pass new frames to tracking thread</span></span>
4. <span data-ttu-id="d387e-234">跟踪线程： 处理要收集的关键点图像</span><span class="sxs-lookup"><span data-stu-id="d387e-234">Tracking Thread: processes image to collect key points</span></span>
5. <span data-ttu-id="d387e-235">主线程： 移动虚拟模式，以匹配找到关键点</span><span class="sxs-lookup"><span data-stu-id="d387e-235">Main Thread: moves virtual model to match found key points</span></span>
6. <span data-ttu-id="d387e-236">重复步骤 2 中的主线程：</span><span class="sxs-lookup"><span data-stu-id="d387e-236">Main Thread: repeat from step 2</span></span>

<span data-ttu-id="d387e-237">某些图像标记系统仅提供单个像素的位置 (其他人提供完整的转换在这种情况下将不需要此部分)，其相当于一条可能的位置。</span><span class="sxs-lookup"><span data-stu-id="d387e-237">Some image marker systems only provide a single pixel location (others provide the full transform in which case this section will not be needed), which equates to a ray of possible locations.</span></span> <span data-ttu-id="d387e-238">若要获取到一个单独的三维位置我们可以利用多个大气并查找其近似的交集的最终结果上。</span><span class="sxs-lookup"><span data-stu-id="d387e-238">To get to a single 3d location we can then leverage multiple rays and find the final result by their approximate intersection.</span></span> <span data-ttu-id="d387e-239">若要执行此操作将需要：</span><span class="sxs-lookup"><span data-stu-id="d387e-239">To do this you'll need to:</span></span>
1. <span data-ttu-id="d387e-240">获取一个循环将收集多个照相机图像</span><span class="sxs-lookup"><span data-stu-id="d387e-240">Get a loop going collecting multiple camera images</span></span>
2. <span data-ttu-id="d387e-241">查找关联的功能点和其全球大气</span><span class="sxs-lookup"><span data-stu-id="d387e-241">Find the associated feature points, and their world rays</span></span>
3. <span data-ttu-id="d387e-242">当具有的功能，每个都有多个世界大气，字典时可以使用下面的代码来解决这些射线相交的：</span><span class="sxs-lookup"><span data-stu-id="d387e-242">When you have a dictionary of features, each with multiple world rays, you can use the following code to solve for the intersection of those rays:</span></span>

```
public static Vector3 ClosestPointBetweenRays(
   Vector3 point1, Vector3 normalizedDirection1,
   Vector3 point2, Vector3 normalizedDirection2) {
   float directionProjection = Vector3.Dot(normalizedDirection1, normalizedDirection2);
   if (directionProjection == 1) {
     return point1; // parallel lines
   }
   float projection1 = Vector3.Dot(point2 - point1, normalizedDirection1);
   float projection2 = Vector3.Dot(point2 - point1, normalizedDirection2);
   float distanceAlongLine1 = (projection1 - directionProjection * projection2) / (1 - directionProjection * directionProjection);
   float distanceAlongLine2 = (projection2 - directionProjection * projection1) / (directionProjection * directionProjection - 1);
   Vector3 pointOnLine1 = point1 + distanceAlongLine1 * normalizedDirection1;
   Vector3 pointOnLine2 = point2 + distanceAlongLine2 * normalizedDirection2;
   return Vector3.Lerp(pointOnLine2, pointOnLine1, 0.5f);
 }
```

<span data-ttu-id="d387e-243">给定两个或多个跟踪的标记位置，您可以定位 modelled 的场景以适合用户当前应用场景。</span><span class="sxs-lookup"><span data-stu-id="d387e-243">Given two or more tracked tag locations, you can position a modelled scene to fit the users current scenario.</span></span> <span data-ttu-id="d387e-244">如果您不能假定重力，您将需要三个标记位置。</span><span class="sxs-lookup"><span data-stu-id="d387e-244">If you can't assume gravity, then you'll need three tag locations.</span></span> <span data-ttu-id="d387e-245">在许多情况下，我们使用简单的配色方案白色球体表示实时跟踪标记位置和蓝色球体表示建模标记位置，这允许用户直观地仪表对齐质量。</span><span class="sxs-lookup"><span data-stu-id="d387e-245">In many cases we use a simple color scheme where white spheres represent real-time tracked tag locations, and blue spheres represent modelled tag locations, this allows the user to visually gauge the alignment quality.</span></span> <span data-ttu-id="d387e-246">在我们的所有应用程序中，我们假设以下设置：</span><span class="sxs-lookup"><span data-stu-id="d387e-246">We assume the following setup in all our applications:</span></span>
* <span data-ttu-id="d387e-247">两个或多个建模标记位置</span><span class="sxs-lookup"><span data-stu-id="d387e-247">Two or more modelled tag locations</span></span>
* <span data-ttu-id="d387e-248">其中一个校准的空间场景中的标记的父级</span><span class="sxs-lookup"><span data-stu-id="d387e-248">One 'calibration space' which in the scene is the parent of the tags</span></span>
* <span data-ttu-id="d387e-249">照相机功能标识符</span><span class="sxs-lookup"><span data-stu-id="d387e-249">Camera feature identifier</span></span>
* <span data-ttu-id="d387e-250">将移动校准格对齐 （我们非常小心地将移动的父区域中，不 modelled 标记本身，因为其他 connect 是它们的相对位置） 的实时标记的 modelled 的标记的行为。</span><span class="sxs-lookup"><span data-stu-id="d387e-250">Behavior which moves the calibration space to align the modelled tags with the real-time tags (we are careful to move the parent space, not the modelled markers themselves, because other connect is positions relative to them).</span></span>

```
// In the two tags case:
 Vector3 idealDelta = (realTags[1].EstimatedWorldPos - realTags[0].EstimatedWorldPos);
 Vector3 curDelta = (modelledTags[1].transform.position - modelledTags[0].transform.position);
 if (IsAssumeGravity) {
   idealDelta.y = 0;
   curDelta.y = 0;
 }
 Quaternion deltaRot = Quaternion.FromToRotation(curDelta, idealDelta);
 trans.rotation = Quaternion.LookRotation(deltaRot * trans.forward, trans.up);
 trans.position += realTags[0].EstimatedWorldPos - modelledTags[0].transform.position;
```

### <a name="track-or-identify-tagged-stationary-or-moving-real-world-objectsfaces-using-leds-or-other-recognizer-libraries"></a><span data-ttu-id="d387e-251">跟踪或标识标记的静态或移动现实世界对象/人脸使用 Led 或其他识别器库</span><span class="sxs-lookup"><span data-stu-id="d387e-251">Track or Identify Tagged Stationary or Moving real-world objects/faces using LEDs or other recognizer libraries</span></span>

<span data-ttu-id="d387e-252">示例：</span><span class="sxs-lookup"><span data-stu-id="d387e-252">Examples:</span></span>
* <span data-ttu-id="d387e-253">使用 Led 工业机器人 （或对象的速度较慢移动 QR 码）</span><span class="sxs-lookup"><span data-stu-id="d387e-253">Industrial robots with LEDs (or QR codes for slower moving objects)</span></span>
* <span data-ttu-id="d387e-254">确定和识别在聊天室中的对象</span><span class="sxs-lookup"><span data-stu-id="d387e-254">Identify and recognize objects in the room</span></span>
* <span data-ttu-id="d387e-255">确定和识别出空间 （例如位置 holographic 联系人卡通过人脸） 中的人员</span><span class="sxs-lookup"><span data-stu-id="d387e-255">Identify and recognize people in the room (e.g. place holographic contact cards over faces)</span></span>

## <a name="see-also"></a><span data-ttu-id="d387e-256">请参阅</span><span class="sxs-lookup"><span data-stu-id="d387e-256">See also</span></span>
* [<span data-ttu-id="d387e-257">DirectX 中的可定位相机</span><span class="sxs-lookup"><span data-stu-id="d387e-257">Locatable camera in DirectX</span></span>](locatable-camera-in-directx.md)
* [<span data-ttu-id="d387e-258">Unity 中的可定位相机</span><span class="sxs-lookup"><span data-stu-id="d387e-258">Locatable camera in Unity</span></span>](locatable-camera-in-unity.md)
* [<span data-ttu-id="d387e-259">混合现实捕获</span><span class="sxs-lookup"><span data-stu-id="d387e-259">Mixed reality capture</span></span>](mixed-reality-capture.md)
* [<span data-ttu-id="d387e-260">面向开发人员的混合现实捕获</span><span class="sxs-lookup"><span data-stu-id="d387e-260">Mixed reality capture for developers</span></span>](mixed-reality-capture-for-developers.md)
* [<span data-ttu-id="d387e-261">媒体捕获简介</span><span class="sxs-lookup"><span data-stu-id="d387e-261">Media capture introduction</span></span>](https://msdn.microsoft.com/library/windows/apps/mt243896.aspx)
* [<span data-ttu-id="d387e-262">全息版的人脸跟踪示例</span><span class="sxs-lookup"><span data-stu-id="d387e-262">Holographic face tracking sample</span></span>](https://github.com/Microsoft/Windows-universal-samples/tree/master/Samples/HolographicFaceTracking)
