---
title: 案例研究-捕获和 HoloTour 为创建的内容
description: 对于 Microsoft HoloLens HoloTour 提供世界各地的图标位置的沉浸式 3D 个人教程。
author: DannyAskew
ms.author: daaske
ms.date: 03/21/2018
ms.topic: article
keywords: 混合现实 HoloTour，HoloLens，Windows
ms.openlocfilehash: 6c9e5f44c439310883c8b0271187a7b2263b0854
ms.sourcegitcommit: 384b0087899cd835a3a965f75c6f6c607c9edd1b
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/12/2019
ms.locfileid: "59590121"
---
# <a name="case-study---capturing-and-creating-content-for-holotour"></a>案例研究-捕获和 HoloTour 为创建的内容

对于 Microsoft HoloLens HoloTour 提供世界各地的图标位置的沉浸式 3D 个人教程。 为设计器、 艺术家、 生成者、 音频设计器和开发人员致力于找该项目，创建 convincingly 真正的 3D 呈现的已知位置采用独有的创新和技术的能力。

## <a name="the-tech"></a>技术人员

使用 HoloTour，我们想要使人访问一些全球最令人惊叹的目标 — 等[成为一片废墟的 Machu Picchu](https://en.wikipedia.org/wiki/Machu_Picchu)秘鲁或新式一天中[Piazza Navona](https://en.wikipedia.org/wiki/Piazza_Navona)意大利 — 直接从他们自己的生活聊天室。 我们的团队得 HoloTour 旨在"使您感到起来确实可以是"。 需要不止是图片或视频体验。 通过利用独特的显示、 跟踪和 HoloLens 的音频技术我们认为我们可能几乎到另一个位置传输你。 我们需要捕获投向、 声音和我们访问，然后重新的创建我们的应用程序中的每个位置的三维几何图形。

为此，我们需要 360 ° 照相机方向音频捕获装置。 需要捕获以极高的分辨率，以便素材看起来清晰时 HoloLens 上播放和相机可能需要以尽可能减少拼结项目一起放置它。 我们想要完整球面覆盖范围，而不仅仅是沿即将推出，但上方和下方，以及。 此外需要可移植性，以便可以在世界各地对其远程测试机组。 我们计算可用的现成选项并意识到他们只是不足够好，以实现愿景 – 由于解析、 成本或大小。 如果找不到满足我们的需求照相机远程测试机组，我们将需要生成一个自己。

### <a name="building-the-rig"></a>构建远程测试机组

第一个版本 — 从 cardboard，威扣，进行管道磁带和 14 GoPro 照相机 — 是 MacGyver 会被而感到自豪的事情。 查看后从自定义制造远程测试机组的低端解决方案的所有内容，GoPro 照相机是最终我们的最佳选项因为它们是小型、 价格合理且具有易于使用内存存储。 小外形规格是尤为重要，因为它使我们能够非常靠近在一起将照相机放 — — 照相机之间距离越小，越小拼结的项目将为。 我们唯一照相机排列方式使我们能够获得完整球体覆盖率*加上*足够重叠以智能方式对齐照相机和拼结过程消除某些项目。

利用[空间声音](spatial-sound.md)在 HoloLens 上的能力是关键创建 convincingly 真正沉浸式体验。 我们将使用位于下方上三脚架，将捕获在四个方向上我们照相机的位置中的声音，相机的四个麦克风数组为我们提供足够的信息来在我们的场景中创建空间的声音。

![为外部 Pantheon 与我们的 360 ° 照相机远程测试机组设置。](images/camera-pantheon-200px.png)

为外部 Pantheon 与我们的 360 ° 照相机远程测试机组设置。 


我们测试了我们自制远程测试机组通过最多条响尾蛇凸缘附近西雅图，将其捕获在更高权限的顶部风景。 结果，尽管显著小于那么精练你今天，HoloTour 中看到的位置为我们提供我们远程测试机组的设计已足以让您感到起来确实可以是的置信度。

我们从威扣和 cardboard 的设备升级到 3D 打印照相机底座并购买外部电池 GoPro 相机来简化电池管理包。 然后我们进行了更广泛的测试，到旧金山创建缩图了解该市的海岸和图标是金门大桥旅行。 此照相机远程测试机组是我们的大部分我们捕获在 HoloTour 中访问的位置使用。

![360 ° 照相机远程测试机组中 Machu Picchu 与。](images/camera-machu-pichu-500px.png)

360 ° 照相机远程测试机组中 Machu Picchu 与。 


## <a name="behind-the-scenes"></a>幕后

与之前, 我们需要找出哪些位置我们想要包括在我们的虚拟之旅。 罗马是我们的预期提供的第一个位置，我们想要使其正确，因此我们决定 scouting 行程提前执行的。 我们发送的六位人员团队 — 包括艺术家、 设计器和生成者 — 有关参加，请访问我们都在考虑的站点。 行程花费了大约 9 天 – 可为携带，适用于与 rest 2.5。 （有关 Machu Picchu 我们选择不执行操作的 scout 行程，提前研究和预订几天的缓冲区，用于与。）

在罗马，团队花费了每个区域的照片，并记下有趣的事实，以及实际的考量，例如传送到每个点或困难程度是难它将由于拥挤或限制是电影胶片。 这可能听起来像度假，但很多工作。 天早上在早期启动，并将进入不间断直到晚上。 每晚的连续镜头已上传回到在西雅图，若要查看团队。 

![罗马中我们捕获小组。](images/holotour-filming-crew-rome-500px.jpg) 

罗马中我们捕获小组。 


Scout 行程的过程完成后，最终的计划进行的实际与。 此必需，我们将转移到电影上一天，, 以及在什么时候的详细的的列表。 每日海外很高，因此不得不来回往返所需工作效率。 我们已预定指南和罗马中的处理程序，以帮助我们，并充分使用从每日之前停用后到日出。 我们需要以获得最佳的数据片段可能为了让您感到起来确实可以是。

### <a name="capturing-the-video"></a>捕获视频

在捕获期间的操作一些简单的操作可以进行后期处理容易得多。 例如，每当您整合多个照相机中的映像，您最终的视觉瑕疵因为每个照相机具有略有不同的视图。 更接近对象是照相机，较大的视图之间的差异且拼结项目都越大。 下面是可视化问题的简单方法： 在人脸的前面着您的拇指，只有一个关注与查看。 现在，切换眼睛。 你将看到您的拇指似乎在移动相对于背景。 如果您保存您的拇指进一步远离你人脸并重复进行试验，将显示您的拇指移动更少。 我们面对这显然移动是类似于拼结的问题：眼睛，如我们照相机，看不到完全相同的映像，因为它们用分隔的一个小距离。

因为很容易地与后期处理中更正它们比的同时防止最差的项目，我们尝试从我们可能无需拼结特写对象，希望照相机远确保员工和操作。 维护围绕我们照相机大型清除可能是我们排除过程中出现的最大挑战之一，我们必须有创造性，使其工作。 处理本地指南是一个巨大帮助管理拥挤，但我们还发现，使用对进行签名，有时小圆锥或 bean 包和 — 标记我们 filming 空间已相当有效，特别是因为我们只需在每个位置获取短数量的连续镜头。 通常获取好捕获的最佳方式是只是在早上，而出现的大多数人之前很早到达。

一些其他有用的捕获方法直接来自于传统的电影胶片实践。 例如，我们使用颜色校正卡上所有我们照相机和捕获的引用照片的纹理和更高版本，我们可能需要的对象。 

![显示颜色校正卡 Machu Picchu 粗略剪切。](images/rough-cut-machu-picchu-500px.png)

粗略剪切的 Pantheon 的连续镜头之前拼接。

### <a name="processing-the-video"></a>处理视频

捕获 360 ° 内容只是第一步，我们捕获原始相机数据片段转换为最终的资产 HoloTour 中看到所需的大量的处理。 后我们返回主页需要从 14 不同摄像机视频源，并将其转换单个连续视频与最小的项目。 我们画的团队使用了大量的工具进行组合和波兰语捕获连续镜头，我们开发了一个管道以优化尽可能多地处理。 连续镜头必须拼接在一起，颜色已更正，并让人分散注意力的元素和项目中删除或添加的生命周期和动作，以增强的实际存在的这种感觉，目标是补充外勤然后合成。

![粗略剪切的 Pantheon 的连续镜头之前拼接。](images/rough-cut-pantheon-500px.png)

粗略剪切的 Pantheon 的连续镜头之前拼接。 


若要一起拼结视频，我们使用名为的工具[PTGui](http://www.ptgui.com/)和集成到我们处理管道。 作为后续处理的一部分，我们从我们的视频仍提取的帧并发现看起来都不错这些帧之一的拼结模式。 我们然后应用到自定义插件，允许微调我们视频艺术家和调整的拼结模式直接时组合中后效果的情况下，我们编写的了该模式。 

![屏幕截图的 PTGui 显示缝合的 Pantheon 录像。](images/stitching-tool-pantheon-500px.png)

屏幕截图的 PTGui 显示缝合的 Pantheon 录像。 


### <a name="video-playback"></a>视频播放

已完成处理的连续镜头，我们有无缝的视频，但很格外后大-大约 8 K 的解决方法。 解码视频很高，有很少可以处理 8k 视频，因此下一个挑战寻找一种方法来返回在 HoloLens 上播放此视频中的计算机。 我们形成了大量的策略，以避免产生的成本的同时仍让用户感觉像他们已查看的整个视频解码。

最简单的优化是视频的为了避免解码不太多更改的部分。 我们编写了一个工具，可标识每个场景中具有很少或没有运动的区域。 这些区域为我们显示静态图像，而不是解码视频的每个帧。 若要实现此目的，我们划分成小得多的区块的大量视频。

我们还进行确定，最有效地使用了我们解码的每个像素。 我们试验了压缩技术来减小视频; 的大小我们将根据它将投影到; 的几何图形的多边形的视频区域拆分我们调整 Uv 并重新封装基于包含多少详细信息不同多边形的视频。 这项工作的结果是，内容作为单个 8k 视频转换成看起来几乎无法理解，直到它们正确重新成场景的多个区块启动。 对于游戏开发人员而言，此举纹理映射和 UV 包装，这可能会很熟悉。 

![优化前 Pantheon 完整视图。](images/pantheon-before-optimization-500px.png) 

优化前 Pantheon 完整视图。 


![Pantheon，处理的视频播放的右半部分。](images/pantheon-process-video-playback-500px.png) 

Pantheon，处理的视频播放的右半部分。 


![单个视频区域优化和打包后的示例。](images/single-video-region-after-optimization-500px.png) 

单个视频区域优化和打包后的示例。 


我们使用的另一个要点是，避免解码不主动查看的视频。 在 HoloTour，您仅可以在任意给定时刻中看到完整的场景的部分。 我们仅对内部或外部视野 (FOV) 很快的视频进行解码。 在旋转您，我们开始播放视频的现在你 FOV 并且停止播放那些将不再在其中的区域。 大多数人甚至不会注意到，这种情况发生，但如果快速运转，您会看到视频将使第二个启动 — 在此期间您将看到哪些然后淡回视频准备就绪后的一个静态图像。

若要使该策略工作我们开发了广泛的视频播放系统。 我们优化以使视频切换效率极高的低级别播放代码。 此外，我们需要对我们的视频进行编码以特殊方式，以使其可以在任何时候快速切换到任何视频。 此播放管道花费了大量的开发时间，因此我们分阶段实现它。 我们开始使用更简单的系统的效率较低，但允许设计人员和艺术家工作体验，而缓慢地提高到更可靠的播放系统，我们将在最终质量栏。 这个最终系统有我们在 Unity 设置中的场景和监视器播放引擎视频中创建的自定义工具。

### <a name="recreating-near-space-objects-in-3d"></a>重新创建在 3D 空间附近对象

视频构成了大部分 HoloTour 中, 看到的内容，但有多个显示接近，如 Piazza Navona 中绘制 Pantheon 或空中场景代表热空气气球外部喷泉的三维对象。 这些三维对象远是重要的因为人类的深度感知系统是很好紧密联系，但不是很好。 我们可以得到视频中距离，但若要允许用户四处其空间和感觉像它们确实存在，邻近的对象需要深度。 此技术是类似的操作可能会看到在自然历史记录博物馆排序 — 图片 diorama 物理景观、 系统和 animal 灵长类馆在前台，但在后台巧妙地屏蔽不光滑绘制到后退去。

某些对象是只是三维资产，我们创建并添加到场景中，从而增强的体验。 绘制和热空气气球归到此类别，因为它们并不存在时我们拍摄的。 类似于游戏资产，他们已创建 3D 艺术家上我们的团队，并相应地设置纹理。 我们将放置在靠近你的水平，我们场景中，游戏引擎可以呈现这些到两个 HoloLens 显示，以便它们显示为一个三维对象。

其他资产，如外部 Pantheon，喷泉真实存在中的位置，我们要排除视频，但将这些对象从视频到三维的对象，我们需要做许多事情。

首先，我们需要有关每个对象的其他信息。 上的与位置上，我们的团队捕获大量这些对象的引用数据片段，以便我们必须足够详细的准确地重新创建纹理的图像。 团队还执行[photogrammetry](https://en.wikipedia.org/wiki/Photogrammetry)扫描时，该构造从几十个 2D 图像、 三维模型完美大规模让我们粗略的对象模型。

我们来处理我们的连续镜头，从视频中删除对象的更高版本将替换 3D 的表示形式。 基于 photogrammetry 模型但清理在三维资产，并简化了我们艺术家。 对于某些对象，我们可以使用视频的部分 — 如上喷泉水纹理 — 但大部分喷泉现在允许用户认为深度和在体验中的空间有限奔波的三维对象。 极大地具有如下附近空间对象将添加到的真实性，可帮助在虚拟位置接地用户。 

![删除带有喷泉 pantheon 素材。 它将替换为三维资产。](images/object-removal-pantheon-500px.png)

删除带有喷泉 pantheon 素材。 它将替换为三维资产。


## <a name="final-thoughts"></a>最后的几点思考

显然，没有创建比此处我们已讨论此内容的信息。 有几个场景 — 我们喜欢将它们"无法实现透视"— 包括热空气气球骑行和 gladiator 打击 Colosseum，采用了更具创造性的方法中。 我们将解决在将来的案例研究。

我们希望共享的一些我们在生产过程更大的挑战的解决方案的其他开发人员有帮助，并且您能够使用其中某些技术为 HoloLens 创建自己的沉浸式体验。 (如果您执行操作，请确保上与我们共享[HoloLens 应用程序开发论坛](https://forums.hololens.com/)！)

## <a name="about-the-authors"></a>关于作者

<table style="border:0">
<tr>
<td style="border:0" width="60px"> <img alt="David Haley" width="60" height="60" src="images/haley.png" /></td>
<td style="border:0" width="408"> <b>David Haley</b>是高级开发人员已详细描述有关照相机远程测试机组和视频播放不是他认为可能从 HoloTour 上工作。</td>
<td style="border:0" width="60px"> <img alt="Danny Askew" width="60" height="60" src="images/askew.png" /></td>
<td style="border:0" width="408"> <b>Danny Askew</b>是视频艺术家进行确保通过罗马之旅，尽可能提供完美的人。</td>
</tr>
<tr>
<td style="border:0" width="60px"> <img alt="Jason Syltebo" width="60" height="60" src="images/syltebo.png" /></td>
<td style="border:0" width="408"> <b>Jason Syltebo</b>是音频设计人员已确保您可能会遇到的访问，即使您及时返回每个目标 soundscape。</td>
<td style="border:0" width="60px"> <img alt="Travis Steiner" width="60" height="60" src="images/steiner.png" /></td>
<td style="border:0" width="408"> <b>Travis 佑</b>是那些研究和 scouted 位置、 创建旅行计划和定向与站点上的设计主管。</td>
</tr>
</table>



## <a name="see-also"></a>请参阅
* [视频：Microsoft HoloLens：HoloTour](https://www.youtube.com/watch?v=pLd9WPlaMpY)
