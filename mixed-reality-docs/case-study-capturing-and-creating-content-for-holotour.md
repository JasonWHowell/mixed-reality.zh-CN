---
title: 案例研究-捕获和 HoloTour 为创建的内容
description: 对于 Microsoft HoloLens HoloTour 提供世界各地的图标位置的沉浸式 3D 个人教程。
author: DannyAskew
ms.author: daaske
ms.date: 03/21/2018
ms.topic: article
keywords: 混合现实 HoloTour，HoloLens，Windows
ms.openlocfilehash: 6c9e5f44c439310883c8b0271187a7b2263b0854
ms.sourcegitcommit: 384b0087899cd835a3a965f75c6f6c607c9edd1b
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/12/2019
ms.locfileid: "59590121"
---
# <a name="case-study---capturing-and-creating-content-for-holotour"></a><span data-ttu-id="e7fb8-104">案例研究-捕获和 HoloTour 为创建的内容</span><span class="sxs-lookup"><span data-stu-id="e7fb8-104">Case study - Capturing and creating content for HoloTour</span></span>

<span data-ttu-id="e7fb8-105">对于 Microsoft HoloLens HoloTour 提供世界各地的图标位置的沉浸式 3D 个人教程。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-105">HoloTour for Microsoft HoloLens provides immersive 3D personal tours of iconic locations around the world.</span></span> <span data-ttu-id="e7fb8-106">为设计器、 艺术家、 生成者、 音频设计器和开发人员致力于找该项目，创建 convincingly 真正的 3D 呈现的已知位置采用独有的创新和技术的能力。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-106">As the designers, artists, producers, audio designers, and developers working on this project found out, creating a convincingly real 3D rendering of a well-known location takes a unique blend of creative and technological wizardry.</span></span>

## <a name="the-tech"></a><span data-ttu-id="e7fb8-107">技术人员</span><span class="sxs-lookup"><span data-stu-id="e7fb8-107">The tech</span></span>

<span data-ttu-id="e7fb8-108">使用 HoloTour，我们想要使人访问一些全球最令人惊叹的目标 — 等[成为一片废墟的 Machu Picchu](https://en.wikipedia.org/wiki/Machu_Picchu)秘鲁或新式一天中[Piazza Navona](https://en.wikipedia.org/wiki/Piazza_Navona)意大利 — 直接从他们自己的生活聊天室。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-108">With HoloTour, we wanted to make it possible for people to visit some of the world’s most amazing destinations—like the [ruins of Machu Picchu](https://en.wikipedia.org/wiki/Machu_Picchu) in Peru or the modern day [Piazza Navona](https://en.wikipedia.org/wiki/Piazza_Navona) in Italy—right from their own living rooms.</span></span> <span data-ttu-id="e7fb8-109">我们的团队得 HoloTour 旨在"使您感到起来确实可以是"。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-109">Our team made it the goal of HoloTour to “make you feel like you’re really there.”</span></span> <span data-ttu-id="e7fb8-110">需要不止是图片或视频体验。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-110">The experience needed to be more than just pictures or videos.</span></span> <span data-ttu-id="e7fb8-111">通过利用独特的显示、 跟踪和 HoloLens 的音频技术我们认为我们可能几乎到另一个位置传输你。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-111">By leveraging the unique display, tracking, and audio technology of HoloLens we believed we could virtually transport you to another place.</span></span> <span data-ttu-id="e7fb8-112">我们需要捕获投向、 声音和我们访问，然后重新的创建我们的应用程序中的每个位置的三维几何图形。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-112">We would need to capture the sights, sounds, and three-dimensional geometry of every location we visited and then recreate that within our app.</span></span>

<span data-ttu-id="e7fb8-113">为此，我们需要 360 ° 照相机方向音频捕获装置。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-113">In order to do this, we needed a 360° camera rig with directional audio capture.</span></span> <span data-ttu-id="e7fb8-114">需要捕获以极高的分辨率，以便素材看起来清晰时 HoloLens 上播放和相机可能需要以尽可能减少拼结项目一起放置它。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-114">It needed to capture at extremely high resolution, so that the footage would look crisp when played back on a HoloLens and the cameras would need to be positioned close together in order to minimize stitching artifacts.</span></span> <span data-ttu-id="e7fb8-115">我们想要完整球面覆盖范围，而不仅仅是沿即将推出，但上方和下方，以及。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-115">We wanted full spherical coverage, not just along the horizon, but above and below you as well.</span></span> <span data-ttu-id="e7fb8-116">此外需要可移植性，以便可以在世界各地对其远程测试机组。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-116">The rig also needed to be portable so that we could take it all over the world.</span></span> <span data-ttu-id="e7fb8-117">我们计算可用的现成选项并意识到他们只是不足够好，以实现愿景 – 由于解析、 成本或大小。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-117">We evaluated available off-the-shelf options and realized they simply weren’t good enough to realize our vision – either because of resolution, cost, or size.</span></span> <span data-ttu-id="e7fb8-118">如果找不到满足我们的需求照相机远程测试机组，我们将需要生成一个自己。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-118">If we couldn’t find a camera rig that satisfied our needs, we would have to build one ourselves.</span></span>

### <a name="building-the-rig"></a><span data-ttu-id="e7fb8-119">构建远程测试机组</span><span class="sxs-lookup"><span data-stu-id="e7fb8-119">Building the rig</span></span>

<span data-ttu-id="e7fb8-120">第一个版本 — 从 cardboard，威扣，进行管道磁带和 14 GoPro 照相机 — 是 MacGyver 会被而感到自豪的事情。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-120">The first version—made from cardboard, Velcro, duct tape, and 14 GoPro cameras—was something MacGyver would have been proud of.</span></span> <span data-ttu-id="e7fb8-121">查看后从自定义制造远程测试机组的低端解决方案的所有内容，GoPro 照相机是最终我们的最佳选项因为它们是小型、 价格合理且具有易于使用内存存储。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-121">After reviewing everything from low-end solutions to custom manufactured rigs, GoPro cameras were ultimately the best option for us because they were small, affordable, and had easy-to-use memory storage.</span></span> <span data-ttu-id="e7fb8-122">小外形规格是尤为重要，因为它使我们能够非常靠近在一起将照相机放 — — 照相机之间距离越小，越小拼结的项目将为。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-122">The small form factor was especially important because it allowed us to place cameras fairly close together—the smaller the distance between cameras, the smaller the stitching artifacts will be.</span></span> <span data-ttu-id="e7fb8-123">我们唯一照相机排列方式使我们能够获得完整球体覆盖率*加上*足够重叠以智能方式对齐照相机和拼结过程消除某些项目。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-123">Our unique camera arrangement allowed us to get full sphere coverage *plus* enough overlap to intelligently align cameras and smooth out some artifacts during the stitching process.</span></span>

<span data-ttu-id="e7fb8-124">利用[空间声音](spatial-sound.md)在 HoloLens 上的能力是关键创建 convincingly 真正沉浸式体验。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-124">Taking advantage of the [spatial sound](spatial-sound.md) capabilities on HoloLens is critical to creating a convincingly real immersive experience.</span></span> <span data-ttu-id="e7fb8-125">我们将使用位于下方上三脚架，将捕获在四个方向上我们照相机的位置中的声音，相机的四个麦克风数组为我们提供足够的信息来在我们的场景中创建空间的声音。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-125">We used a four-microphone array situated beneath the cameras on the tripod, which would capture sound from the location of our camera in four directions, giving us enough information to create spatial sounds in our scenes.</span></span>

![为外部 Pantheon 与我们的 360 ° 照相机远程测试机组设置。](images/camera-pantheon-200px.png)

<span data-ttu-id="e7fb8-127">为外部 Pantheon 与我们的 360 ° 照相机远程测试机组设置。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-127">Our 360° camera rig set up for filming outside the Pantheon.</span></span> 


<span data-ttu-id="e7fb8-128">我们测试了我们自制远程测试机组通过最多条响尾蛇凸缘附近西雅图，将其捕获在更高权限的顶部风景。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-128">We tested out our homemade rig by taking it up to Rattlesnake Ridge near Seattle, capturing the scenery at the top of the hike.</span></span> <span data-ttu-id="e7fb8-129">结果，尽管显著小于那么精练你今天，HoloTour 中看到的位置为我们提供我们远程测试机组的设计已足以让您感到起来确实可以是的置信度。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-129">The result, though significantly less polished than the locations you see in HoloTour today, gave us confidence that our rig design was good enough to make you feel like you’re really there.</span></span>

<span data-ttu-id="e7fb8-130">我们从威扣和 cardboard 的设备升级到 3D 打印照相机底座并购买外部电池 GoPro 相机来简化电池管理包。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-130">We upgraded our rig from Velcro and cardboard to a 3D-printed camera housing and bought external battery packs for the GoPro cameras to simplify battery management.</span></span> <span data-ttu-id="e7fb8-131">然后我们进行了更广泛的测试，到旧金山创建缩图了解该市的海岸和图标是金门大桥旅行。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-131">We then did a more extensive test, traveling down to San Francisco to create a miniature tour of the city’s coast and the iconic Golden Gate bridge.</span></span> <span data-ttu-id="e7fb8-132">此照相机远程测试机组是我们的大部分我们捕获在 HoloTour 中访问的位置使用。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-132">This camera rig is what we used for most of our captures of the locations you visit in HoloTour.</span></span>

![360 ° 照相机远程测试机组中 Machu Picchu 与。](images/camera-machu-pichu-500px.png)

<span data-ttu-id="e7fb8-134">360 ° 照相机远程测试机组中 Machu Picchu 与。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-134">The 360° camera rig filming in Machu Picchu.</span></span> 


## <a name="behind-the-scenes"></a><span data-ttu-id="e7fb8-135">幕后</span><span class="sxs-lookup"><span data-stu-id="e7fb8-135">Behind the scenes</span></span>

<span data-ttu-id="e7fb8-136">与之前, 我们需要找出哪些位置我们想要包括在我们的虚拟之旅。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-136">Before filming, we needed to figure out which locations we wanted to include on our virtual tour.</span></span> <span data-ttu-id="e7fb8-137">罗马是我们的预期提供的第一个位置，我们想要使其正确，因此我们决定 scouting 行程提前执行的。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-137">Rome was the first location we intended to ship and we wanted to get it right, so we decided to do a scouting trip in advance.</span></span> <span data-ttu-id="e7fb8-138">我们发送的六位人员团队 — 包括艺术家、 设计器和生成者 — 有关参加，请访问我们都在考虑的站点。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-138">We sent a team of six people—including artists, designers, and producers—for an in-person visit to the sites we were considering.</span></span> <span data-ttu-id="e7fb8-139">行程花费了大约 9 天 – 可为携带，适用于与 rest 2.5。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-139">The trip took about 9 days – 2.5 for travel, the rest for filming.</span></span> <span data-ttu-id="e7fb8-140">（有关 Machu Picchu 我们选择不执行操作的 scout 行程，提前研究和预订几天的缓冲区，用于与。）</span><span class="sxs-lookup"><span data-stu-id="e7fb8-140">(For Machu Picchu we opted not to do a scout trip, researching in advance and booking a few days of buffer for filming.)</span></span>

<span data-ttu-id="e7fb8-141">在罗马，团队花费了每个区域的照片，并记下有趣的事实，以及实际的考量，例如传送到每个点或困难程度是难它将由于拥挤或限制是电影胶片。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-141">While in Rome, the team took photos of each area and noted interesting facts as well as practical considerations, such as how hard it is to travel to each spot and how difficult it would be to film because of crowds or restrictions.</span></span> <span data-ttu-id="e7fb8-142">这可能听起来像度假，但很多工作。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-142">This may sound like a vacation, but it’s a lot of work.</span></span> <span data-ttu-id="e7fb8-143">天早上在早期启动，并将进入不间断直到晚上。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-143">Days started early in the morning and would go non-stop until evening.</span></span> <span data-ttu-id="e7fb8-144">每晚的连续镜头已上传回到在西雅图，若要查看团队。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-144">Each night, footage was uploaded for the team back in Seattle to review.</span></span> 

![罗马中我们捕获小组。](images/holotour-filming-crew-rome-500px.jpg) 

<span data-ttu-id="e7fb8-146">罗马中我们捕获小组。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-146">Our capture crew in Rome.</span></span> 


<span data-ttu-id="e7fb8-147">Scout 行程的过程完成后，最终的计划进行的实际与。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-147">After the scout trip was completed, a final plan was made for actual filming.</span></span> <span data-ttu-id="e7fb8-148">此必需，我们将转移到电影上一天，, 以及在什么时候的详细的的列表。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-148">This required a detailed list of where we were going to film, on what day, and at what time.</span></span> <span data-ttu-id="e7fb8-149">每日海外很高，因此不得不来回往返所需工作效率。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-149">Every day overseas is expensive, so these trips needed to be efficient.</span></span> <span data-ttu-id="e7fb8-150">我们已预定指南和罗马中的处理程序，以帮助我们，并充分使用从每日之前停用后到日出。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-150">We booked guides and handlers in Rome to help us and fully used every day from before sunrise to after sunset.</span></span> <span data-ttu-id="e7fb8-151">我们需要以获得最佳的数据片段可能为了让您感到起来确实可以是。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-151">We need to get the best footage possible in order to make you feel like you’re really there.</span></span>

### <a name="capturing-the-video"></a><span data-ttu-id="e7fb8-152">捕获视频</span><span class="sxs-lookup"><span data-stu-id="e7fb8-152">Capturing the video</span></span>

<span data-ttu-id="e7fb8-153">在捕获期间的操作一些简单的操作可以进行后期处理容易得多。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-153">Doing a few simple things during capture can make post-processing much easier.</span></span> <span data-ttu-id="e7fb8-154">例如，每当您整合多个照相机中的映像，您最终的视觉瑕疵因为每个照相机具有略有不同的视图。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-154">For example, whenever you stitch together images from multiple cameras, you end up with visual artifacts because each camera has a slightly different view.</span></span> <span data-ttu-id="e7fb8-155">更接近对象是照相机，较大的视图之间的差异且拼结项目都越大。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-155">The closer objects are to the camera, the larger the difference between the views, and the larger the stitching artifacts will be.</span></span> <span data-ttu-id="e7fb8-156">下面是可视化问题的简单方法： 在人脸的前面着您的拇指，只有一个关注与查看。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-156">Here's an easy way to visualize the problem: hold your thumb up in front of your face and look at it with only one eye.</span></span> <span data-ttu-id="e7fb8-157">现在，切换眼睛。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-157">Now switch eyes.</span></span> <span data-ttu-id="e7fb8-158">你将看到您的拇指似乎在移动相对于背景。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-158">You’ll see that your thumb appears to move relative to the background.</span></span> <span data-ttu-id="e7fb8-159">如果您保存您的拇指进一步远离你人脸并重复进行试验，将显示您的拇指移动更少。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-159">If you hold your thumb further away from your face and repeat the experiment, your thumb will appear to move less.</span></span> <span data-ttu-id="e7fb8-160">我们面对这显然移动是类似于拼结的问题：眼睛，如我们照相机，看不到完全相同的映像，因为它们用分隔的一个小距离。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-160">That apparent movement is similar to the stitching problem we faced: Your eyes, like our cameras, don’t see the exact same image because they are separated by a little distance.</span></span>

<span data-ttu-id="e7fb8-161">因为很容易地与后期处理中更正它们比的同时防止最差的项目，我们尝试从我们可能无需拼结特写对象，希望照相机远确保员工和操作。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-161">Because it’s much easier to prevent the worst artifacts while filming than it is to correct them in post-processing, we tried to keep people and things far away from the camera in the hopes we could eliminate the need to stitch close-up objects.</span></span> <span data-ttu-id="e7fb8-162">维护围绕我们照相机大型清除可能是我们排除过程中出现的最大挑战之一，我们必须有创造性，使其工作。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-162">Maintaining a large clearing around our camera was probably one of the biggest challenges we had during shooting and we had to get creative to make it work.</span></span> <span data-ttu-id="e7fb8-163">处理本地指南是一个巨大帮助管理拥挤，但我们还发现，使用对进行签名，有时小圆锥或 bean 包和 — 标记我们 filming 空间已相当有效，特别是因为我们只需在每个位置获取短数量的连续镜头。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-163">Working with local guides was a huge help in managing crowds, but we also found that using signs—and sometimes small cones or bean bags—to mark our filming space was reasonably effective, especially since we only needed to get a short amount of footage at each location.</span></span> <span data-ttu-id="e7fb8-164">通常获取好捕获的最佳方式是只是在早上，而出现的大多数人之前很早到达。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-164">Often the best way to get a good capture was to just to arrive very early in the morning, before most people showed up.</span></span>

<span data-ttu-id="e7fb8-165">一些其他有用的捕获方法直接来自于传统的电影胶片实践。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-165">Some other useful capture techniques come straight from traditional film practices.</span></span> <span data-ttu-id="e7fb8-166">例如，我们使用颜色校正卡上所有我们照相机和捕获的引用照片的纹理和更高版本，我们可能需要的对象。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-166">For example, we used a color correction card on all of our cameras and captured reference photos of textures and objects we might need later.</span></span> 

![显示颜色校正卡 Machu Picchu 粗略剪切。](images/rough-cut-machu-picchu-500px.png)

<span data-ttu-id="e7fb8-168">粗略剪切的 Pantheon 的连续镜头之前拼接。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-168">A rough cut of Pantheon footage before stitching.</span></span>

### <a name="processing-the-video"></a><span data-ttu-id="e7fb8-169">处理视频</span><span class="sxs-lookup"><span data-stu-id="e7fb8-169">Processing the video</span></span>

<span data-ttu-id="e7fb8-170">捕获 360 ° 内容只是第一步，我们捕获原始相机数据片段转换为最终的资产 HoloTour 中看到所需的大量的处理。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-170">Capturing 360° content is only the first step—a lot of processing is needed to convert the raw camera footage we captured into the final assets you see in HoloTour.</span></span> <span data-ttu-id="e7fb8-171">后我们返回主页需要从 14 不同摄像机视频源，并将其转换单个连续视频与最小的项目。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-171">Once we were back home we needed to take the video from 14 different camera feeds and turn it into a single continuous video with minimal artifacts.</span></span> <span data-ttu-id="e7fb8-172">我们画的团队使用了大量的工具进行组合和波兰语捕获连续镜头，我们开发了一个管道以优化尽可能多地处理。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-172">Our art team used a number of tools to combine and polish the captured footage and we developed a pipeline to optimize the processing as much as possible.</span></span> <span data-ttu-id="e7fb8-173">连续镜头必须拼接在一起，颜色已更正，并让人分散注意力的元素和项目中删除或添加的生命周期和动作，以增强的实际存在的这种感觉，目标是补充外勤然后合成。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-173">The footage had to be stitched together, color corrected, and then composited to remove distracting elements and artifacts or to add supplemental pockets of life and motion, all with the goal to enhance that feeling of actually being there.</span></span>

![粗略剪切的 Pantheon 的连续镜头之前拼接。](images/rough-cut-pantheon-500px.png)

<span data-ttu-id="e7fb8-175">粗略剪切的 Pantheon 的连续镜头之前拼接。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-175">A rough cut of Pantheon footage before stitching.</span></span> 


<span data-ttu-id="e7fb8-176">若要一起拼结视频，我们使用名为的工具[PTGui](http://www.ptgui.com/)和集成到我们处理管道。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-176">To stitch the videos together, we used a tool called [PTGui](http://www.ptgui.com/) and integrated it into our processing pipeline.</span></span> <span data-ttu-id="e7fb8-177">作为后续处理的一部分，我们从我们的视频仍提取的帧并发现看起来都不错这些帧之一的拼结模式。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-177">As part of post-processing we extracted still frames from our videos and found a stitching pattern that looked good for one of those frames.</span></span> <span data-ttu-id="e7fb8-178">我们然后应用到自定义插件，允许微调我们视频艺术家和调整的拼结模式直接时组合中后效果的情况下，我们编写的了该模式。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-178">We then applied that pattern to a custom plugin we wrote that allowed our video artists to fine tune and tweak the stitching pattern directly while compositing in After Effects.</span></span> 

![屏幕截图的 PTGui 显示缝合的 Pantheon 录像。](images/stitching-tool-pantheon-500px.png)

<span data-ttu-id="e7fb8-180">屏幕截图的 PTGui 显示缝合的 Pantheon 录像。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-180">Screenshot of PTGui showing the stitched Pantheon footage.</span></span> 


### <a name="video-playback"></a><span data-ttu-id="e7fb8-181">视频播放</span><span class="sxs-lookup"><span data-stu-id="e7fb8-181">Video playback</span></span>

<span data-ttu-id="e7fb8-182">已完成处理的连续镜头，我们有无缝的视频，但很格外后大-大约 8 K 的解决方法。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-182">After processing of the footage is completed, we have a seamless video but it’s extraordinarily large—around 8K resolution.</span></span> <span data-ttu-id="e7fb8-183">解码视频很高，有很少可以处理 8k 视频，因此下一个挑战寻找一种方法来返回在 HoloLens 上播放此视频中的计算机。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-183">Decoding video is expensive and there are very few computers that can handle an 8K video so the next challenge was finding a way to play this video back on HoloLens.</span></span> <span data-ttu-id="e7fb8-184">我们形成了大量的策略，以避免产生的成本的同时仍让用户感觉像他们已查看的整个视频解码。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-184">We developed a number of strategies to avoid the cost of decoding while still making the user feel like they were viewing the entire video.</span></span>

<span data-ttu-id="e7fb8-185">最简单的优化是视频的为了避免解码不太多更改的部分。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-185">The easiest optimization is to avoid decoding parts of the video that don’t change much.</span></span> <span data-ttu-id="e7fb8-186">我们编写了一个工具，可标识每个场景中具有很少或没有运动的区域。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-186">We wrote a tool to identify areas in each scene that have little or no motion.</span></span> <span data-ttu-id="e7fb8-187">这些区域为我们显示静态图像，而不是解码视频的每个帧。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-187">For those regions we show a static image rather than decoding a video each frame.</span></span> <span data-ttu-id="e7fb8-188">若要实现此目的，我们划分成小得多的区块的大量视频。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-188">To make this possible, we divided up the massive video into much smaller chunks.</span></span>

<span data-ttu-id="e7fb8-189">我们还进行确定，最有效地使用了我们解码的每个像素。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-189">We also made sure that every pixel we decoded was used most effectively.</span></span> <span data-ttu-id="e7fb8-190">我们试验了压缩技术来减小视频; 的大小我们将根据它将投影到; 的几何图形的多边形的视频区域拆分我们调整 Uv 并重新封装基于包含多少详细信息不同多边形的视频。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-190">We experimented with compression techniques to lower the size of the video; we split the video regions according to the polygons of the geometry it would be projected onto; we adjusted UVs and repacked the videos based on how much detail different polygons included.</span></span> <span data-ttu-id="e7fb8-191">这项工作的结果是，内容作为单个 8k 视频转换成看起来几乎无法理解，直到它们正确重新成场景的多个区块启动。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-191">The result of this work is that what started as a single 8k video turned into many chunks that look almost unintelligible until they are properly re-projected into the scene.</span></span> <span data-ttu-id="e7fb8-192">对于游戏开发人员而言，此举纹理映射和 UV 包装，这可能会很熟悉。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-192">For a game developer who understands texture mapping and UV packing, this will probably look familiar.</span></span> 

![优化前 Pantheon 完整视图。](images/pantheon-before-optimization-500px.png) 

<span data-ttu-id="e7fb8-194">优化前 Pantheon 完整视图。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-194">A full view of the Pantheon before optimizations.</span></span> 


![Pantheon，处理的视频播放的右半部分。](images/pantheon-process-video-playback-500px.png) 

<span data-ttu-id="e7fb8-196">Pantheon，处理的视频播放的右半部分。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-196">The right half of the Pantheon, processed for video playback.</span></span> 


![单个视频区域优化和打包后的示例。](images/single-video-region-after-optimization-500px.png) 

<span data-ttu-id="e7fb8-198">单个视频区域优化和打包后的示例。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-198">Example of a single video region after optimization and packing.</span></span> 


<span data-ttu-id="e7fb8-199">我们使用的另一个要点是，避免解码不主动查看的视频。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-199">Another trick we used was to avoid decoding video you aren’t actively viewing.</span></span> <span data-ttu-id="e7fb8-200">在 HoloTour，您仅可以在任意给定时刻中看到完整的场景的部分。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-200">While in HoloTour, you can only see part of the full scene at any given moment.</span></span> <span data-ttu-id="e7fb8-201">我们仅对内部或外部视野 (FOV) 很快的视频进行解码。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-201">We only decode videos within or shortly outside of your field of view (FOV).</span></span> <span data-ttu-id="e7fb8-202">在旋转您，我们开始播放视频的现在你 FOV 并且停止播放那些将不再在其中的区域。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-202">As you rotate your head, we start playing the regions of the video that are now in your FOV and stop playing ones that are no longer within it.</span></span> <span data-ttu-id="e7fb8-203">大多数人甚至不会注意到，这种情况发生，但如果快速运转，您会看到视频将使第二个启动 — 在此期间您将看到哪些然后淡回视频准备就绪后的一个静态图像。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-203">Most people won’t even notice this is happening, but if you turn around rapidly, you’ll see the video takes a second to start— in the meantime you’ll see a static image which then fades back to video once it’s ready.</span></span>

<span data-ttu-id="e7fb8-204">若要使该策略工作我们开发了广泛的视频播放系统。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-204">To make this strategy work we developed an extensive video playback system.</span></span> <span data-ttu-id="e7fb8-205">我们优化以使视频切换效率极高的低级别播放代码。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-205">We optimized the low level playback code in order to make video switching extremely efficient.</span></span> <span data-ttu-id="e7fb8-206">此外，我们需要对我们的视频进行编码以特殊方式，以使其可以在任何时候快速切换到任何视频。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-206">Additionally, we had to encode our videos in a special way to make it possible to rapidly switch to any video at any time.</span></span> <span data-ttu-id="e7fb8-207">此播放管道花费了大量的开发时间，因此我们分阶段实现它。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-207">This playback pipeline took a significant amount of development time so we implemented it in stages.</span></span> <span data-ttu-id="e7fb8-208">我们开始使用更简单的系统的效率较低，但允许设计人员和艺术家工作体验，而缓慢地提高到更可靠的播放系统，我们将在最终质量栏。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-208">We started with a simpler system that was less efficient, but allowed designers and artists to work on the experience, and slowly improved it to a more robust playback system that allowed us to ship at the final quality bar.</span></span> <span data-ttu-id="e7fb8-209">这个最终系统有我们在 Unity 设置中的场景和监视器播放引擎视频中创建的自定义工具。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-209">This final system had custom tools we created within Unity to set up the video within the scene and monitor the playback engine.</span></span>

### <a name="recreating-near-space-objects-in-3d"></a><span data-ttu-id="e7fb8-210">重新创建在 3D 空间附近对象</span><span class="sxs-lookup"><span data-stu-id="e7fb8-210">Recreating near-space objects in 3D</span></span>

<span data-ttu-id="e7fb8-211">视频构成了大部分 HoloTour 中, 看到的内容，但有多个显示接近，如 Piazza Navona 中绘制 Pantheon 或空中场景代表热空气气球外部喷泉的三维对象。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-211">Videos make up the majority of what you see in HoloTour, but there are a number of 3D objects that appear close to you, such as the painting in Piazza Navona, the fountain outside the Pantheon, or the hot air balloon you stand in for aerial scenes.</span></span> <span data-ttu-id="e7fb8-212">这些三维对象远是重要的因为人类的深度感知系统是很好紧密联系，但不是很好。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-212">These 3D objects are important because human depth perception is very good up close, but not very good far away.</span></span> <span data-ttu-id="e7fb8-213">我们可以得到视频中距离，但若要允许用户四处其空间和感觉像它们确实存在，邻近的对象需要深度。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-213">We can get away with video in the distance, but to allow users to walk around their space and feel like they’re really there, nearby objects need depth.</span></span> <span data-ttu-id="e7fb8-214">此技术是类似的操作可能会看到在自然历史记录博物馆排序 — 图片 diorama 物理景观、 系统和 animal 灵长类馆在前台，但在后台巧妙地屏蔽不光滑绘制到后退去。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-214">This technique is similar to the sort of thing you might see in a natural history museum—picture a diorama that has physical landscaping, plants, and animal specimens in the foreground, but recedes into a cleverly masked matte painting in the background.</span></span>

<span data-ttu-id="e7fb8-215">某些对象是只是三维资产，我们创建并添加到场景中，从而增强的体验。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-215">Some objects are simply 3D assets we created and added to the scene to enhance the experience.</span></span> <span data-ttu-id="e7fb8-216">绘制和热空气气球归到此类别，因为它们并不存在时我们拍摄的。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-216">The painting and the hot air balloon fall into this category because they weren’t present when we filmed.</span></span> <span data-ttu-id="e7fb8-217">类似于游戏资产，他们已创建 3D 艺术家上我们的团队，并相应地设置纹理。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-217">Similar to game assets, they were created by a 3D artist on our team and textured appropriately.</span></span> <span data-ttu-id="e7fb8-218">我们将放置在靠近你的水平，我们场景中，游戏引擎可以呈现这些到两个 HoloLens 显示，以便它们显示为一个三维对象。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-218">We place these in our scenes near where you stand, and the game engine can render them to the two HoloLens displays so that they appear as a 3D object.</span></span>

<span data-ttu-id="e7fb8-219">其他资产，如外部 Pantheon，喷泉真实存在中的位置，我们要排除视频，但将这些对象从视频到三维的对象，我们需要做许多事情。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-219">Other assets, like the fountain outside the Pantheon, are real objects that exist in the locations where we're shooting video, but to bring these objects out of the video and into 3D, we have to do a number of things.</span></span>

<span data-ttu-id="e7fb8-220">首先，我们需要有关每个对象的其他信息。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-220">First, we need additional information about each object.</span></span> <span data-ttu-id="e7fb8-221">上的与位置上，我们的团队捕获大量这些对象的引用数据片段，以便我们必须足够详细的准确地重新创建纹理的图像。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-221">While on location for filming, our team captured a lot of reference footage of these objects so that we would have enough detailed images to accurately recreate the textures.</span></span> <span data-ttu-id="e7fb8-222">团队还执行[photogrammetry](https://en.wikipedia.org/wiki/Photogrammetry)扫描时，该构造从几十个 2D 图像、 三维模型完美大规模让我们粗略的对象模型。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-222">The team also performed a [photogrammetry](https://en.wikipedia.org/wiki/Photogrammetry) scan, which constructs a 3D model from dozens of 2D images, giving us a rough model of the object at perfect scale.</span></span>

<span data-ttu-id="e7fb8-223">我们来处理我们的连续镜头，从视频中删除对象的更高版本将替换 3D 的表示形式。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-223">As we process our footage, objects that will later be replaced with a 3D representation are removed from the video.</span></span> <span data-ttu-id="e7fb8-224">基于 photogrammetry 模型但清理在三维资产，并简化了我们艺术家。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-224">The 3D asset is based on the photogrammetry model but cleaned up and simplified by our artists.</span></span> <span data-ttu-id="e7fb8-225">对于某些对象，我们可以使用视频的部分 — 如上喷泉水纹理 — 但大部分喷泉现在允许用户认为深度和在体验中的空间有限奔波的三维对象。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-225">For some objects, we can use parts of the video—such as the water texture on the fountain—but most of the fountain is now a 3D object, which allows users to perceive depth and walk around it in a limited space in the experience.</span></span> <span data-ttu-id="e7fb8-226">极大地具有如下附近空间对象将添加到的真实性，可帮助在虚拟位置接地用户。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-226">Having near-space objects like this greatly adds to the sense of realism and helps to ground the users in the virtual location.</span></span> 

![删除带有喷泉 pantheon 素材。](images/object-removal-pantheon-500px.png)

<span data-ttu-id="e7fb8-229">删除带有喷泉 pantheon 素材。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-229">Pantheon footage with the fountain removed.</span></span> <span data-ttu-id="e7fb8-230">它将替换为三维资产。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-230">It will be replaced with a 3D asset.</span></span>


## <a name="final-thoughts"></a><span data-ttu-id="e7fb8-231">最后的几点思考</span><span class="sxs-lookup"><span data-stu-id="e7fb8-231">Final thoughts</span></span>

<span data-ttu-id="e7fb8-232">显然，没有创建比此处我们已讨论此内容的信息。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-232">Obviously, there was more to creating this content than what we've discussed here.</span></span> <span data-ttu-id="e7fb8-233">有几个场景 — 我们喜欢将它们"无法实现透视"— 包括热空气气球骑行和 gladiator 打击 Colosseum，采用了更具创造性的方法中。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-233">There are a few scenes—we like to call them "impossible perspectives"—including the hot air balloon ride and the gladiator fight in the Colosseum, which took a more creative approach.</span></span> <span data-ttu-id="e7fb8-234">我们将解决在将来的案例研究。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-234">We'll address these in a future case study.</span></span>

<span data-ttu-id="e7fb8-235">我们希望共享的一些我们在生产过程更大的挑战的解决方案的其他开发人员有帮助，并且您能够使用其中某些技术为 HoloLens 创建自己的沉浸式体验。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-235">We hope that sharing solutions to some of the bigger challenges we had during production is helpful to other developers and that you're inspired to use some of these techniques to create your own immersive experiences for HoloLens.</span></span> <span data-ttu-id="e7fb8-236">(如果您执行操作，请确保上与我们共享[HoloLens 应用程序开发论坛](https://forums.hololens.com/)！)</span><span class="sxs-lookup"><span data-stu-id="e7fb8-236">(And if you do, please make sure to share it with us on the [HoloLens App Development forum](https://forums.hololens.com/)!)</span></span>

## <a name="about-the-authors"></a><span data-ttu-id="e7fb8-237">关于作者</span><span class="sxs-lookup"><span data-stu-id="e7fb8-237">About the authors</span></span>

<table style="border:0">
<tr>
<td style="border:0" width="60px"> <img alt="David Haley" width="60" height="60" src="images/haley.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="e7fb8-238"><b>David Haley</b>是高级开发人员已详细描述有关照相机远程测试机组和视频播放不是他认为可能从 HoloTour 上工作。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-238"><b>David Haley</b> is a Senior Developer who learned more about camera rigs and video playback than he thought possible from working on HoloTour.</span></span></td>
<td style="border:0" width="60px"> <img alt="Danny Askew" width="60" height="60" src="images/askew.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="e7fb8-239"><b>Danny Askew</b>是视频艺术家进行确保通过罗马之旅，尽可能提供完美的人。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-239"><b>Danny Askew</b> is a Video Artist who made sure your journey through Rome was as flawless as possible.</span></span></td>
</tr>
<tr>
<td style="border:0" width="60px"> <img alt="Jason Syltebo" width="60" height="60" src="images/syltebo.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="e7fb8-240"><b>Jason Syltebo</b>是音频设计人员已确保您可能会遇到的访问，即使您及时返回每个目标 soundscape。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-240"><b>Jason Syltebo</b> is an Audio Designer who made sure you could experience the soundscape of every destination you visit, even when you go back in time.</span></span></td>
<td style="border:0" width="60px"> <img alt="Travis Steiner" width="60" height="60" src="images/steiner.png" /></td>
<td style="border:0" width="408"> <span data-ttu-id="e7fb8-241"><b>Travis 佑</b>是那些研究和 scouted 位置、 创建旅行计划和定向与站点上的设计主管。</span><span class="sxs-lookup"><span data-stu-id="e7fb8-241"><b>Travis Steiner</b> is a Design Director who researched and scouted locations, created trip plans, and directed filming on site.</span></span></td>
</tr>
</table>



## <a name="see-also"></a><span data-ttu-id="e7fb8-242">请参阅</span><span class="sxs-lookup"><span data-stu-id="e7fb8-242">See also</span></span>
* [<span data-ttu-id="e7fb8-243">视频：Microsoft HoloLens：HoloTour</span><span class="sxs-lookup"><span data-stu-id="e7fb8-243">Video: Microsoft HoloLens: HoloTour</span></span>](https://www.youtube.com/watch?v=pLd9WPlaMpY)
