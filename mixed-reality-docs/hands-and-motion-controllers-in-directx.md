---
title: 双手和动作中 DirectX 的控制器
description: 在本机 DirectX 应用中使用手动跟踪和动作控制器的开发人员指南。
author: caseymeekhof
ms.author: cmeekhof
ms.date: 04/30/2019
ms.topic: article
keywords: 手、 运动控制器、 directx、 输入、 全息
ms.openlocfilehash: 08666c8c26cd4851c0c003a96a9e96d7a90228ac
ms.sourcegitcommit: 45676da11ebe33a2aa3dccec0e8ad7d714420853
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/15/2019
ms.locfileid: "65629640"
---
# <a name="hands-and-motion-controllers-in-directx"></a><span data-ttu-id="12f28-104">双手和动作中 DirectX 的控制器</span><span class="sxs-lookup"><span data-stu-id="12f28-104">Hands and motion controllers in DirectX</span></span>

<span data-ttu-id="12f28-105">在 Windows 混合现实中，同时传递并[运动控制器](motion-controllers.md)中找到的空间输入 Api，通过处理输入[Windows.UI.Input.Spatial](https://docs.microsoft.com/uwp/api/windows.ui.input.spatial)命名空间。</span><span class="sxs-lookup"><span data-stu-id="12f28-105">In Windows Mixed Reality, both hand and [motion controller](motion-controllers.md) input is handled through the spatial input APIs, found in the [Windows.UI.Input.Spatial](https://docs.microsoft.com/uwp/api/windows.ui.input.spatial) namespace.</span></span> <span data-ttu-id="12f28-106">这使你能够轻松处理常见操作，例如**选择**跨双手和动作控制器按相同的方式。</span><span class="sxs-lookup"><span data-stu-id="12f28-106">This enables you to easily handle common actions like **Select** presses the same way across both hands and motion controllers.</span></span>

## <a name="getting-started"></a><span data-ttu-id="12f28-107">即刻体验</span><span class="sxs-lookup"><span data-stu-id="12f28-107">Getting started</span></span>

<span data-ttu-id="12f28-108">在 Windows Mixed Reality 中输入要访问空间，开始与 SpatialInteractionManager 接口。</span><span class="sxs-lookup"><span data-stu-id="12f28-108">To access spatial input in Windows Mixed Reality, start with the SpatialInteractionManager interface.</span></span>  <span data-ttu-id="12f28-109">可以通过调用来访问此界面[SpatialInteractionManager::GetForCurrentView](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.getforcurrentview)、 在应用启动期间通常一段时间内。</span><span class="sxs-lookup"><span data-stu-id="12f28-109">You can access this interface by calling  [SpatialInteractionManager::GetForCurrentView](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.getforcurrentview), typically sometime during app startup.</span></span>

```cpp
using namespace winrt::Windows::UI::Input::Spatial;

SpatialInteractionManager interactionManager = SpatialInteractionManager::GetForCurrentView();
```

<span data-ttu-id="12f28-110">SpatialInteractionManager 的工作是提供访问权限[SpatialInteractionSources](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource)，其表示的输入源。</span><span class="sxs-lookup"><span data-stu-id="12f28-110">The SpatialInteractionManager's job is to provide access to [SpatialInteractionSources](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource), which represent a source of input.</span></span>  <span data-ttu-id="12f28-111">有三种类型的 SpatialInteractionSources 系统中提供。</span><span class="sxs-lookup"><span data-stu-id="12f28-111">There are three kinds of SpatialInteractionSources available in the system.</span></span>
* <span data-ttu-id="12f28-112">**手**表示检测到的用户的手。</span><span class="sxs-lookup"><span data-stu-id="12f28-112">**Hand** represents a user's detected hand.</span></span> <span data-ttu-id="12f28-113">手源提供了基于在 HoloLens 上基本手势到清楚手动跟踪 HoloLens 2 上的范围的设备的不同功能。</span><span class="sxs-lookup"><span data-stu-id="12f28-113">Hand sources offer different features based on the device, ranging from basic gestures on HoloLens to fully articulated hand tracking on HoloLens 2.</span></span> 
* <span data-ttu-id="12f28-114">**控制器**表示配对的运动控制器。</span><span class="sxs-lookup"><span data-stu-id="12f28-114">**Controller** represents a paired motion controller.</span></span> <span data-ttu-id="12f28-115">运动控制器可以提供的各种功能。</span><span class="sxs-lookup"><span data-stu-id="12f28-115">Motion controllers can offer a variety of capabilities.</span></span>  <span data-ttu-id="12f28-116">例如：选择触发器、 菜单按钮、 掌握按钮、 触摸板和 thumbsticks。</span><span class="sxs-lookup"><span data-stu-id="12f28-116">For example: Select triggers, Menu buttons, Grasp buttons, touchpads and thumbsticks.</span></span>
* <span data-ttu-id="12f28-117">**语音**表示谈到系统检测到关键字的用户的声音。</span><span class="sxs-lookup"><span data-stu-id="12f28-117">**Voice** represents the user's voice speaking system-detected keywords.</span></span> <span data-ttu-id="12f28-118">例如，此源将注入选择按下并释放时用户所讲的"选择"。</span><span class="sxs-lookup"><span data-stu-id="12f28-118">For example, this source will inject a Select press and release whenever the user says "Select".</span></span>

<span data-ttu-id="12f28-119">每个帧数据源以表示[SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate)接口。</span><span class="sxs-lookup"><span data-stu-id="12f28-119">Per-frame data for a source is represented by the  [SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate) interface.</span></span> <span data-ttu-id="12f28-120">有两种不同的方式来访问此数据，具体取决于是否想要在应用程序中使用事件驱动的或基于轮询的模型。</span><span class="sxs-lookup"><span data-stu-id="12f28-120">There are two different ways to access this data, depending on whether you want to use an event-driven or polling-based model in your application.</span></span>

### <a name="event-driven-input"></a><span data-ttu-id="12f28-121">事件驱动的输入</span><span class="sxs-lookup"><span data-stu-id="12f28-121">Event-driven input</span></span>
<span data-ttu-id="12f28-122">SpatialInteractionManager 提供您的应用程序可以侦听的事件数。</span><span class="sxs-lookup"><span data-stu-id="12f28-122">The SpatialInteractionManager provides a number of events that your app can listen for.</span></span>  <span data-ttu-id="12f28-123">一些示例包括[SourcePressed](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcepressed)， [SourceReleased](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcereleased)并[SourceUpdated](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourceupdated)。</span><span class="sxs-lookup"><span data-stu-id="12f28-123">A few examples include   [SourcePressed](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcepressed), [SourceReleased](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcereleased) and [SourceUpdated](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourceupdated).</span></span>

<span data-ttu-id="12f28-124">例如，下面的代码挂接事件处理程序调用 MyApp::OnSourcePressed SourcePressed 事件。</span><span class="sxs-lookup"><span data-stu-id="12f28-124">For example, the following code hooks up an event handler called MyApp::OnSourcePressed to the SourcePressed event.</span></span>  <span data-ttu-id="12f28-125">这可让应用来检测任何类型的交互源上，按下按钮。</span><span class="sxs-lookup"><span data-stu-id="12f28-125">This allows your app to detect presses on any type of interaction source.</span></span>

```cpp
using namespace winrt::Windows::UI::Input::Spatial;

auto interactionManager = SpatialInteractionManager::GetForCurrentView();
interactionManager.SourcePressed({ this, &MyApp::OnSourcePressed });

```

<span data-ttu-id="12f28-126">此按下的事件发送到您的应用程序以异步方式，以及在按下了发生的时相应 SpatialInteractionSourceState。</span><span class="sxs-lookup"><span data-stu-id="12f28-126">This pressed event is sent to your app asynchronously, along with the corresponding SpatialInteractionSourceState at the time the press happened.</span></span> <span data-ttu-id="12f28-127">你的应用或游戏引擎可能需要执行一些处理立即或你可能想要在输入处理例程中的事件数据进行排队。</span><span class="sxs-lookup"><span data-stu-id="12f28-127">Your app or game engine may want to perform some processing right away or you may want to queue up the event data in your input processing routine.</span></span> <span data-ttu-id="12f28-128">下面是 SourcePressed 事件，其中说明了如何检查是否选择按钮曾按下一个事件处理程序函数。</span><span class="sxs-lookup"><span data-stu-id="12f28-128">Here is an event handler function for the SourcePressed event, which shows how to check whether the select button was pressed.</span></span>

```cpp
using namespace winrt::Windows::UI::Input::Spatial;

void MyApp::OnSourcePressed(SpatialInteractionManager const& sender, SpatialInteractionSourceEventArgs const& args)
{
    if (args.PressKind() == SpatialInteractionPressKind::Select)
    {
        // Select button was pressed, update app state
    }
}
```

<span data-ttu-id="12f28-129">上面的代码仅检查 Select press，它对应于在设备上的主要操作。</span><span class="sxs-lookup"><span data-stu-id="12f28-129">The above code only checks for the 'Select' press, which corresponds to the primary action on the device.</span></span> <span data-ttu-id="12f28-130">示例包括执行 HoloLens 上的 AirTap 或拉取运动控制器上的触发器。</span><span class="sxs-lookup"><span data-stu-id="12f28-130">Examples include doing an AirTap on HoloLens or pulling the trigger on a motion controller.</span></span>  <span data-ttu-id="12f28-131">在 select，按下按钮表示用户的意图激活它们面向的全息图。</span><span class="sxs-lookup"><span data-stu-id="12f28-131">'Select' presses represent the user's intention to activate the hologram they are targeting.</span></span>  <span data-ttu-id="12f28-132">SourcePressed 事件将激发为许多不同的按钮和手势，并可以检查 SpatialInteractionSource 要测试这种情况下上的其他属性。</span><span class="sxs-lookup"><span data-stu-id="12f28-132">The SourcePressed event will fire for a number of different buttons and gestures, and you can inspect other properties on the SpatialInteractionSource to test for those cases.</span></span>

### <a name="polling-based-input"></a><span data-ttu-id="12f28-133">基于轮询的输入</span><span class="sxs-lookup"><span data-stu-id="12f28-133">Polling-based input</span></span>
<span data-ttu-id="12f28-134">SpatialInteractionManager 还可用于轮询的输入的当前状态的每一帧。</span><span class="sxs-lookup"><span data-stu-id="12f28-134">You can also use SpatialInteractionManager to poll for the current state of input every frame.</span></span>  <span data-ttu-id="12f28-135">若要执行此操作，只需调用[GetDetectedSourcesAtTimestamp](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.getdetectedsourcesattimestamp)每一帧。</span><span class="sxs-lookup"><span data-stu-id="12f28-135">To do this, simply call [GetDetectedSourcesAtTimestamp](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.getdetectedsourcesattimestamp) every frame.</span></span>  <span data-ttu-id="12f28-136">此函数返回一个数组，包含一个[SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate)对于每个活动[SpatialInteractionSource](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource)。</span><span class="sxs-lookup"><span data-stu-id="12f28-136">This function returns an array containing one [SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate) for every active [SpatialInteractionSource](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource).</span></span> <span data-ttu-id="12f28-137">如果最近失措 select 命令，这意味着分别为每个活动的运动控制器，每个被跟踪的指针和语音。</span><span class="sxs-lookup"><span data-stu-id="12f28-137">This means one for each active motion controller, one for each tracked hand, and one for speech if a 'select' command was recently uttered.</span></span> <span data-ttu-id="12f28-138">到应用程序可以检查每个驱动器输入 SpatialInteractionSourceState 上的属性。</span><span class="sxs-lookup"><span data-stu-id="12f28-138">You can then inspect the properties on each SpatialInteractionSourceState to drive input into your application.</span></span> 

<span data-ttu-id="12f28-139">下面是如何检查使用轮询方法 select 操作的示例。</span><span class="sxs-lookup"><span data-stu-id="12f28-139">Here is an example of how to check for the 'select' action using the polling method.</span></span> <span data-ttu-id="12f28-140">请注意，*预测*变量表示[HolographicFramePrediction](https://docs.microsoft.com/en-us/uwp/api/Windows.Graphics.Holographic.HolographicFramePrediction)对象，可以从获取[HolographicFrame](https://docs.microsoft.com/en-us/uwp/api/windows.graphics.holographic.holographicframe)。</span><span class="sxs-lookup"><span data-stu-id="12f28-140">Note that the *prediction* variable represents a [HolographicFramePrediction](https://docs.microsoft.com/en-us/uwp/api/Windows.Graphics.Holographic.HolographicFramePrediction) object, which can be obtained from the [HolographicFrame](https://docs.microsoft.com/en-us/uwp/api/windows.graphics.holographic.holographicframe).</span></span>

```cpp
using namespace winrt::Windows::UI::Input::Spatial;

auto interactionManager = SpatialInteractionManager::GetForCurrentView();
auto sourceStates = m_spatialInteractionManager.GetDetectedSourcesAtTimestamp(prediction.Timestamp());

for (auto& sourceState : sourceStates)
{
    if (sourceState.IsSelectPressed())
    {
        // Select button is down, update app state
    }
}
```

<span data-ttu-id="12f28-141">每个 SpatialInteractionSource 有一个 ID，用于标识新的源和关联帧之间的现有源。</span><span class="sxs-lookup"><span data-stu-id="12f28-141">Each SpatialInteractionSource has an ID, which you can use to identify new sources and correlate existing sources from frame to frame.</span></span>  <span data-ttu-id="12f28-142">每次它们保持，然后输入 FOV，控制器 Id 的会话的持续时间内保持不变，但手分配一个新的 ID。</span><span class="sxs-lookup"><span data-stu-id="12f28-142">Hands are assigned a new ID every time they leave and enter the FOV, but controller IDs remain static for the duration of the session.</span></span>  <span data-ttu-id="12f28-143">您可以使用事件上 SpatialInteractionManager 如[SourceDetected](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcedetected)并[SourceLost](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcelost)、 时手进入或离开设备做出反应的查看，或当运动控制器打开/关闭或配对/不成对。</span><span class="sxs-lookup"><span data-stu-id="12f28-143">You can use the events on SpatialInteractionManager such as [SourceDetected](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcedetected) and [SourceLost](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcelost), to react when hands enter or leave the device's view, or when motion controllers are turned on/off or are paired/unpaired.</span></span>

### <a name="predicted-vs-historical-poses"></a><span data-ttu-id="12f28-144">与历史带来预测</span><span class="sxs-lookup"><span data-stu-id="12f28-144">Predicted vs. historical poses</span></span>
<span data-ttu-id="12f28-145">请注意，GetDetectedSourcesAtTimestamp 时间戳参数。</span><span class="sxs-lookup"><span data-stu-id="12f28-145">Note that GetDetectedSourcesAtTimestamp has a timestamp parameter.</span></span> <span data-ttu-id="12f28-146">这使您可以请求状态，并且会带来可以预测的数据或历史记录，让您关联与其他输入源的空间交互。</span><span class="sxs-lookup"><span data-stu-id="12f28-146">This enables you to request state and pose data that is either predicted or historical, letting you correlate spatial interactions with other sources of input.</span></span> <span data-ttu-id="12f28-147">例如，当呈现当前帧中的手形图标的位置，您可以传递中提供的预测时间戳[HolographicFrame](https://docs.microsoft.com/en-us/uwp/api/windows.graphics.holographic.holographicframe)。</span><span class="sxs-lookup"><span data-stu-id="12f28-147">For example, when rendering the hand's position in the current frame, you can pass in the predicted timestamp provided by the [HolographicFrame](https://docs.microsoft.com/en-us/uwp/api/windows.graphics.holographic.holographicframe).</span></span> <span data-ttu-id="12f28-148">这使系统以正向预测的手的位置与呈现的帧输出中，最大程度减少感知到的延迟紧密地保持一致。</span><span class="sxs-lookup"><span data-stu-id="12f28-148">This enables the system to forward-predict the hand position to closely align with the rendered frame output, minimizing perceived latency.</span></span>

<span data-ttu-id="12f28-149">但是，此类预测的姿势不会生成与交互源定位理想指针 ray。</span><span class="sxs-lookup"><span data-stu-id="12f28-149">However, such a predicted pose does not produce an ideal pointing ray for targeting with an interaction source.</span></span> <span data-ttu-id="12f28-150">例如，motion 控制器按钮按下时，可能需要最多 20 毫秒向上冒泡通过蓝牙操作系统到该事件。</span><span class="sxs-lookup"><span data-stu-id="12f28-150">For example, when a motion controller button is pressed, it can take up to 20ms for that event to bubble up through Bluetooth to the operating system.</span></span> <span data-ttu-id="12f28-151">同样，用户执行手动手势后，系统检测到笔势和应用程序，然后为其轮询之前，可能会通过一段时间。</span><span class="sxs-lookup"><span data-stu-id="12f28-151">Similarly, after a user performs a hand gesture, some amount of time may pass before the system detects the gesture and your app then polls for it.</span></span> <span data-ttu-id="12f28-152">时您的应用程序轮询状态更改，头节点和现有带来用于映射到在过去实际上发生交互的目标。</span><span class="sxs-lookup"><span data-stu-id="12f28-152">By the time your app polls for a state change, the head and hand poses used to target that interaction actually happened in the past.</span></span> <span data-ttu-id="12f28-153">如果你面向通过将当前 HolographicFrame 的时间戳传递给 GetDetectedSourcesAtTimestamp，姿势将改为向前预测到的目标的射线时将显示在帧，这在将来可能会超过 20 毫秒。</span><span class="sxs-lookup"><span data-stu-id="12f28-153">If you target by passing your current HolographicFrame's timestamp to GetDetectedSourcesAtTimestamp, the pose will instead be forward predicted to the targeting ray at the time the frame will be displayed, which could be more than 20ms in the future.</span></span> <span data-ttu-id="12f28-154">此将来姿势适合*呈现*交互源，但会构成我们时间问题*面向*交互，如用户的目标发生在过去。</span><span class="sxs-lookup"><span data-stu-id="12f28-154">This future pose is good for *rendering* the interaction source, but compounds our time problem for *targeting* the interaction, as the user's targeting occurred in the past.</span></span>

<span data-ttu-id="12f28-155">幸运的是， [SourcePressed](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcepressed)， [SourceReleased](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcereleased)并[SourceUpdated](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourceupdated)事件提供历史[状态](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourceeventargs.state)与相关联每个输入事件。</span><span class="sxs-lookup"><span data-stu-id="12f28-155">Fortunately, the [SourcePressed](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcepressed), [SourceReleased](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcereleased) and [SourceUpdated](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourceupdated) events provide the historical [State](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourceeventargs.state) associated with each input event.</span></span>  <span data-ttu-id="12f28-156">这直接包括可通过历史头节点和现有带来[TryGetPointerPose](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.trygetpointerpose)，以及历史[时间戳](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.timestamp)可传递给其他 Api 将与此事件相关联。</span><span class="sxs-lookup"><span data-stu-id="12f28-156">This directly includes the historical head and hand poses available through [TryGetPointerPose](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.trygetpointerpose), along with a historical [Timestamp](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.timestamp) that you can pass to other APIs to correlate with this event.</span></span>

<span data-ttu-id="12f28-157">这产生了以下最佳实践时呈现和与双手和控制器针对每个帧：</span><span class="sxs-lookup"><span data-stu-id="12f28-157">That leads to the following best practices when rendering and targeting with hands and controllers each frame:</span></span>
* <span data-ttu-id="12f28-158">有关**手/控制器呈现**每个帧，您的应用程序应**轮询**有关**进预测**在当前帧的 photon 时带来的交互的每个源。</span><span class="sxs-lookup"><span data-stu-id="12f28-158">For **hand/controller rendering** each frame, your app should **poll** for the **forward-predicted** pose of each interaction source at the current frame’s photon time.</span></span>  <span data-ttu-id="12f28-159">可以通过调用轮询交互的所有源[GetDetectedSourcesAtTimestamp](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.getdetectedsourcesattimestamp)中提供的预测时间戳传递每个帧[HolographicFrame::CurrentPrediction](https://docs.microsoft.com/en-us/uwp/api/windows.graphics.holographic.holographicframe.currentprediction)。</span><span class="sxs-lookup"><span data-stu-id="12f28-159">You can poll for all interaction sources by calling [GetDetectedSourcesAtTimestamp](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.getdetectedsourcesattimestamp) each frame, passing in the predicted timestamp provided by [HolographicFrame::CurrentPrediction](https://docs.microsoft.com/en-us/uwp/api/windows.graphics.holographic.holographicframe.currentprediction).</span></span>
* <span data-ttu-id="12f28-160">有关**手/控制器面向**按或版本，您的应用程序应处理按下/释放**事件**，光线投射的细节基于**历史**的头或手动姿势该事件。</span><span class="sxs-lookup"><span data-stu-id="12f28-160">For **hand/controller targeting** upon a press or release, your app should handle pressed/released **events**, raycasting based on the **historical** head or hand pose for that event.</span></span> <span data-ttu-id="12f28-161">通过处理获取此目标 ray [SourcePressed](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcepressed)或[SourceReleased](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcereleased)事件时，获取[状态](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourceeventargs.state)属性从事件参数，并调用其[TryGetPointerPose](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.trygetpointerpose)方法。</span><span class="sxs-lookup"><span data-stu-id="12f28-161">You get this targeting ray by handling the [SourcePressed](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcepressed) or [SourceReleased](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionmanager.sourcereleased) event, getting the [State](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourceeventargs.state) property from the event arguments, and then calling its [TryGetPointerPose](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.trygetpointerpose) method.</span></span>

## <a name="cross-device-input-properties"></a><span data-ttu-id="12f28-162">跨设备输入的属性</span><span class="sxs-lookup"><span data-stu-id="12f28-162">Cross-device input properties</span></span>
<span data-ttu-id="12f28-163">SpatialInteractionSource API 支持控制器和手动跟踪系统与大范围的功能。</span><span class="sxs-lookup"><span data-stu-id="12f28-163">The SpatialInteractionSource API supports controllers and hand tracking systems with a wide range of capabilities.</span></span> <span data-ttu-id="12f28-164">很多这些功能之间是通用的设备类型。</span><span class="sxs-lookup"><span data-stu-id="12f28-164">A number of these capabilities are common between device types.</span></span> <span data-ttu-id="12f28-165">例如，手动跟踪和动作控制器这两种都提供 select 操作和 3D 的位置。</span><span class="sxs-lookup"><span data-stu-id="12f28-165">For example, hand tracking and motion controllers both provide a 'select' action and a 3D position.</span></span> <span data-ttu-id="12f28-166">如有可能，API 将这些常见功能映射到 SpatialInteractionSource 上的相同属性。</span><span class="sxs-lookup"><span data-stu-id="12f28-166">Wherever possible, the API maps these common capabilities to the same properties on the SpatialInteractionSource.</span></span>  <span data-ttu-id="12f28-167">这使应用程序可以更轻松地支持各种输入类型。</span><span class="sxs-lookup"><span data-stu-id="12f28-167">This enables applications to more easily support a wide range of input types.</span></span> <span data-ttu-id="12f28-168">下表描述的属性的支持，以及它们如何在输入类型进行比较。</span><span class="sxs-lookup"><span data-stu-id="12f28-168">The following table describes the properties that are supported, and how they compare across input types.</span></span>

| <span data-ttu-id="12f28-169">属性</span><span class="sxs-lookup"><span data-stu-id="12f28-169">Property</span></span> | <span data-ttu-id="12f28-170">描述</span><span class="sxs-lookup"><span data-stu-id="12f28-170">Description</span></span> | <span data-ttu-id="12f28-171">HoloLens 手势</span><span class="sxs-lookup"><span data-stu-id="12f28-171">HoloLens Gestures</span></span> | <span data-ttu-id="12f28-172">运动控制器</span><span class="sxs-lookup"><span data-stu-id="12f28-172">Motion Controllers</span></span> | <span data-ttu-id="12f28-173">明确的手</span><span class="sxs-lookup"><span data-stu-id="12f28-173">Articulated Hands</span></span>|
|--- |--- |--- |--- |--- |
| [<span data-ttu-id="12f28-174">SpatialInteractionSource::**左右手使用习惯**</span><span class="sxs-lookup"><span data-stu-id="12f28-174">SpatialInteractionSource::**Handedness**</span></span>](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource.handedness) | <span data-ttu-id="12f28-175">右侧或左侧 / 控制器。</span><span class="sxs-lookup"><span data-stu-id="12f28-175">Right or left hand / controller.</span></span> | <span data-ttu-id="12f28-176">不支持</span><span class="sxs-lookup"><span data-stu-id="12f28-176">Not Supported</span></span> | <span data-ttu-id="12f28-177">支持</span><span class="sxs-lookup"><span data-stu-id="12f28-177">Supported</span></span> | <span data-ttu-id="12f28-178">支持</span><span class="sxs-lookup"><span data-stu-id="12f28-178">Supported</span></span> |
| [<span data-ttu-id="12f28-179">SpatialInteractionSourceState::**IsSelectPressed**</span><span class="sxs-lookup"><span data-stu-id="12f28-179">SpatialInteractionSourceState::**IsSelectPressed**</span></span>](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.isselectpressed) | <span data-ttu-id="12f28-180">主要按钮的当前状态。</span><span class="sxs-lookup"><span data-stu-id="12f28-180">Current state of the primary button.</span></span> | <span data-ttu-id="12f28-181">敲击</span><span class="sxs-lookup"><span data-stu-id="12f28-181">Air Tap</span></span> | <span data-ttu-id="12f28-182">触发器</span><span class="sxs-lookup"><span data-stu-id="12f28-182">Trigger</span></span> | <span data-ttu-id="12f28-183">宽松空气点击 （竖直的情况下捏合）</span><span class="sxs-lookup"><span data-stu-id="12f28-183">Relaxed Air Tap (upright pinch)</span></span> |
| [<span data-ttu-id="12f28-184">SpatialInteractionSourceState::**IsGrasped**</span><span class="sxs-lookup"><span data-stu-id="12f28-184">SpatialInteractionSourceState::**IsGrasped**</span></span>](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.isgrasped) | <span data-ttu-id="12f28-185">随取即行按钮的当前状态。</span><span class="sxs-lookup"><span data-stu-id="12f28-185">Current state of the grab button.</span></span> | <span data-ttu-id="12f28-186">不支持</span><span class="sxs-lookup"><span data-stu-id="12f28-186">Not Supported</span></span> | <span data-ttu-id="12f28-187">获取按钮</span><span class="sxs-lookup"><span data-stu-id="12f28-187">Grab button</span></span> | <span data-ttu-id="12f28-188">捏合或已关闭的手</span><span class="sxs-lookup"><span data-stu-id="12f28-188">Pinch or Closed Hand</span></span> |
| [<span data-ttu-id="12f28-189">SpatialInteractionSourceState::**IsMenuPressed**</span><span class="sxs-lookup"><span data-stu-id="12f28-189">SpatialInteractionSourceState::**IsMenuPressed**</span></span>](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.ismenupressed) | <span data-ttu-id="12f28-190">菜单按钮的当前状态。</span><span class="sxs-lookup"><span data-stu-id="12f28-190">Current state of the menu button.</span></span>    | <span data-ttu-id="12f28-191">不支持</span><span class="sxs-lookup"><span data-stu-id="12f28-191">Not Supported</span></span> | <span data-ttu-id="12f28-192">菜单按钮</span><span class="sxs-lookup"><span data-stu-id="12f28-192">Menu Button</span></span> | <span data-ttu-id="12f28-193">不支持</span><span class="sxs-lookup"><span data-stu-id="12f28-193">Not Supported</span></span> |
| [<span data-ttu-id="12f28-194">SpatialInteractionSourceLocation::**Position**</span><span class="sxs-lookup"><span data-stu-id="12f28-194">SpatialInteractionSourceLocation::**Position**</span></span>](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcelocation.position) | <span data-ttu-id="12f28-195">在控制器上的手形或手柄位置的 x y Z 位置。</span><span class="sxs-lookup"><span data-stu-id="12f28-195">XYZ location of the hand or grip position on the controller.</span></span> | <span data-ttu-id="12f28-196">Palm 位置</span><span class="sxs-lookup"><span data-stu-id="12f28-196">Palm location</span></span> | <span data-ttu-id="12f28-197">手柄姿势位置</span><span class="sxs-lookup"><span data-stu-id="12f28-197">Grip pose position</span></span> | <span data-ttu-id="12f28-198">Palm 位置</span><span class="sxs-lookup"><span data-stu-id="12f28-198">Palm location</span></span> |
| [<span data-ttu-id="12f28-199">SpatialInteractionSourceLocation::**Orientation**</span><span class="sxs-lookup"><span data-stu-id="12f28-199">SpatialInteractionSourceLocation::**Orientation**</span></span>](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcelocation.orientation) | <span data-ttu-id="12f28-200">四元数，表示手形或手柄的方向会造成在控制器上。</span><span class="sxs-lookup"><span data-stu-id="12f28-200">Quaternion representing the orientation of the hand or grip pose on the controller.</span></span> | <span data-ttu-id="12f28-201">不支持</span><span class="sxs-lookup"><span data-stu-id="12f28-201">Not Supported</span></span> | <span data-ttu-id="12f28-202">手柄姿势方向</span><span class="sxs-lookup"><span data-stu-id="12f28-202">Grip pose orientation</span></span> | <span data-ttu-id="12f28-203">Palm 方向</span><span class="sxs-lookup"><span data-stu-id="12f28-203">Palm orientation</span></span> |
| [<span data-ttu-id="12f28-204">SpatialPointerInteractionSourcePose::**Position**</span><span class="sxs-lookup"><span data-stu-id="12f28-204">SpatialPointerInteractionSourcePose::**Position**</span></span>](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialpointerinteractionsourcepose.position#Windows_UI_Input_Spatial_SpatialPointerInteractionSourcePose_Position) | <span data-ttu-id="12f28-205">指针的射线的原点。</span><span class="sxs-lookup"><span data-stu-id="12f28-205">Origin of the pointing ray.</span></span> | <span data-ttu-id="12f28-206">不支持</span><span class="sxs-lookup"><span data-stu-id="12f28-206">Not Supported</span></span> | <span data-ttu-id="12f28-207">支持</span><span class="sxs-lookup"><span data-stu-id="12f28-207">Supported</span></span> | <span data-ttu-id="12f28-208">支持</span><span class="sxs-lookup"><span data-stu-id="12f28-208">Supported</span></span> |
| [<span data-ttu-id="12f28-209">SpatialPointerInteractionSourcePose::**ForwardDirection**</span><span class="sxs-lookup"><span data-stu-id="12f28-209">SpatialPointerInteractionSourcePose::**ForwardDirection**</span></span>](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialpointerinteractionsourcepose.forwarddirection#Windows_UI_Input_Spatial_SpatialPointerInteractionSourcePose_ForwardDirection) | <span data-ttu-id="12f28-210">指针的射线的方向。</span><span class="sxs-lookup"><span data-stu-id="12f28-210">Direction of the pointing ray.</span></span> | <span data-ttu-id="12f28-211">不支持</span><span class="sxs-lookup"><span data-stu-id="12f28-211">Not Supported</span></span> | <span data-ttu-id="12f28-212">支持</span><span class="sxs-lookup"><span data-stu-id="12f28-212">Supported</span></span> | <span data-ttu-id="12f28-213">支持</span><span class="sxs-lookup"><span data-stu-id="12f28-213">Supported</span></span> |

<span data-ttu-id="12f28-214">某些上述属性不在所有设备上可用，该 API 提供了一种方法来对此进行测试。</span><span class="sxs-lookup"><span data-stu-id="12f28-214">Some of the above properties are not available on all devices, and the API provides a means to test for this.</span></span> <span data-ttu-id="12f28-215">例如，您可以检查[SpatialInteractionSource::IsGraspSupported](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource.isgraspsupported)属性来确定源是否提供了掌握现有操作。</span><span class="sxs-lookup"><span data-stu-id="12f28-215">For example, you can inspect the [SpatialInteractionSource::IsGraspSupported](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource.isgraspsupported) property to determine whether the source provides a grasp action.</span></span>

### <a name="grip-pose-vs-pointing-pose"></a><span data-ttu-id="12f28-216">与指针姿势手柄姿势</span><span class="sxs-lookup"><span data-stu-id="12f28-216">Grip pose vs. pointing pose</span></span>

<span data-ttu-id="12f28-217">Windows Mixed Reality 支持各种外形规格的运动控制器。</span><span class="sxs-lookup"><span data-stu-id="12f28-217">Windows Mixed Reality supports motion controllers in a variety of form factors.</span></span>  <span data-ttu-id="12f28-218">它还支持明确的手动跟踪系统。</span><span class="sxs-lookup"><span data-stu-id="12f28-218">It also supports articulated hand tracking systems.</span></span>  <span data-ttu-id="12f28-219">所有这些系统具有不同的手位置和应用程序应使用的用户的手中的指向或 rendreing 对象的自然"转发"方向之间的关系。</span><span class="sxs-lookup"><span data-stu-id="12f28-219">All of these systems have different relationships between the hand position and the natural "forward" direction that apps should use for pointing or rendreing objects in the user's hand.</span></span>  <span data-ttu-id="12f28-220">若要支持所有这些，有两种类型的三维带来的两个手动跟踪和动作控制器提供。</span><span class="sxs-lookup"><span data-stu-id="12f28-220">To support all of this, there are two types of 3D poses provided for both hand tracking and motion controllers.</span></span>  <span data-ttu-id="12f28-221">第一种是手柄姿势，表示用户的手位置。</span><span class="sxs-lookup"><span data-stu-id="12f28-221">The first is grip pose, which represents the user's hand position.</span></span>  <span data-ttu-id="12f28-222">第二个指向姿势，表示指针射线源自用户的手或控制器。</span><span class="sxs-lookup"><span data-stu-id="12f28-222">The second is pointing pose, which represents a pointing ray originating from the user's hand or controller.</span></span> <span data-ttu-id="12f28-223">因此，如果你想要呈现**用户的手**或**对象保存在用户的手中**，如双刃剑或手段，使用手柄姿势。</span><span class="sxs-lookup"><span data-stu-id="12f28-223">So, if you want to render **the user's hand** or **an object held in the user's hand**, such as a sword or gun, use the grip pose.</span></span> <span data-ttu-id="12f28-224">如果希望从控制器或手的形状，例如，如果用户是 raycast**指向 UI** ，使用指针姿势。</span><span class="sxs-lookup"><span data-stu-id="12f28-224">If you want to raycast from the controller or hand, for example when the user is **pointing at UI** , use the pointing pose.</span></span>

<span data-ttu-id="12f28-225">您可以访问**手柄姿势**通过[SpatialInteractionSourceState::Properties::TryGetLocation(...)](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourceproperties.trygetlocation#Windows_UI_Input_Spatial_SpatialInteractionSourceProperties_TryGetLocation_Windows_Perception_Spatial_SpatialCoordinateSystem_).它定义，如下所示：</span><span class="sxs-lookup"><span data-stu-id="12f28-225">You can access the **grip pose** through [SpatialInteractionSourceState::Properties::TryGetLocation(...)](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourceproperties.trygetlocation#Windows_UI_Input_Spatial_SpatialInteractionSourceProperties_TryGetLocation_Windows_Perception_Spatial_SpatialCoordinateSystem_).  It is defined as follows:</span></span>
* <span data-ttu-id="12f28-226">**抓住位置**:Palm 质心时保存在控制器正常情况下，调整左侧或右侧居中手柄内的位置。</span><span class="sxs-lookup"><span data-stu-id="12f28-226">The **grip position**: The palm centroid when holding the controller naturally, adjusted left or right to center the position within the grip.</span></span>
* <span data-ttu-id="12f28-227">**抓住方向的右轴**:完全打开您的手以形成平面 5 手指姿势，ray 的时您的手掌接触到正常 （从左 palm，向右 palm 从后向前）</span><span class="sxs-lookup"><span data-stu-id="12f28-227">The **grip orientation's Right axis**: When you completely open your hand to form a flat 5-finger pose, the ray that is normal to your palm (forward from left palm, backward from right palm)</span></span>
* <span data-ttu-id="12f28-228">**抓住正轴方向的**:当您关闭您的手部分 （就像按控制器），"forward"通过管通过非 thumb 手指点与射线。</span><span class="sxs-lookup"><span data-stu-id="12f28-228">The **grip orientation's Forward axis**: When you close your hand partially (as if holding the controller), the ray that points "forward" through the tube formed by your non-thumb fingers.</span></span>
* <span data-ttu-id="12f28-229">**抓住方向沿轴向上**:权限隐含的权限和转发定义最多轴。</span><span class="sxs-lookup"><span data-stu-id="12f28-229">The **grip orientation's Up axis**: The Up axis implied by the Right and Forward definitions.</span></span>

<span data-ttu-id="12f28-230">您可以访问**指针姿势**通过[SpatialInteractionSourceState::Properties::TryGetLocation （...）:: SourcePointerPose](https://docs.microsoft.com/uwp/api/windows.ui.input.spatial.spatialinteractionsourcelocation#Windows_UI_Input_Spatial_SpatialInteractionSourceLocation_SourcePointerPose)或[SpatialInteractionSourceState::TryGetPointerPose （...）:: TryGetInteractionSourcePose](https://docs.microsoft.com/uwp/api/windows.ui.input.spatial.spatialpointerpose#Windows_UI_Input_Spatial_SpatialPointerPose_TryGetInteractionSourcePose_Windows_UI_Input_Spatial_SpatialInteractionSource_)。</span><span class="sxs-lookup"><span data-stu-id="12f28-230">You can access the **pointer pose** through [SpatialInteractionSourceState::Properties::TryGetLocation(...)::SourcePointerPose](https://docs.microsoft.com/uwp/api/windows.ui.input.spatial.spatialinteractionsourcelocation#Windows_UI_Input_Spatial_SpatialInteractionSourceLocation_SourcePointerPose) or [SpatialInteractionSourceState::TryGetPointerPose(...)::TryGetInteractionSourcePose](https://docs.microsoft.com/uwp/api/windows.ui.input.spatial.spatialpointerpose#Windows_UI_Input_Spatial_SpatialPointerPose_TryGetInteractionSourcePose_Windows_UI_Input_Spatial_SpatialInteractionSource_).</span></span>

## <a name="controller-specific-input-properties"></a><span data-ttu-id="12f28-231">特定于控制器的输入的属性</span><span class="sxs-lookup"><span data-stu-id="12f28-231">Controller-specific input properties</span></span>
<span data-ttu-id="12f28-232">对于控制器，SpatialInteractionSource 具有通过附加功能的控制器属性。</span><span class="sxs-lookup"><span data-stu-id="12f28-232">For controllers, the SpatialInteractionSource has a Controller property with additional capabilities.</span></span>
* <span data-ttu-id="12f28-233">**HasThumbstick:** 如果为 true，则控制器有摇杆。</span><span class="sxs-lookup"><span data-stu-id="12f28-233">**HasThumbstick:** If true, the controller has a thumbstick.</span></span> <span data-ttu-id="12f28-234">检查[ControllerProperties](https://docs.microsoft.com/uwp/api/windows.ui.input.spatial.spatialinteractioncontrollerproperties) SpatialInteractionSourceState 获取摇杆属性 x 和 y 值 （ThumbstickX 和 ThumbstickY），以及其按下的状态 (IsThumbstickPressed)。</span><span class="sxs-lookup"><span data-stu-id="12f28-234">Inspect the [ControllerProperties](https://docs.microsoft.com/uwp/api/windows.ui.input.spatial.spatialinteractioncontrollerproperties) property of the SpatialInteractionSourceState to acquire the thumbstick x and y values (ThumbstickX and ThumbstickY), as well as its pressed state (IsThumbstickPressed).</span></span>
* <span data-ttu-id="12f28-235">**HasTouchpad:** 如果为 true，则控制器具有触摸板。</span><span class="sxs-lookup"><span data-stu-id="12f28-235">**HasTouchpad:** If true, the controller has a touchpad.</span></span> <span data-ttu-id="12f28-236">检查 SpatialInteractionSourceState 获取触摸板的 ControllerProperties 属性 x 和 y 值 （TouchpadX 和 TouchpadY），并了解如果用户触摸板 (IsTouchpadTouched)，并且它们按下 （触摸板IsTouchpadPressed)。</span><span class="sxs-lookup"><span data-stu-id="12f28-236">Inspect the ControllerProperties property of the SpatialInteractionSourceState to acquire the touchpad x and y values (TouchpadX and TouchpadY), and to know if the user is touching the pad (IsTouchpadTouched) and if they are pressing the touchpad down (IsTouchpadPressed).</span></span>
* <span data-ttu-id="12f28-237">**SimpleHapticsController:** 在控制器 SimpleHapticsController API 允许你检查控制器的 haptics 功能并允许您控制 haptic 反馈。</span><span class="sxs-lookup"><span data-stu-id="12f28-237">**SimpleHapticsController:** The SimpleHapticsController API for the controller allows you to inspect the haptics capabilities of the controller, and it also allows you to control haptic feedback.</span></span>

<span data-ttu-id="12f28-238">请注意触摸板和摇杆的范围是-1 到 1 的两个轴 （从底部到顶部，和从左到右）。</span><span class="sxs-lookup"><span data-stu-id="12f28-238">Note that the range for touchpad and thumbstick is -1 to 1 for both axes (from bottom to top, and from left to right).</span></span> <span data-ttu-id="12f28-239">对于模拟的触发器，请访问使用 SpatialInteractionSourceState::SelectPressedValue 属性，该范围提供一系列的 0 到 1。</span><span class="sxs-lookup"><span data-stu-id="12f28-239">The range for the analog trigger, which is accessed using the SpatialInteractionSourceState::SelectPressedValue property, has a range of 0 to 1.</span></span> <span data-ttu-id="12f28-240">值为 1 的关联与 IsSelectPressed 等于 true;任何其他值将等于 false 的 IsSelectPressed 与相关联。</span><span class="sxs-lookup"><span data-stu-id="12f28-240">A value of 1 correlates with IsSelectPressed being equal to true; any other value correlates with IsSelectPressed being equal to false.</span></span>

## <a name="articulated-hand-tracking"></a><span data-ttu-id="12f28-241">明确的手动跟踪</span><span class="sxs-lookup"><span data-stu-id="12f28-241">Articulated hand tracking</span></span>
<span data-ttu-id="12f28-242">Windows 混合现实 API 为明确手动跟踪，例如 HoloLens 2 上提供完整支持。</span><span class="sxs-lookup"><span data-stu-id="12f28-242">The Windows Mixed Reality API provides full support for articulated hand tracking, for example on HoloLens 2.</span></span> <span data-ttu-id="12f28-243">明确的手动跟踪可用于在应用程序中实现直接操作和点提交输入的模型。</span><span class="sxs-lookup"><span data-stu-id="12f28-243">Articulated hand tracking can be used to implement direct manipulation and point-and-commit input models in your applications.</span></span> <span data-ttu-id="12f28-244">此外可以用于创建完全自定义的交互。</span><span class="sxs-lookup"><span data-stu-id="12f28-244">It can also be used to author fully custom interactions.</span></span>

### <a name="hand-skeleton"></a><span data-ttu-id="12f28-245">手框架</span><span class="sxs-lookup"><span data-stu-id="12f28-245">Hand skeleton</span></span>
<span data-ttu-id="12f28-246">明确的手动跟踪提供了一个 25 联合框架，使许多不同类型的交互。</span><span class="sxs-lookup"><span data-stu-id="12f28-246">Articulated hand tracking provides a 25 joint skeleton that enables many different types of interactions.</span></span>  <span data-ttu-id="12f28-247">框架提供的索引/中间/环/小手指 5 关节、 thumb，4 关节和 1 手腕联合。</span><span class="sxs-lookup"><span data-stu-id="12f28-247">The skeleton provides 5 joints for the index/middle/ring/little fingers, 4 joints for the thumb, and 1 wrist joint.</span></span>  <span data-ttu-id="12f28-248">手腕联合可作为层次结构的基础。</span><span class="sxs-lookup"><span data-stu-id="12f28-248">The wrist joint serves as the base of the hierarchy.</span></span> <span data-ttu-id="12f28-249">下图演示了框架的布局。</span><span class="sxs-lookup"><span data-stu-id="12f28-249">The following picture illustrates the layout of the skeleton.</span></span>

![手框架](images/hand-skeleton.png)

<span data-ttu-id="12f28-251">在大多数情况下，每个联合是名为基于它所代表的骨骼。</span><span class="sxs-lookup"><span data-stu-id="12f28-251">In most cases, each joint is named based on the bone that it represents.</span></span>  <span data-ttu-id="12f28-252">由于在每个联合没有两个基本，我们使用的命名子终日在该位置上基于每个联合的约定。</span><span class="sxs-lookup"><span data-stu-id="12f28-252">Since there are two bones at every joint, we use a convention of naming each joint based on the child bone at that location.</span></span>  <span data-ttu-id="12f28-253">子骨骼被定义为最荒谬不过手腕终日。</span><span class="sxs-lookup"><span data-stu-id="12f28-253">The child bone is defined as the bone further from the wrist.</span></span>  <span data-ttu-id="12f28-254">例如，"索引 Proximal"联合包含索引 proximal 骨骼的开始位置和该骨骼的方向。</span><span class="sxs-lookup"><span data-stu-id="12f28-254">For example, the "Index Proximal" joint contains the beginning position of the index proximal bone, and the orientation of that bone.</span></span>  <span data-ttu-id="12f28-255">它不包含终日的结束位置。</span><span class="sxs-lookup"><span data-stu-id="12f28-255">It does not contain the ending position of the bone.</span></span>  <span data-ttu-id="12f28-256">如果您需要的则会得到它与下一个联合中的层次结构，"索引中间"联合。</span><span class="sxs-lookup"><span data-stu-id="12f28-256">If you need that, you'd get it from the next joint in the hierarchy, the "Index Intermediate" joint.</span></span>

<span data-ttu-id="12f28-257">除了 25 分层连接符和系统提供的手掌接触联接。</span><span class="sxs-lookup"><span data-stu-id="12f28-257">In addition to the 25 hierarchical joints, the system provides a palm joint.</span></span>  <span data-ttu-id="12f28-258">Palm 通常不考虑了框架结构的一部分。</span><span class="sxs-lookup"><span data-stu-id="12f28-258">The palm is not typically considered part of the skeletal structure.</span></span>  <span data-ttu-id="12f28-259">它只能作为方便地获取手形图标的整体位置和方向提供。</span><span class="sxs-lookup"><span data-stu-id="12f28-259">It is provided only as a convenient way to get the hand's overall position and orientation.</span></span>

<span data-ttu-id="12f28-260">可以为每个联合提供以下信息：</span><span class="sxs-lookup"><span data-stu-id="12f28-260">The following information is provided for each joint:</span></span>

| <span data-ttu-id="12f28-261">名称</span><span class="sxs-lookup"><span data-stu-id="12f28-261">Name</span></span> | <span data-ttu-id="12f28-262">描述</span><span class="sxs-lookup"><span data-stu-id="12f28-262">Description</span></span> |
|--- |--- |
|<span data-ttu-id="12f28-263">位置</span><span class="sxs-lookup"><span data-stu-id="12f28-263">Position</span></span> | <span data-ttu-id="12f28-264">接合，任何请求的坐标系统中可用的三维位置。</span><span class="sxs-lookup"><span data-stu-id="12f28-264">3D position of the joint, available in any requested coordinate system.</span></span> |
|<span data-ttu-id="12f28-265">Orientation</span><span class="sxs-lookup"><span data-stu-id="12f28-265">Orientation</span></span> | <span data-ttu-id="12f28-266">三维方向的骨骼，可以在任何请求的坐标系统。</span><span class="sxs-lookup"><span data-stu-id="12f28-266">3D orientation of the bone, available in any requested coordinate system.</span></span> |
|<span data-ttu-id="12f28-267">半径</span><span class="sxs-lookup"><span data-stu-id="12f28-267">Radius</span></span> | <span data-ttu-id="12f28-268">到图面中的联合位置的外观的距离。</span><span class="sxs-lookup"><span data-stu-id="12f28-268">Distance to surface of the skin at the joint position.</span></span> <span data-ttu-id="12f28-269">这有助于优化直接交互或依赖于手指宽度的可视化效果。</span><span class="sxs-lookup"><span data-stu-id="12f28-269">Useful for tuning direct interactions or visualizations that rely on finger width.</span></span> |
|<span data-ttu-id="12f28-270">准确性</span><span class="sxs-lookup"><span data-stu-id="12f28-270">Accuracy</span></span> | <span data-ttu-id="12f28-271">有关此联合的信息系统大家都有多大把握上提供的提示。</span><span class="sxs-lookup"><span data-stu-id="12f28-271">Provides a hint on how confident the system feels about this joint's information.</span></span> |

<span data-ttu-id="12f28-272">你可以访问手主干数据通过函数的指针上[SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate)。</span><span class="sxs-lookup"><span data-stu-id="12f28-272">You can access the hand skeleton data through a function on the [SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate).</span></span>  <span data-ttu-id="12f28-273">调用的函数[TryGetHandPose](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.trygethandpose#Windows_UI_Input_Spatial_SpatialInteractionSourceState_TryGetHandPose)，并返回一个名为对象[HandPose](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handpose)。</span><span class="sxs-lookup"><span data-stu-id="12f28-273">The function is called [TryGetHandPose](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate.trygethandpose#Windows_UI_Input_Spatial_SpatialInteractionSourceState_TryGetHandPose), and it returns an object called [HandPose](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handpose).</span></span>  <span data-ttu-id="12f28-274">如果源不支持明确的手，此函数将返回 null。</span><span class="sxs-lookup"><span data-stu-id="12f28-274">If the source does not support articulated hands, then this function will return null.</span></span>  <span data-ttu-id="12f28-275">HandPose 后，你可以通过调用来获取当前联合数据[TryGetJoint](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handpose.trygetjoint#Windows_Perception_People_HandPose_TryGetJoint_Windows_Perception_Spatial_SpatialCoordinateSystem_Windows_Perception_People_HandJointKind_Windows_Perception_People_JointPose__)，联合的名称与你感兴趣。</span><span class="sxs-lookup"><span data-stu-id="12f28-275">Once you have a HandPose, you can get current joint data by calling [TryGetJoint](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handpose.trygetjoint#Windows_Perception_People_HandPose_TryGetJoint_Windows_Perception_Spatial_SpatialCoordinateSystem_Windows_Perception_People_HandJointKind_Windows_Perception_People_JointPose__), with the name of the joint you are interested in.</span></span>  <span data-ttu-id="12f28-276">作为返回的数据[JointPose](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.jointpose)结构。</span><span class="sxs-lookup"><span data-stu-id="12f28-276">The data is returned as a [JointPose](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.jointpose) structure.</span></span>  <span data-ttu-id="12f28-277">以下代码获取食指提示的位置。</span><span class="sxs-lookup"><span data-stu-id="12f28-277">The following code gets the position of the index finger tip.</span></span> <span data-ttu-id="12f28-278">在变量*currentState*表示的实例[SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate)。</span><span class="sxs-lookup"><span data-stu-id="12f28-278">The variable *currentState* represents an instance of [SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate).</span></span>

```cpp
using namespace winrt::Windows::Perception::People;
using namespace winrt::Windows::Foundation::Numerics;

auto handPose = currentState.TryGetHandPose();
if (handPose)
{
    JointPose joint;
    if (handPose.TryGetJoint(desiredCoordinateSystem, HandJointKind::IndexTip, joint))
    {
        float3 indexTipPosition = joint.Position;

        // Do something with the index tip position
    }
}
```

### <a name="hand-mesh"></a><span data-ttu-id="12f28-279">手网格</span><span class="sxs-lookup"><span data-stu-id="12f28-279">Hand mesh</span></span>

<span data-ttu-id="12f28-280">为了使完全 deformable 三角形手网格允许明确的手动跟踪 API。</span><span class="sxs-lookup"><span data-stu-id="12f28-280">The articulated hand tracking API allows for a fully deformable triangle hand mesh.</span></span>  <span data-ttu-id="12f28-281">此网格可以 deform 实时以及现有的主干中，并可用于可视化效果以及高级的物理技术。</span><span class="sxs-lookup"><span data-stu-id="12f28-281">This mesh can deform in real time along with the hand skeleton, and is useful for visualization as well as advanced physics techniques.</span></span>  <span data-ttu-id="12f28-282">若要访问现有网格，您需要首先创建[HandMeshObserver](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handmeshobserver)对象通过调用[TryCreateHandMeshObserverAsync](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource.trycreatehandmeshobserverasync)上[SpatialInteractionSource](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource)。</span><span class="sxs-lookup"><span data-stu-id="12f28-282">To access the hand mesh, you need to first create a [HandMeshObserver](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handmeshobserver) object by calling [TryCreateHandMeshObserverAsync](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource.trycreatehandmeshobserverasync) on the [SpatialInteractionSource](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsource).</span></span>  <span data-ttu-id="12f28-283">此操作仅需执行一次每个源，通常您看到的第一个时间。</span><span class="sxs-lookup"><span data-stu-id="12f28-283">This only needs to be done once per source, typically the first time you see it.</span></span>  <span data-ttu-id="12f28-284">这意味着将调用此函数可创建 HandMeshObserver 对象，无论何时手的形状进入 FOV。</span><span class="sxs-lookup"><span data-stu-id="12f28-284">That means you'll call this function to create a HandMeshObserver object whenever a hand enters the FOV.</span></span>  <span data-ttu-id="12f28-285">请注意，这是异步函数，因此您必须进行少量的此处并发处理。</span><span class="sxs-lookup"><span data-stu-id="12f28-285">Note that this is an async function, so you'll have to deal with a bit of concurrency here.</span></span>  <span data-ttu-id="12f28-286">一旦可用，则可以要求 HandMeshObserver 对象的三角形索引缓冲区通过调用[GetTriangleIndices](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handmeshobserver.gettriangleindices#Windows_Perception_People_HandMeshObserver_GetTriangleIndices_System_UInt16___)。</span><span class="sxs-lookup"><span data-stu-id="12f28-286">Once available, you can ask the HandMeshObserver object for the triangle index buffer by calling [GetTriangleIndices](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handmeshobserver.gettriangleindices#Windows_Perception_People_HandMeshObserver_GetTriangleIndices_System_UInt16___).</span></span>  <span data-ttu-id="12f28-287">索引不更改段帧，以便您可以一次获取上述信息和源的生存期内对其进行缓存。</span><span class="sxs-lookup"><span data-stu-id="12f28-287">Indices don't change frame over frame, so you can get those once and cache them for the lifetime of the source.</span></span>  <span data-ttu-id="12f28-288">顺时针缠绕顺序中提供了索引。</span><span class="sxs-lookup"><span data-stu-id="12f28-288">Indices are provided in clockwise winding order.</span></span>

<span data-ttu-id="12f28-289">下面的代码启动创建网格观察者分离 std::thread 并可用的网络观察程序后提取索引缓冲区。</span><span class="sxs-lookup"><span data-stu-id="12f28-289">The following code spins up a detached std::thread to create the mesh observer and extracts the index buffer once the mesh observer is available.</span></span>  <span data-ttu-id="12f28-290">它首先创建一个名为变量*currentState*，即实例[SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate)表示跟踪手的形状。</span><span class="sxs-lookup"><span data-stu-id="12f28-290">It starts from a variable called *currentState*, which is an instance of [SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate) representing a tracked hand.</span></span>

```cpp
using namespace Windows::Perception::People;

std::thread createObserverThread([this, currentState]()
{
    HandMeshObserver newHandMeshObserver = currentState.Source().TryCreateHandMeshObserverAsync().get();
    if (newHandMeshObserver)
    {
        unsigned indexCount = newHandMeshObserver.TriangleIndexCount();
        vector<unsigned short> indices(indexCount);
        newHandMeshObserver.GetTriangleIndices(indices);

        // Save the indices and handMeshObserver for later use - and use a mutex to synchronize access if needed!
     }
});
createObserverThread.detach();
```
<span data-ttu-id="12f28-291">正在启动的已分离的线程是一个选项来处理异步调用。</span><span class="sxs-lookup"><span data-stu-id="12f28-291">Starting a detached thread is just one option for handling async calls.</span></span>  <span data-ttu-id="12f28-292">或者，您可以使用新[co_await](https://docs.microsoft.com/en-us/windows/uwp/cpp-and-winrt-apis/concurrency)支持的功能C++/WinRT。</span><span class="sxs-lookup"><span data-stu-id="12f28-292">Alternatively, you could use the new [co_await](https://docs.microsoft.com/en-us/windows/uwp/cpp-and-winrt-apis/concurrency) functionality supported by C++/WinRT.</span></span>

<span data-ttu-id="12f28-293">HandMeshObserver 对象后，您应保存到其相应 SpatialInteractionSource 处于活动状态的持续时间。</span><span class="sxs-lookup"><span data-stu-id="12f28-293">Once you have a HandMeshObserver object, you should hold onto it for the duration that its corresponding SpatialInteractionSource is active.</span></span>  <span data-ttu-id="12f28-294">然后每个帧，则可以要求它通过调用表示手形图标的最新顶点缓冲区[GetVertexStateForPose](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handmeshobserver.getvertexstateforpose)并传入[HandPose](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handpose)实例，它表示所需的顶点姿势有关。</span><span class="sxs-lookup"><span data-stu-id="12f28-294">Then each frame, you can ask it for the latest vertex buffer that represents the hand by calling [GetVertexStateForPose](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handmeshobserver.getvertexstateforpose) and passing in a [HandPose](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handpose) instance that represents the pose that you want vertices for.</span></span>  <span data-ttu-id="12f28-295">每个顶点缓冲区中的具有位置和常规。</span><span class="sxs-lookup"><span data-stu-id="12f28-295">Each vertex in the buffer has a position and a normal.</span></span>  <span data-ttu-id="12f28-296">下面是如何获取当前的一组顶点的手网格的示例。</span><span class="sxs-lookup"><span data-stu-id="12f28-296">Here's an example of how to get the current set of vertices for a hand mesh.</span></span>  <span data-ttu-id="12f28-297">像以前那样*currentState*变量所表示的实例[SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate)。</span><span class="sxs-lookup"><span data-stu-id="12f28-297">Just as before, the *currentState* variable represents an instance of [SpatialInteractionSourceState](https://docs.microsoft.com/en-us/uwp/api/windows.ui.input.spatial.spatialinteractionsourcestate).</span></span>

```cpp
using namespace winrt::Windows::Perception::People;

auto handPose = currentState.TryGetHandPose();
if (handPose)
{
    std::vector<HandMeshVertex> vertices(handMeshObserver.VertexCount());
    auto vertexState = handMeshObserver.GetVertexStateForPose(handPose);
    vertexState.GetVertices(vertices);

    auto meshTransform = vertexState.CoordinateSystem().TryGetTransformTo(desiredCoordinateSystem);
    if (meshTransform != nullptr)
    {
        // Do something with the vertices and mesh transform, along with the indices that you saved earlier
    }
}
```

<span data-ttu-id="12f28-298">与主干关节手网格 API 不允许您指定用于顶点的坐标系统。</span><span class="sxs-lookup"><span data-stu-id="12f28-298">In contrast to skeleton joints, the hand mesh API does not allow you to specify a coordinate system for the vertices.</span></span>  <span data-ttu-id="12f28-299">相反， [HandMeshVertexState](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handmeshvertexstate)指定中提供了顶点的坐标系统。</span><span class="sxs-lookup"><span data-stu-id="12f28-299">Instead, the [HandMeshVertexState](https://docs.microsoft.com/en-us/uwp/api/windows.perception.people.handmeshvertexstate) specifies the coordinate system that the vertices are provided in.</span></span>  <span data-ttu-id="12f28-300">然后可以通过调用获取网格转换[TryGetTransformTo](https://docs.microsoft.com/en-us/uwp/api/windows.perception.spatial.spatialcoordinatesystem.trygettransformto#Windows_Perception_Spatial_SpatialCoordinateSystem_TryGetTransformTo_Windows_Perception_Spatial_SpatialCoordinateSystem_)并指定所需的坐标系统。</span><span class="sxs-lookup"><span data-stu-id="12f28-300">You can then get a mesh transform by calling [TryGetTransformTo](https://docs.microsoft.com/en-us/uwp/api/windows.perception.spatial.spatialcoordinatesystem.trygettransformto#Windows_Perception_Spatial_SpatialCoordinateSystem_TryGetTransformTo_Windows_Perception_Spatial_SpatialCoordinateSystem_) and specifying your desired coordinate system.</span></span>  <span data-ttu-id="12f28-301">你将需要使用此网格转换，每当使用顶点。</span><span class="sxs-lookup"><span data-stu-id="12f28-301">You'll need to use this mesh transform whenever you work with the vertices.</span></span>  <span data-ttu-id="12f28-302">此方法降低了 CPU 开销，尤其是如果您仅使用用于呈现网格。</span><span class="sxs-lookup"><span data-stu-id="12f28-302">This approach reduces CPU overhead, especially if you are only using the mesh for rendering purposes.</span></span>

## <a name="gaze-and-commit-composite-gestures"></a><span data-ttu-id="12f28-303">注视并提交复合手势</span><span class="sxs-lookup"><span data-stu-id="12f28-303">Gaze and Commit composite gestures</span></span>
<span data-ttu-id="12f28-304">特别是在 HoloLens 上使用的视线移动提交输入的模型中，为应用程序 （第一代） 空间输入 API 提供了一个可选[SpatialGestureRecognizer](https://msdn.microsoft.com/library/windows/apps/windows.ui.input.spatial.spatialgesturerecognizer.aspx) ，可以用于启用基础上构建的复合手势选择事件。</span><span class="sxs-lookup"><span data-stu-id="12f28-304">For applications using the gaze-and-commit input model, particularly on HoloLens (first gen), the Spatial Input API provides an optional [SpatialGestureRecognizer](https://msdn.microsoft.com/library/windows/apps/windows.ui.input.spatial.spatialgesturerecognizer.aspx) that can be used to to enable composite gestures built on top of the 'select' event.</span></span>  <span data-ttu-id="12f28-305">通过从 SpatialInteractionManager 到一张全息图 SpatialGestureRecognizer 路由交互，应用可以检测到点击、 按住、 操作和导航事件统一跨手、 语音和空间的输入的设备，而无需处理，按下按钮并手动释放。</span><span class="sxs-lookup"><span data-stu-id="12f28-305">By routing interactions from the SpatialInteractionManager to a hologram's SpatialGestureRecognizer, apps can detect Tap, Hold, Manipulation, and Navigation events uniformly across hands, voice, and spatial input devices, without having to handle presses and releases manually.</span></span>

<span data-ttu-id="12f28-306">SpatialGestureRecognizer 执行仅之间的一套手势你请求的最小消除歧义。</span><span class="sxs-lookup"><span data-stu-id="12f28-306">SpatialGestureRecognizer performs only the minimal disambiguation between the set of gestures that you request.</span></span> <span data-ttu-id="12f28-307">例如，如果请求只需点击，用户可能会按他们的手指下，只要他们喜欢和点击仍会发生。</span><span class="sxs-lookup"><span data-stu-id="12f28-307">For example, if you request just Tap, the user may hold their finger down as long as they like and a Tap will still occur.</span></span> <span data-ttu-id="12f28-308">如果请求同时点击并按住后约一秒钟的按下他们的手指，手势将升级到某个保留，都不会出现一个分流点。</span><span class="sxs-lookup"><span data-stu-id="12f28-308">If you request both Tap and Hold, after about a second of holding down their finger, the gesture will promote to a Hold and a Tap will no longer occur.</span></span>

<span data-ttu-id="12f28-309">若要使用 SpatialGestureRecognizer，处理 SpatialInteractionManager [InteractionDetected](https://msdn.microsoft.com/library/windows/apps/xaml/Windows.UI.Input.Spatial.SpatialInteractionManager.InteractionDetected)事件和随取即行 SpatialPointerPose 那里公开。</span><span class="sxs-lookup"><span data-stu-id="12f28-309">To use SpatialGestureRecognizer, handle the SpatialInteractionManager's [InteractionDetected](https://msdn.microsoft.com/library/windows/apps/xaml/Windows.UI.Input.Spatial.SpatialInteractionManager.InteractionDetected) event and grab the SpatialPointerPose exposed there.</span></span> <span data-ttu-id="12f28-310">使用此姿势从用户的头的视线移动 ray 与全息相交并在用户的环境中网格以确定用户打算与之交互的图面。</span><span class="sxs-lookup"><span data-stu-id="12f28-310">Use the user's head gaze ray from this pose to intersect with the holograms and surface meshes in the user's surroundings, in order to determine what the user is intending to interact with.</span></span> <span data-ttu-id="12f28-311">然后，将 SpatialInteraction 路由到目标 hologram SpatialGestureRecognizer 事件参数中使用其[CaptureInteraction](http://msdn.microsoft.com/library/windows/apps/xaml/Windows.UI.Input.Spatial.SpatialGestureRecognizer.CaptureInteraction)方法。</span><span class="sxs-lookup"><span data-stu-id="12f28-311">Then, route the SpatialInteraction in the event arguments to the target hologram's SpatialGestureRecognizer, using its [CaptureInteraction](http://msdn.microsoft.com/library/windows/apps/xaml/Windows.UI.Input.Spatial.SpatialGestureRecognizer.CaptureInteraction) method.</span></span> <span data-ttu-id="12f28-312">这将启动解释根据该交互[SpatialGestureSettings](https://msdn.microsoft.com/library/windows/apps/xaml/Windows.UI.Input.Spatial.SpatialGestureSettings)上的识别器设置，可以在创建时的或通过[TrySetGestureSettings](http://msdn.microsoft.com/library/windows/apps/xaml/Windows.UI.Input.Spatial.SpatialGestureRecognizer.TrySetGestureSettings)。</span><span class="sxs-lookup"><span data-stu-id="12f28-312">This starts interpreting that interaction according to the [SpatialGestureSettings](https://msdn.microsoft.com/library/windows/apps/xaml/Windows.UI.Input.Spatial.SpatialGestureSettings) set on that recognizer at creation time - or by [TrySetGestureSettings](http://msdn.microsoft.com/library/windows/apps/xaml/Windows.UI.Input.Spatial.SpatialGestureRecognizer.TrySetGestureSettings).</span></span>

<span data-ttu-id="12f28-313">HoloLens 上 (首先 gen)，其目标从用户的头的视线移动，而不是非试着来呈现或直接在现有的位置进行交互的交互和手势通常应派生。</span><span class="sxs-lookup"><span data-stu-id="12f28-313">On HoloLens (first gen), interactions and gestures should generally derive their targeting from the user's head gaze, rather than trying to render or interact at the hand's location directly.</span></span> <span data-ttu-id="12f28-314">一旦启动交互，相对动作的手可能用于控制手势，如同操作或导航笔势。</span><span class="sxs-lookup"><span data-stu-id="12f28-314">Once an interaction has started, relative motions of the hand may be used to control the gesture, as with the Manipulation or Navigation gesture.</span></span>

## <a name="see-also"></a><span data-ttu-id="12f28-315">请参阅</span><span class="sxs-lookup"><span data-stu-id="12f28-315">See also</span></span>
* [<span data-ttu-id="12f28-316">在 DirectX 中的头节点和关注视线移动</span><span class="sxs-lookup"><span data-stu-id="12f28-316">Head and eye gaze in DirectX</span></span>](gaze-in-directx.md)
* [<span data-ttu-id="12f28-317">直接操作输入的模型</span><span class="sxs-lookup"><span data-stu-id="12f28-317">Direct manipulation input model</span></span>](direct-manipulation.md)
* [<span data-ttu-id="12f28-318">点提交输入的模型</span><span class="sxs-lookup"><span data-stu-id="12f28-318">Point-and-commit input model</span></span>](point-and-commit.md)
* [<span data-ttu-id="12f28-319">视线移动和提交的输入的模型</span><span class="sxs-lookup"><span data-stu-id="12f28-319">Gaze and commit input model</span></span>](gaze-and-commit.md)
* [<span data-ttu-id="12f28-320">运动控制器</span><span class="sxs-lookup"><span data-stu-id="12f28-320">Motion controllers</span></span>](motion-controllers.md)
