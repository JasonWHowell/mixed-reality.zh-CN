---
title: 坐标系统
description: 用于生成关注空间坐标系统，现有、 聊天室规模和世界级混合现实体验。
author: thetuvix
ms.author: alexturn
ms.date: 02/24/2019
ms.topic: article
keywords: 坐标系统、 空间坐标系统、 只方向、 固定缩放、 现有的规模，房间的小数位数，全球规模，360 度就位，现有、 房间、 世界、 规模、 位置、 方向、 固定、 附加阶段，定位点、 空间定位点，世界锁定、 世界锁定、 正文锁定、 正文锁定、 边界、 持久性、 共享、 跟踪丢失，云空间定位点
ms.openlocfilehash: f4b945a3ffb83b9ac0a94e0d793a19939aece3bb
ms.sourcegitcommit: 17f86fed532d7a4e91bd95baca05930c4a5c68c5
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/11/2019
ms.locfileid: "66829859"
---
# <a name="coordinate-systems"></a>坐标系统

它们的核心是，在混合现实应用位置[全息](hologram.md)在您的世界，通过查看听起来好像真实的对象。 这涉及到精确定位和定向这些全息世界上无论世界是其物理房间或已创建一个虚拟领域是对用户来说，有意义的地方。 如有关位置和你全息或任何其他几何形状的方向的推理[注视](gaze.md)ray 或[传递位置](gestures.md)，Windows 提供了各种现实世界坐标系统中的可以表示几何图形，称为**空间坐标系统**。

<br>

>[!VIDEO https://www.youtube.com/embed/TneGSeqVAXQ]

## <a name="device-support"></a>设备支持

<table>
    <colgroup>
    <col width="40%" />
    <col width="20%" />
    <col width="20%" />
    <col width="20%" />
    </colgroup>
    <tr>
        <td><strong>功能</strong></td>
        <td><a href="hololens-hardware-details.md"><strong>HoloLens （第 1 代）</strong></a></td>
        <td><strong>HoloLens 2</strong></td>
        <td><a href="immersive-headset-hardware-details.md"><strong>沉浸式耳机</strong></a></td>
    </tr>
     <tr>
        <td><a href="coordinate-systems.md#stationary-frame-of-reference">固定参考框架</a></td>
        <td>✔️</td>
        <td>✔️</td>
        <td>✔️</td>
    </tr>
    <tr>
        <td><a href="coordinate-systems.md#attached-frame-of-reference">附加的参考框架</a></td>
        <td>✔️</td>
        <td>✔️</td>
        <td>✔️</td>
    </tr>
    <tr>
        <td><a href="coordinate-systems.md#stage-frame-of-reference">阶段参考框架</a></td>
        <td>尚不支持</td>
        <td>尚不支持</td>
        <td>✔️</td>
    </tr>
    <tr>
        <td><a href="coordinate-systems.md#spatial-anchors">空间定位点</a></td>
        <td>✔️</td>
        <td>✔️</td>
        <td>✔️</td>
    </tr>
    <tr>
        <td><a href="spatial-mapping.md">空间映射</a></td>
        <td>✔️</td>
        <td>✔️</td>
        <td>❌</td>
    </tr>
</table>

## <a name="mixed-reality-experience-scales"></a>混合的现实体验刻度

混合的现实应用程序可以设计为广泛的用户体验，从只需耳机的方向，完整的全球规模的应用和游戏，需要空间映射和空间的定位点的 360 度视频查看器：
<br>

| 体验规模 | 要求 | 示例体验 | 
|----------|----------|----------|
|  **仅限方向** |  **耳机方向**（重力对齐） |  360 ° 视频查看器 | 
|  **Seated-scale** |  上面 plus**耳机位置**相对于零位置 |  赛车游戏或空间模拟器 | 
|  **现有规模** |  上面 plus**暂存 floor 源** |  其中鸭子类型并避开就地动作游戏  | 
|  **Room-scale** |  上面 plus**阶段边界多边形** |  拼图游戏其中奔波填数游戏 | 
|  **全球规模** |  **空间的定位点**(和通常[空间映射](spatial-mapping.md)) |  与敌人来自实际的墙壁，如游戏[RoboRaid](https://www.microsoft.com/p/roboraid/9nblggh5fv3j) | 

这些体验刻度遵循"嵌套洋娃娃"模型。 有关 Windows Mixed Reality 此处的关键设计原则是给定的耳机支持目标体验规模，以及所有较小的刻度生成的应用：
<br>

| 6DOF 跟踪 | Floor 定义 | 跟踪的 360 ° | 定义的边界 | 空间的定位点 | 最大体验 | 
|----------|----------|----------|----------|----------|----------|
|  否 |  - |  - |  - |  - |  **仅限方向** | 
|  **是** |  否 |  - |  - |  - |  **就位** | 
|  **是** |  **是** |  否 |  - |  - |  **状态-转发** | 
|  **是** |  **是** |  **是** |  否 |  - |  **现有的 360 °** | 
|  **是** |  **是** |  **是** |  **是** |  否 |  **Room** | 
|  **是** |  **是** |  **是** |  **是** |  **是** |  **世界** | 

请注意，阶段参考的尚不支持在 HoloLens 上。 HoloLens 上的聊天室规模应用目前需要使用[空间映射](spatial-mapping.md)查找用户的基底和墙纸。

## <a name="spatial-coordinate-systems"></a>空间坐标系统

所有的 3D 图形应用程序使用[笛卡尔坐标系统](https://docs.microsoft.com/windows/uwp/graphics-concepts/coordinate-systems)推断的位置和方向的呈现虚拟世界中的对象。 此类坐标系统建立沿其执行定位对象的 3 个垂直轴： X、 Y 和 Z 轴。

在中[混合现实](mixed-reality.md)，您的应用程序将推断虚拟和物理坐标系统。 Windows 调用现实生活中有实际意义的坐标系**空间坐标系统**。

坐标系统的空间来表示它们以米为单位的坐标值。 这意味着对象放置 2 个单位相隔在任一 X，Y 或 Z 轴将显示除另一个混合现实中呈现时 2 米。 这样可以轻松地呈现对象和实际规模的环境。

一般情况下，惯用右手或惯用左手，可以是笛卡尔坐标系统。 在 Windows 上的空间坐标系统都右手，这意味着正 x 轴向右、 向上指正 y 轴 （对齐到重力） 和正 z 轴指向面向使用者。

在这两种类型的坐标系统，正 x 轴指向右方和正 y 轴向上箭头。 不同之处在于，正 z 轴指向针对或远离你。 左侧或右侧中的正 X 方向和正 Y 方向运行它们，可以记住正 z 轴指向由指责的方向。 您的拇指指向接近尾声或远离你，方向是正 z 轴指向该坐标系统的方向。

## <a name="building-an-orientation-only-or-seated-scale-experience"></a>构建仅限方向的或固定刻度体验

全息版的关键[呈现](rendering.md)更改其全息视图应用程序的每个帧用户在将移动，以匹配其预测磁头的运动。 您可以构建**固定缩放体验**方面，对用户的头位置和使用头方向更改**固定参考框架**。

始终从用户的距离和一些内容必须忽略头位置更新，保持固定在所选的标题。 主要示例是全方位的视频： 因为视频捕获从单个固定角度来看，它将未免视图的位置相对于内容，移动的视觉效果，即使用户查找必须更改视图方向。 您可以构建此类**仅限方向的体验**使用**附加参考框架**。

### <a name="stationary-frame-of-reference"></a>固定参考框架

提供要保留的附近用户对象的位置尽可能相对世界里，同时尊重用户的头位置中的更改中的固定参考框架工作原理的坐标系统。

固定缩放体验如时会在游戏引擎[Unity](https://unity3d.com/)，固定参考框架是什么定义引擎的"world 源。" 放置在特定世界坐标的对象使用固定参考框架来定义二者中实际使用这些相同的坐标的位置。 保持将放在世界中，即使在用户走，内容被称为**世界锁定**内容。

通常，应用将在启动时创建一个固定参考框架，并使用在应用程序的整个生存期内其坐标系统。 作为应用开发人员在 Unity 中，您可以立即开始将放置内容相对于源，将需要在用户的初始头位置和方向。 如果用户将移动到新位置，并且想要继续其固定缩放体验，则可以自动在该位置的世界原点。

随着时间推移，如系统更了解用户的环境中，它可能会确定，现实世界中不同点之间的距离更短或更长时间比以前所认为的系统。 如果呈现全息固定参考框架为 HoloLens 用户游离到大约 5 米宽区域之外的位置上的应用程序中，您的应用程序可能会观察到的这些全息观察到的位置中的偏差。 如果您的体验已超出 5 米 wandering 的用户，在构建[世界级体验](#building-a-world-scale-experience)，这将需要其他技术来保留全息稳定，如下所述。

### <a name="attached-frame-of-reference"></a>附加的参考框架

它们奔波，固定标题时应用首次创建框架定义会随用户移动附加的参考框架。 这使用户可以轻松查看内容放在参考框架。 这种相对于用户的方式呈现内容称为**正文锁定**内容。

时耳机不能找出其中位于世界，附加的参考框架提供了仅用于呈现全息坐标系统。 这样，就适合用来显示回退的 UI 来告诉他们的设备找不到它们在世界中的用户。 是固定缩放或更高版本的应用程序应包括仅限方向的回退，以帮助用户开始再次使用 UI 中所示类似[混合现实家庭](navigating-the-windows-mixed-reality-home.md)。

## <a name="building-a-standing-scale-or-room-scale-experience"></a>构建现有规模或聊天室缩放体验

在沉浸式头戴式上超越固定缩放并生成**现有规模体验**，可以使用**阶段参考框架**。

提供**聊天室缩放体验**，从而在这些预定义的 5 米范围内用户奔波，您可以检查**暂存边界**也。

### <a name="stage-frame-of-reference"></a>阶段参考框架

当第一次设置沉浸式头戴式耳机，用户定义**阶段**，它表示将遇到的房间混合现实。 按最小方式定义阶段**暂存源**，floor 位置和向前方向他们想要使用的设备，以用户为中心空间坐标系统的选择。 通过将内容放在 Y = 0 floor 平面此阶段坐标系统中，您可以确保你全息轻松在地板上时显示用户都可以顺利，为用户提供**现有规模体验**。

### <a name="stage-bounds"></a>阶段边界

用户可以选择性地定义**暂存边界**，他们想要在中移动它们已清除的家具房间内的某个区域混合现实。 如果应用程序因此，可以生成**聊天室规模体验**，使用这些界限以确保全息始终放在其中用户可以访问它们。

阶段参考框架提供了一个固定在其中放置 floor 相对的内容的坐标系统，因为它是移植现有规模和针对虚拟现实耳机开发的聊天室规模应用程序的最简单路径。 但是，与这些 VR 平台，单个坐标系统仅稳定中有关 5 米 （16 英尺） 直径的内容，如之前杆 arm 效果导致还远远没有因为系统将调整明显移动中心的内容。 若要转超出 5 米，所需空间的定位点。

## <a name="building-a-world-scale-experience"></a>构建全球规模体验

HoloLens 允许为 true**世界级体验**，允许用户浏览超出 5 米。 若要生成的世界级应用程序，将需要超出所使用的空间缩放体验的新技术。

### <a name="why-a-single-rigid-coordinate-system-cannot-be-used-beyond-5-meters"></a>为什么单一刚性坐标系不能使用超过 5 米

现在，在编写游戏、 应用程序数据的可视化效果或虚拟现实应用时，典型的方法是建立一个绝对世界坐标系统的所有其他坐标可以可靠地映射回。 在该环境中，始终可以找到一个稳定的转换，该定义在那个世界里任何两个对象之间的关系。 如果没有移动这些对象，其相对转换将始终会保持不变。 此类型的全局坐标系统中适用于呈现知道所有几何图形提前一个完全是虚拟世界。 聊天室规模 VR 应用现在通常建立这种绝对聊天室规模与原点的地板上的坐标系统。

与此相反，如 HoloLens 的无约束的混合的现实设备有动态传感器驱动了解世界中，他们向许多指标介绍跨整个楼层，不断地随时间的用户的环境调整其知识。 全球规模的经验，如果在单个刚性坐标系统中，放置所有全息这些全息将一定偏移随着时间推移，相对于世界上或相互。

例如，耳机可能当前认为世界上为 4 个指标，每隔两个位置，然后更高版本完善的了解，学习位置实际上相隔 3.9 计量。 如果这些全息具有最初了 4 个计量相隔单一的刚性坐标系统中，其中一个将始终显示偏离在现实生活中的 0.1 米。

### <a name="spatial-anchors"></a>空间的定位点

Windows Mixed Reality 解决了通过让你创建在上一部分中所述的问题[空间的定位点](spatial-anchors.md)标记在用户发出全息世界中的重要点。 空间的定位点表示世界上，系统应保持跟踪随着时间的推移很重要的一点。

因为设备了解了有关世界信息，这些空间的定位点可以根据需要确保每个定位点始终准确地说它是相对于放置位置实际的调整相对于其他位置。 通过将空间的定位点放置在用户放置一张全息图的位置的位置，然后定位该 hologram 相对于其空间的定位点，可以确保全息图维护最佳稳定性，即使在用户漫游跨数十个指标。

相对于其他空间定位点的此持续调整是 coordinate systems 从空间的定位点和固定的参考框架的主要区别：

* 放置在固定参考框架所有全息保留刚性关系中的两台。 但是，如用户走远距离，该帧的坐标系统可能会偏移相对于世界上，可以确保全息的用户旁边出现稳定。

* 全息放入阶段参考框架还保留刚性关系中的两台。 与静态帧，不同阶段帧一直保持固定在相对于其定义的物理源位置。 但是，在超出其 5 米边界的阶段的坐标系统中呈现的内容将仅显示稳定而用户都可以在该范围内顺利。

* 使用其中一个空间定位点可能偏移相对于全息放置全息放置另一个空间定位点。 这样，Windows 以提高其对每个空间的定位点的位置的理解，即使，例如，一个定位点需要调整自身保留或另一个定位点需要向右调整。

与固定参考框架，它始终可以优化的用户附近的稳定性，不同阶段参考框架和空间的定位点可确保稳定性接近它们的源。 这可帮助准确地说就地保留随着时间推移，这些全息，但它还意味着全息呈现太远而从其坐标系的原点，将会越来越严重级别 arm 效果。 这是因为放大的位置和方向的阶段或定位点所做的小调整成正比距离该定位点。 

好的经验法则是原点的确保任何呈现基于远处空间定位点的坐标系统内约 3 米。 表示附近阶段原点呈现远处内容是确定，因为任何增加的位置错误将会影响将不迁移用户的视图中的很多的只有比较小全息。

### <a name="spatial-anchor-persistence"></a>空间定位点暂留

空间的定位点还可以允许您的应用程序，即使您的应用程序挂起或关闭设备记住的重要位置。

您可以保存到磁盘的空间的定位点，您的应用程序创建，，然后将它们返回再次更高版本，通过保存到您的应用程序**空间的定位点存储**。 当保存或加载一个定位点，您提供字符串键，以便确定定位点更高版本对您的应用程序有意义的。 将此项视为你定位点的文件名。 如果你想要将其他数据与该定位点相关联，如用户在该位置放置一个三维模型，保存，到应用程序的本地存储并将其与所选的键相关联。

通过保留定位到存储区中，你的用户可以将置于单个全息或放置他们预期的位置，通过您的应用程序的许多用途的工作区围绕其应用程序将放置其各种全息，然后找到这些全息更高版本。

此外可以使用<a href="https://docs.microsoft.com/azure/spatial-anchors/overview" target="_blank">Azure 空间的定位点</a>异步全息图暂留在 HoloLens、 iOS 和 Android 设备。  通过共享持久的云空间定位点，多个设备可以观察到相同的持久化全息图随着时间推移，即使这些设备不存在同时在一起。

### <a name="spatial-anchor-sharing"></a>共享空间定位点

您的应用程序还可以共享实时空间定位点与其他设备，从而使实时共享体验。

通过使用<a href="https://docs.microsoft.com/azure/spatial-anchors/overview" target="_blank">Azure 空间的定位点</a>，您的应用程序可以在多个 HoloLens、 iOS 和 Android 设备之间共享空间定位点。 通过让每个设备呈现一张全息图，使用相同的空间定位点，所有用户将都看到出现在现实生活中的同一位置的全息图。

## <a name="avoid-head-locked-content"></a>避免锁定头的内容

我们强烈建议不要呈现头锁定的内容，它会停留在显示器 （如 HUD) 中的某个固定位置。 一般情况下，头锁定内容不舒服的用户，不会不让人感觉他们生活的世界一个自然组成部分。

Head 锁定内容通常应替换全息附加到用户或放置在世界本身。 例如，[游标](cursors.md)应通常推送到了世界上缩放自然地以反映的位置和用户的视线移动下对象的距离。

## <a name="handling-tracking-errors"></a>处理跟踪错误

在某些环境，如深色走廊，它不可能的耳机使用全面透彻解析-跟踪世界中正确找到本身。 这可能会导致全息不出现或出现在正确位置，如果处理不正确。 我们现在讨论的条件，在其中可以这样做，它对用户体验的影响，并提示以便最好地处理这种情况。

### <a name="headset-cannot-track-due-to-insufficient-sensor-data"></a>耳机无法跟踪由于没有足够的传感器数据

有时，不能找出其中耳机是耳机的传感器。 如果这个房间是暗、 或传感器涵盖的十字线或手，或者周围环境不具有足够的纹理，则可以出现此问题。

在此情况下，将耳机将不能以足够的准确度来呈现世界锁定全息跟踪其位置。 你将无法找出其中的空间的定位点，保持静止帧或阶段框架是相对于该设备，但您仍可以呈现正文锁定内容中附加的参考框架。

您的应用程序应该告诉用户如何获取位置，跟踪呈现一些介绍一些提示，例如踩传感器和开启详细的灯的回退锁定正文的内容。

### <a name="headset-tracks-incorrectly-due-to-dynamic-changes-in-the-environment"></a>不正确，因为在环境中的动态更改的耳机跟踪

有时，设备不能进行正确的跟踪是否存在很多在环境中，例如房间内移动办公了很多人动态更改。 在这种情况下，全息可能看起来，以跳转或偏差当设备试图在此动态环境中跟踪本身。 我们建议在不到动态环境中使用该设备，如果遇到这种情况。

### <a name="headset-tracks-incorrectly-because-the-environment-has-changed-significantly-over-time"></a>耳机错误地跟踪由于随着时间的推移发生了显著变化的环境

有时，这已经发生了大量的更改的环境中使用耳机启动 (例如重要移动家具，墙 hangings 等)，很可能某些全息，可能会从其原始位置显示偏移。 在这一新领域中用户在将移动早期全息可能还能跳转周围。 这是空间的因为系统的了解你不再有效，并且它会尝试将环境重新映射尝试协调聊天室的功能时。 在此方案中，因此建议将鼓励用户重新放置的全息它们固定在世界中如果它们不出现在预期位置。

### <a name="headset-tracks-incorrectly-due-to-identical-spaces-in-an-environment"></a>不正确，因为在环境中的相同空间头戴式跟踪

有时，家庭网络或其他空间可能具有两个完全相同的面积。 例如，两个相同会议室，两个相同角区域，涵盖的设备的视野的两个大型相同海报。 在这种情况下，设备可能，有时，相同的各部分之间会感到困惑，并将其标记为在其内部表示形式相同。 这可能导致全息从某些区域以在其他位置出现。 启动该设备可能会丢失跟踪通常由于环境其内部表示形式已损坏。 在这种情况下，因此建议将重置系统的环境的了解。 请注意，重置地图潜在客户的所有空间定位点放置丢失。 这将导致耳机以跟踪环境的唯一领域中很好。 但是，如果设备即用会混淆之间完全相同的面积，重新可能出现问题。

## <a name="see-also"></a>请参阅
* [空间坐标系统和全息呈现的 GDC 2017 演示](https://channel9.msdn.com/events/GDC/GDC-2017/GDC2017-008)
* [Unity 中的坐标系统](coordinate-systems-in-unity.md)
* [DirectX 中的坐标系统](coordinate-systems-in-directx.md)
* [空间定位点](spatial-anchors.md)
* [混合现实中的共享体验](shared-experiences-in-mixed-reality.md)
* <a href="https://docs.microsoft.com/azure/spatial-anchors" target="_blank">Azure 空间定位点</a>
* [案例研究-通查在现实中的漏洞](case-study-looking-through-holes-in-your-reality.md)
