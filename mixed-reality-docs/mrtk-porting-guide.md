---
title: 让应用准备好使用 HoloLens 2
description: 本文面向在 HoloLens（第 1 代）和/或早期 MRTK 上已有现有的应用，并寻求移植到 MRTK 版本 2 和 HoloLens 2 的开发人员。
author: grbury
ms.author: grbury
ms.date: 04/12/19
ms.topic: article
ms.localizationpriority: high
keywords: Windows Mixed Reality, 测试, MRTK, MRTK 版本 2, HoloLens 2
ms.openlocfilehash: 02dabd21b7a6add2ce53fe291a447e49057184d0
ms.sourcegitcommit: f20beea6a539d04e1d1fc98116f7601137eebebe
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/05/2019
ms.locfileid: "66270395"
---
# <a name="getting-your-existing-app-ready-for-hololens-2"></a><span data-ttu-id="166cc-104">让现有应用准备好使用 HoloLens 2</span><span class="sxs-lookup"><span data-stu-id="166cc-104">Getting your existing app ready for HoloLens 2</span></span>

<span data-ttu-id="166cc-105">本指南专门帮助开发人员移植其 HoloLens（第 1 代）中的现有 Unity 应用，使其可在 HoloLens 2 设备上运行。</span><span class="sxs-lookup"><span data-stu-id="166cc-105">This guide is specifically tailored to help developers who have an existing Unity app for HoloLens (1st gen) to port their application for the new HoloLens 2 device.</span></span> <span data-ttu-id="166cc-106">将 HoloLens（第 1 代）Unity 应用移植到 HoloLens 2 需要完成四个关键步骤。</span><span class="sxs-lookup"><span data-stu-id="166cc-106">There are four key steps to porting a HoloLens (1st gen) Unity app to HoloLens 2.</span></span> <span data-ttu-id="166cc-107">以下部分将提供每个阶段的详细信息。</span><span class="sxs-lookup"><span data-stu-id="166cc-107">The sections below will detail information for each stage.</span></span> 

| <span data-ttu-id="166cc-108">步骤 1</span><span class="sxs-lookup"><span data-stu-id="166cc-108">Step 1</span></span> | <span data-ttu-id="166cc-109">步骤 2</span><span class="sxs-lookup"><span data-stu-id="166cc-109">Step 2</span></span> | <span data-ttu-id="166cc-110">步骤 3</span><span class="sxs-lookup"><span data-stu-id="166cc-110">Step 3</span></span> | <span data-ttu-id="166cc-111">步骤 4</span><span class="sxs-lookup"><span data-stu-id="166cc-111">Step 4</span></span> |
|----------|-------------------|-------------------|-------------------|
| ![Visual Studio 徽标](images/visualstudio_logo.png) | ![Unity 徽标](images/unity_logo.png)| ![Unity 图标](images/hololens2_icon.jpg) | ![MRTK 徽标](images/MRTKIcon.jpg) |
| <span data-ttu-id="166cc-116">下载最新的工具</span><span class="sxs-lookup"><span data-stu-id="166cc-116">Download latest tools</span></span> | <span data-ttu-id="166cc-117">更新 Unity 项目</span><span class="sxs-lookup"><span data-stu-id="166cc-117">Update Unity Project</span></span> | <span data-ttu-id="166cc-118">ARM 编译</span><span class="sxs-lookup"><span data-stu-id="166cc-118">Compile for ARM</span></span> | <span data-ttu-id="166cc-119">迁移到 MRTK v2</span><span class="sxs-lookup"><span data-stu-id="166cc-119">Migrate to MRTK v2</span></span>

<span data-ttu-id="166cc-120">在开始迁移过程之前，**强烈建议**开发人员利用源代码管理保存其原始应用状态的快照。</span><span class="sxs-lookup"><span data-stu-id="166cc-120">It is **highly recommended** that, before beginning the porting process, developers utilize source control to save a snapshot of the original state of their app.</span></span> <span data-ttu-id="166cc-121">此外，建议在移植过程中，保存不同时间点的检查点状态。 </span><span class="sxs-lookup"><span data-stu-id="166cc-121">Additionally, it is recommended to *save* checkpoint states at various points during the process.</span></span> <span data-ttu-id="166cc-122">保留原始应用的另一个 Unity 实例也可能很有帮助，这样可以在移植过程中进行并列的比较。</span><span class="sxs-lookup"><span data-stu-id="166cc-122">It can also be very helpful to have another Unity instance of the original app to allow for side-by-side comparison during the port process.</span></span> 

> [!NOTE]
> <span data-ttu-id="166cc-123">在移植之前，请确保已安装用于 Windows Mixed Reality 开发的最新工具。</span><span class="sxs-lookup"><span data-stu-id="166cc-123">Before porting, ensure you have the latest tools installed for Windows Mixed Reality development.</span></span> <span data-ttu-id="166cc-124">对于大多数现有 HoloLens 开发人员而言，这主要涉及到更新到最新的 Visual Studio 2017 并安装相应的 Windows SDK。</span><span class="sxs-lookup"><span data-stu-id="166cc-124">For most existing HoloLens developers, this will primarily involve updating to the latest Visual Studio 2017 and installing the appropriate Windows SDK.</span></span> <span data-ttu-id="166cc-125">以下内容会深入到不同的 Unity 版本和混合现实工具包版本 2。</span><span class="sxs-lookup"><span data-stu-id="166cc-125">The content below will dive further into different Unity versions and the Mixed Reality Toolkit version 2.</span></span>
>
> <span data-ttu-id="166cc-126">有关详细信息，请参阅[安装工具](install-the-tools.md)。</span><span class="sxs-lookup"><span data-stu-id="166cc-126">For more information, please see [Install the tools](install-the-tools.md).</span></span>

## <a name="migrate-project-to-latest-version-of-unity"></a><span data-ttu-id="166cc-127">将项目迁移到最新版本的 Unity</span><span class="sxs-lookup"><span data-stu-id="166cc-127">Migrate project to latest version of Unity</span></span>

<span data-ttu-id="166cc-128">如果使用 MRTK v2，则 Unity 2018 LTS 是最佳的长期支持路径，它不会在 Unity 或 MRTK 中造成重大更改。</span><span class="sxs-lookup"><span data-stu-id="166cc-128">If using the MRTK v2, then Unity 2018 LTS will be the best long-term support path with no breaking changes in Unity or in MRTK.</span></span>  <span data-ttu-id="166cc-129">根据上面的“安装工具”，建议的 Unity 版本是 Unity 2018.3，它将是 Unity 2018 的 LTS 版本。</span><span class="sxs-lookup"><span data-stu-id="166cc-129">The recommended Unity build, per the above "install the tools" is Unity 2018.3, which will become the LTS release for Unity 2018.</span></span>  <span data-ttu-id="166cc-130">此外，MRTK v2 始终保证支持 Unity 2018 LTS，但不一定保证支持 Unity 2019.x 的每次迭代。</span><span class="sxs-lookup"><span data-stu-id="166cc-130">Further, the MRTK v2 will always guarantee support for Unity 2018 LTS but not necessarily guarantee support for every iteration of Unity 2019.x.</span></span> 

<span data-ttu-id="166cc-131">为了帮助阐明 Unity 2018.3.x 或 Unity 2019.1.x 之间的其他差异，下面概述了这两个版本之间的利弊，重要的差异主要是能否在 Unity 2019 中进行 ARM64 编译。</span><span class="sxs-lookup"><span data-stu-id="166cc-131">To help clarify additional differences between Unity 2018.3.x or Unity 2019.1.x, below outlines the trade-offs between these two versions, with the primary difference of significance being the ability to compile for ARM64 in Unity 2019.</span></span> 

<span data-ttu-id="166cc-132">开发人员应该评估其项目中当前存在的任何[插件依赖项](https://docs.unity3d.com/Manual/Plugins.html)，以及是否可为 ARM64 生成这些 DLL。</span><span class="sxs-lookup"><span data-stu-id="166cc-132">Developers should assess any [plugin dependencies](https://docs.unity3d.com/Manual/Plugins.html) that currently exist in their project and whether or not these DLLs can be built for ARM64.</span></span> <span data-ttu-id="166cc-133">如果无法为 ARM64 生成必需的依赖项插件，则必须利用 Unity 2018 LTS。</span><span class="sxs-lookup"><span data-stu-id="166cc-133">If a hard dependency plugin cannot be built for ARM64, then one will have to utilize Unity 2018 LTS.</span></span>


| <span data-ttu-id="166cc-134">Unity 2018.3.x</span><span class="sxs-lookup"><span data-stu-id="166cc-134">Unity 2018.3.x</span></span> | <span data-ttu-id="166cc-135">Unity 2019.1+</span><span class="sxs-lookup"><span data-stu-id="166cc-135">Unity 2019.1+</span></span> |
|----------|-------------------|
| <span data-ttu-id="166cc-136">ARM32 生成支持</span><span class="sxs-lookup"><span data-stu-id="166cc-136">ARM32 build support</span></span> | <span data-ttu-id="166cc-137">ARM32 和 ARM64 生成支持</span><span class="sxs-lookup"><span data-stu-id="166cc-137">ARM32 and ARM64 build support</span></span> |
| <span data-ttu-id="166cc-138">稳定的 LTS 生成版本</span><span class="sxs-lookup"><span data-stu-id="166cc-138">Stable LTS build release</span></span> | <span data-ttu-id="166cc-139">Beta 稳定性</span><span class="sxs-lookup"><span data-stu-id="166cc-139">Beta stability</span></span> |
| <span data-ttu-id="166cc-140">[.NET 脚本后端](https://docs.unity3d.com/Manual/windowsstore-dotnet.html)已弃用 </span><span class="sxs-lookup"><span data-stu-id="166cc-140">[.NET Scripting back-end](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) *deprecated*</span></span> | <span data-ttu-id="166cc-141">[.NET 脚本后端](https://docs.unity3d.com/Manual/windowsstore-dotnet.html)已删除 </span><span class="sxs-lookup"><span data-stu-id="166cc-141">[.NET Scripting back-end](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) *removed*</span></span> |
| <span data-ttu-id="166cc-142">UNET 网络已弃用 </span><span class="sxs-lookup"><span data-stu-id="166cc-142">UNET Networking *deprecated*</span></span> | <span data-ttu-id="166cc-143">UNET 网络已删除 </span><span class="sxs-lookup"><span data-stu-id="166cc-143">UNET Networking *removed*</span></span> |

## <a name="update-sceneproject-settings-in-unity"></a><span data-ttu-id="166cc-144">在 Unity 中更新场景/项目设置</span><span class="sxs-lookup"><span data-stu-id="166cc-144">Update scene/project settings in Unity</span></span>

<span data-ttu-id="166cc-145">更新到 Unity 2018.3.x 或 Unity 2019+ 之后，建议在 Unity 中更新特定的设置，以便在设备上获得最佳结果。</span><span class="sxs-lookup"><span data-stu-id="166cc-145">After updating to Unity 2018.3.x or Unity 2019+, it is recommended to update particular settings in Unity for optimal results on device.</span></span> <span data-ttu-id="166cc-146">**[Unity 的建议设置](Recommended-settings-for-Unity.md)** 中详细描述了这些设置。</span><span class="sxs-lookup"><span data-stu-id="166cc-146">These settings are outlined in detail under **[Recommended settings for Unity](Recommended-settings-for-Unity.md)**.</span></span>

<span data-ttu-id="166cc-147">再次重申，[.NET 脚本后端](https://docs.unity3d.com/Manual/windowsstore-dotnet.html)即将在 Unity 2018 中弃用，并将在 Unity 2019 中删除，因此，强烈建议开发人员将其项目切换到 [IL2CPP](https://docs.unity3d.com/Manual/IL2CPP.html)。 </span><span class="sxs-lookup"><span data-stu-id="166cc-147">It should be re-iterated that the [.NET Scripting back-end](https://docs.unity3d.com/Manual/windowsstore-dotnet.html) is being deprecated in Unity 2018 and *removed* in Unity 2019 and thus, developers should strongly consider switching their project over to [IL2CPP](https://docs.unity3d.com/Manual/IL2CPP.html).</span></span> 

> [!NOTE]
> <span data-ttu-id="166cc-148">IL2CPP 脚本后端可能导致增大从 Unity 到 Visual Studio 的生成时间，因此，开发人员应设置好其计算机，以[优化 IL2CPP 生成时间](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html)。</span><span class="sxs-lookup"><span data-stu-id="166cc-148">IL2CPP scripting back-end can cause longer build times from Unity to Visual Studio and thus developers should setup their developer machine for [optimizing IL2CPP build times](https://docs.unity3d.com/Manual/IL2CPP-OptimizingBuildTimes.html).</span></span>
> <span data-ttu-id="166cc-149">此外，设置[缓存服务器](https://docs.unity3d.com/Manual/CacheServer.html)可能会有所帮助，尤其是对于包含大量资产（不包括脚本文件）或不断变化的场景/资产的 Unity 项目而言。</span><span class="sxs-lookup"><span data-stu-id="166cc-149">Furthermore, it may be beneficial to setup a [Cache Server](https://docs.unity3d.com/Manual/CacheServer.html), especially for Unity projects with a large amount of assets (excluding script files) or constantly changing scenes/assets.</span></span> <span data-ttu-id="166cc-150">打开项目时，Unity 会在开发人员计算机上将符合条件的资产存储为内部缓存格式。</span><span class="sxs-lookup"><span data-stu-id="166cc-150">When opening a project, Unity stores qualifying assets into an internal cache format on the developer machine.</span></span> <span data-ttu-id="166cc-151">必须重新导入项，因此，项在修改后会重新经过处理。</span><span class="sxs-lookup"><span data-stu-id="166cc-151">Items must be re-imported and thus re-processed when modified.</span></span> <span data-ttu-id="166cc-152">此过程可以执行一次，结果可保存在缓存服务器，因此可与其他开发人员共享以节省时间，无需让每个开发人员在本地重新导入新的更改。</span><span class="sxs-lookup"><span data-stu-id="166cc-152">This process can be done once and saved in a Cache Server and consequently shared with other developers to save time, instead of every developer processing the re-import of new changes locally.</span></span>

<span data-ttu-id="166cc-153">过渡到更新的 Unity 版本并解决所有重大更改后，开发人员应在 HoloLens （第 1 代）上生成并测试其当前应用。</span><span class="sxs-lookup"><span data-stu-id="166cc-153">After addressing any breaking changes after moving to the updated Unity version, developers should build and test their current apps on HoloLens (1st gen).</span></span> <span data-ttu-id="166cc-154">此外，在此阶段很适合保存一个提交代码用于源代码管理。</span><span class="sxs-lookup"><span data-stu-id="166cc-154">Further, this is a good point to create and save a commit for source control.</span></span> 

## <a name="compile-dependenciesplugins-for-arm-processor"></a><span data-ttu-id="166cc-155">编译 ARM 处理器的依赖项/插件</span><span class="sxs-lookup"><span data-stu-id="166cc-155">Compile dependencies/plugins for ARM processor</span></span>

<span data-ttu-id="166cc-156">HoloLens（第 1 代）在 x86 处理器上执行应用程序，而新的 HoloLens 2 设备则是利用 ARM 处理器。</span><span class="sxs-lookup"><span data-stu-id="166cc-156">HoloLens (1st gen) executed applications on an x86 processor while the new HoloLens 2 device utilizes an ARM processor.</span></span> <span data-ttu-id="166cc-157">因此，需要移植现有的应用程序才能支持 ARM。</span><span class="sxs-lookup"><span data-stu-id="166cc-157">Thus, existing applications need to be ported over to support ARM.</span></span> <span data-ttu-id="166cc-158">如前所述，Unity 2018 支持 ARM32 应用的编译，而 Unity 2019+ 支持 ARM64 应用的编译。</span><span class="sxs-lookup"><span data-stu-id="166cc-158">As noted earlier, Unity 2018 supports compiling for ARM32 apps while Unity 2019+ supports compiling for ARM64 apps.</span></span> <span data-ttu-id="166cc-159">一般而言，针对 ARM64 应用程序进行开发会更有利，因为性能方面存在本质的差异。</span><span class="sxs-lookup"><span data-stu-id="166cc-159">Developing for ARM64 applications is generally preferred as there is a material difference in performance.</span></span> <span data-ttu-id="166cc-160">但是，这也需要对 ARM64 生成所有[插件依赖项](https://docs.unity3d.com/Manual/Plugins.html)。</span><span class="sxs-lookup"><span data-stu-id="166cc-160">However, this requires all [plugin dependencies](https://docs.unity3d.com/Manual/Plugins.html) to also be built for ARM64.</span></span> 

<span data-ttu-id="166cc-161">请检查应用程序中的所有当前 DLL 依赖项。</span><span class="sxs-lookup"><span data-stu-id="166cc-161">Review all DLL dependencies in your application currently.</span></span> <span data-ttu-id="166cc-162">如果不再需要某个依赖项，最好是从项目中删除它。</span><span class="sxs-lookup"><span data-stu-id="166cc-162">If a dependency is no longer needed, it is advisable to remove it from your project.</span></span> <span data-ttu-id="166cc-163">对于所需的剩余插件，请将相应的 ARM32 或 ARM64 二进制文件引入 Unity 项目中。</span><span class="sxs-lookup"><span data-stu-id="166cc-163">For remaining plugins that are required, ingest the respective ARM32 or ARM64 binaries into your Unity project.</span></span> 

<span data-ttu-id="166cc-164">引入相关的 DLL 后，从 Unity 生成一个 Visual Studio 解决方案，然后在 Visual Studio 中编译一个适用于 ARM 的 AppX，以测试应用程序是否可以针对 ARM 处理器生成。</span><span class="sxs-lookup"><span data-stu-id="166cc-164">After ingesting the relevant DLLs, build a Visual Studio solution from Unity and then compile an AppX for ARM in Visual Studio to test that your application can be built for ARM processors.</span></span> <span data-ttu-id="166cc-165">在此阶段，也建议在源代码管理解决方案中保存一个提交代码。</span><span class="sxs-lookup"><span data-stu-id="166cc-165">This another point where it is advised to save a commit in your source control solution.</span></span> 

## <a name="update-to-mrtk-version-2"></a><span data-ttu-id="166cc-166">更新到 MRTK 版本 2</span><span class="sxs-lookup"><span data-stu-id="166cc-166">Update to MRTK version 2</span></span>

<span data-ttu-id="166cc-167">MRTK 版本 2 是基于 Unity 的新工具包，支持 HoloLens（第 1 代）和 HoloLens 2，其中已添加所有新的 HoloLens 2 功能，例如手动交互和眼动跟踪。</span><span class="sxs-lookup"><span data-stu-id="166cc-167">MRTK version 2 is the new toolkit on top of Unity supporting both HoloLens (1st gen) and HoloLens 2, and where all of the new HoloLens 2 capabilities have been added, such as hand interactions and eye tracking.</span></span>

### <a name="prepare-for-the-migration"></a><span data-ttu-id="166cc-168">准备迁移</span><span class="sxs-lookup"><span data-stu-id="166cc-168">Prepare for the migration</span></span>

<span data-ttu-id="166cc-169">在引入新的[适用于 MRTK v2 的 \*.unitypackage 文件](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases)之前，建议清点：**1) 与 MRTK v1 集成的任何自定义生成代码**；**2) 用于输入交互或 UX 组件的任何自定义生成代码**。</span><span class="sxs-lookup"><span data-stu-id="166cc-169">Before ingesting the new [\*.unitypackage files for MRTK v2](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases), it is recommended to take an inventory of **1) any custom-built code that integrates with MRTK v1** and **2) any custom-built code for input interactions or UX components**.</span></span> <span data-ttu-id="166cc-170">混合现实开发人员在引入新的 MRTK v2 时最常出现的冲突与输入和交互相关。</span><span class="sxs-lookup"><span data-stu-id="166cc-170">The most common and prevalent conflict for a Mixed Reality developer ingesting the new MRTK v2 will involve input and interactions.</span></span> <span data-ttu-id="166cc-171">因此，我们建议阅读并理解 [MRTK v2 输入模型](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Input/Overview.html)。</span><span class="sxs-lookup"><span data-stu-id="166cc-171">Thus, it is advised to begin reading and understanding the [MRTK v2 input model](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Input/Overview.html).</span></span>

<span data-ttu-id="166cc-172">最后，新的 MRTK v2 已从脚本和场景内管理器对象模型过渡到配置与服务提供程序体系结构。</span><span class="sxs-lookup"><span data-stu-id="166cc-172">Finally, the new MRTK v2 has transitioned from a model of scripts and in-scene manager objects to a configuration and services provider architecture.</span></span> <span data-ttu-id="166cc-173">这可以建立一种更简洁的场景层次结构和体系结构模型，但需要通过学习来了解新的配置文件。</span><span class="sxs-lookup"><span data-stu-id="166cc-173">This results in a cleaner scene hierarchy and architecture model but requires a learning curve for understanding the new configuration profiles.</span></span> <span data-ttu-id="166cc-174">因此，请阅读[混合现实工具包配置指南](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/MixedRealityConfigurationGuide.html)，以开始熟悉重要的设置和配置文件，并根据应用程序的需求进行调整。</span><span class="sxs-lookup"><span data-stu-id="166cc-174">Thus, please read the [Mixed Reality Toolkit Configuration Guide](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/MixedRealityConfigurationGuide.html) to start becoming familiar with the important settings and profiles to adjust to the needs of your application.</span></span> 

### <a name="perform-the-migration"></a><span data-ttu-id="166cc-175">执行迁移</span><span class="sxs-lookup"><span data-stu-id="166cc-175">Perform the migration</span></span>

<span data-ttu-id="166cc-176">导入 MRTK v2 后，Unity 项目有可能会出现多种与编译器相关的错误。</span><span class="sxs-lookup"><span data-stu-id="166cc-176">After importing MRTK v2, your Unity project will likely have many compiler related errors.</span></span> <span data-ttu-id="166cc-177">这些错误通常是新的命名空间结构和新的组件名称造成的。</span><span class="sxs-lookup"><span data-stu-id="166cc-177">These are most commonly due to the new namespace structure and new component names.</span></span> <span data-ttu-id="166cc-178">请将脚本修改为新的命名空间和组件，以解决这些错误。</span><span class="sxs-lookup"><span data-stu-id="166cc-178">Proceed to resolve these errors by modifying your scripts to the new namespaces and components.</span></span> 

<span data-ttu-id="166cc-179">有关 HTK/MRTK 与 MRTK 版本 2 之间的具体 API 差异的详细信息，请参阅 [MRTK 版本 2 Wiki](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/HTKToMRTKPortingGuide.html) 中的迁移指南。</span><span class="sxs-lookup"><span data-stu-id="166cc-179">For more information on specific API differences between HTK/MRTK and MRTK version 2, see the porting guide on the [MRTK Version 2 wiki](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/HTKToMRTKPortingGuide.html).</span></span>

### <a name="best-practices"></a><span data-ttu-id="166cc-180">最佳做法</span><span class="sxs-lookup"><span data-stu-id="166cc-180">Best practices</span></span>

- <span data-ttu-id="166cc-181">优先使用 MRTK 标准着色器</span><span class="sxs-lookup"><span data-stu-id="166cc-181">Prefer use of the MRTK Standard shader</span></span>
- <span data-ttu-id="166cc-182">每次处理一种重大更改类型（例如：将 IFocusable 更改为 IMixedRealityFocusHandler）</span><span class="sxs-lookup"><span data-stu-id="166cc-182">Work on one breaking change type at a time (ex: IFocusable to IMixedRealityFocusHandler)</span></span>
- <span data-ttu-id="166cc-183">每次更改后进行测试，并利用源代码管理</span><span class="sxs-lookup"><span data-stu-id="166cc-183">Test after every change and utilize source control</span></span>
- <span data-ttu-id="166cc-184">尽可能地使用默认 MRTK UX（按钮、盖板等）</span><span class="sxs-lookup"><span data-stu-id="166cc-184">Use default MRTK UX (buttons, slates, etc) when possible</span></span>
- <span data-ttu-id="166cc-185">尽量避免直接修改 MRTK 文件，改为创建围绕 MRTK 组件的包装器</span><span class="sxs-lookup"><span data-stu-id="166cc-185">Try to refrain from modifying MRTK files directly, instead create wrappers around MRTK components</span></span>
    - <span data-ttu-id="166cc-186">这可以避免将来进行 MRTK 引入和更新</span><span class="sxs-lookup"><span data-stu-id="166cc-186">This will protect against future MRTK ingestions and updates</span></span>
- <span data-ttu-id="166cc-187">查看并探索 MRTK 中提供的示例场景（尤其是 *HandInteractionExamples.scene*）</span><span class="sxs-lookup"><span data-stu-id="166cc-187">Review & explore sample scenes provided in MRTK (especially *HandInteractionExamples.scene*)</span></span>
- <span data-ttu-id="166cc-188">改用四面体、碰撞体和 TextMeshPro 文本重新生成基于画布的 UI</span><span class="sxs-lookup"><span data-stu-id="166cc-188">Rebuild canvas-based UI with quads, colliders and TextMeshPro text instead</span></span>

### <a name="testing-your-application"></a><span data-ttu-id="166cc-189">测试应用程序</span><span class="sxs-lookup"><span data-stu-id="166cc-189">Testing your application</span></span>

<span data-ttu-id="166cc-190">既然在 MRTK 版本 2 中可以使用 HoloLens 2 组件和功能，从 [RC1](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases/tag/v2.0.0-RC1) 开始，可以直接在 Unity 中模拟手动交互，并使用新的 API 进行手动交互和眼动跟踪方面的开发。</span><span class="sxs-lookup"><span data-stu-id="166cc-190">Now that HoloLens 2 components and capabilities are available in MRTK version 2, as of [RC1](https://github.com/Microsoft/MixedRealityToolkit-Unity/releases/tag/v2.0.0-RC1), you can simulate the hand interactions directly in Unity, and develop against the new APIs for hand interactions and eye tracking.</span></span>  <span data-ttu-id="166cc-191">需要使用 HoloLens 2 设备才能建立优异的体验，但用户最起码可以在工具和文档中学到知识。</span><span class="sxs-lookup"><span data-stu-id="166cc-191">The HoloLens 2 device is required to create a great experience, but at least one could start learning in the tools and documentation.</span></span> <span data-ttu-id="166cc-192">此外，MRTK v2 支持在 HoloLens（第 1 代）上进行开发，因此，仍可以在 HoloLens（第 1 代）设备上测试通过隔空敲击进行选择的操作。</span><span class="sxs-lookup"><span data-stu-id="166cc-192">Further, MRTK v2 supports development on HoloLens (1st gen) and thus, traditional input models such as select via air-tap can still be tested on HoloLens (1st gen) devices.</span></span> 

## <a name="updating-interaction-model-for-hololens-2"></a><span data-ttu-id="166cc-193">更新 HoloLens 2 的交互模型</span><span class="sxs-lookup"><span data-stu-id="166cc-193">Updating interaction model for HoloLens 2</span></span>

<span data-ttu-id="166cc-194">移植应用并在 HoloLens 2 中做好准备后，可以考虑更新交互模型和全息影像设计/定位。</span><span class="sxs-lookup"><span data-stu-id="166cc-194">Once you have your app ported and prepped for HoloLens 2, you are ready to consider updating your interaction model and hologram designs/placement.</span></span>
<span data-ttu-id="166cc-195">在 HoloLens（第 1 代）中，应用可能会使用视线和提交交互模型，而全息影像位于相对较远的位置，因此难以放入视场。</span><span class="sxs-lookup"><span data-stu-id="166cc-195">Coming from HoloLens (1st gen), your app likely has a gaze and commit interaction model, with holograms relatively far away to fit into the field of view.</span></span>

<span data-ttu-id="166cc-196">更新应用设计，使其最适合 HoloLens 2 的步骤如下：</span><span class="sxs-lookup"><span data-stu-id="166cc-196">Steps to update your app design to be best for HoloLens 2:</span></span>
1.  <span data-ttu-id="166cc-197">MRTK 组件：根据前期工作，如果已添加 MRTK v2，则可以利用已根据 HoloLens 2 进行设计和优化的各种组件/脚本。</span><span class="sxs-lookup"><span data-stu-id="166cc-197">MRTK components: Per the pre-work, if you added MRTK v2, there are various components/scripts to leverage that have been designed and optimized for HoloLens 2.</span></span>

2.  <span data-ttu-id="166cc-198">交互模型：考虑更新交互模型。</span><span class="sxs-lookup"><span data-stu-id="166cc-198">Interaction model: Consider updating your interaction model.</span></span>  <span data-ttu-id="166cc-199">对于大多数方案，我们建议从视线和提交切换为手动。</span><span class="sxs-lookup"><span data-stu-id="166cc-199">For most scenarios, we recommend switching from gaze and commit to hands.</span></span>  <span data-ttu-id="166cc-200">由于全息影像通常会超出手臂的控制范围，切换为手动可以生成远距交互指向光线和抓取手势。</span><span class="sxs-lookup"><span data-stu-id="166cc-200">With your holograms typically being out of arms reach, switching to hands will result in far interaction pointing rays and grab gestures.</span></span>
<span data-ttu-id="166cc-201">注意：在某些情况下需要使用无手交互模型，例如，当任务工作者手持工具，或者对于此案例有具体的设计指导原则时。</span><span class="sxs-lookup"><span data-stu-id="166cc-201">Note: there are scenarios where a hands-free interaction model is required, such as a task worker holding tools, and there is specific design guidance for such cases.</span></span> 

3.  <span data-ttu-id="166cc-202">全息影像的定位：切换到手动交互模型后，请考虑更靠近某些全息影像，以使用近距交互抓取手势直接与全息影像手动交互。</span><span class="sxs-lookup"><span data-stu-id="166cc-202">Hologram placement: After switching to a hands interaction model, consider moving some holograms closer to directly interact with the holograms with your hands, using near interaction grab gestures.</span></span>  <span data-ttu-id="166cc-203">建议靠近的、以便于抓取或交互的全息影像类型包括小目标菜单、控件、按钮，以及在抓取和检查时可放入 HoloLens 2 视场中的小型全息影像。</span><span class="sxs-lookup"><span data-stu-id="166cc-203">The types of holograms recommended to move closer to directly grab or interact are small target menus, controls, buttons, and smaller holograms that fit within the HoloLens 2 field of view when grabbing and inspecting the hologram.</span></span>
<br>
<span data-ttu-id="166cc-204">应用和方案各不相同，我们会根据反馈和经验教训不断改进并发布设计指南。</span><span class="sxs-lookup"><span data-stu-id="166cc-204">Every app and scenario is different, and we’ll continue to refine and post design guidance based on feedback and continued learnings.</span></span>


## <a name="additional-learnings-from-moving-apps-from-x86-to-arm"></a><span data-ttu-id="166cc-205">有关将应用从 x86 转移到 ARM 的其他知识点</span><span class="sxs-lookup"><span data-stu-id="166cc-205">Additional learnings from moving apps from x86 to ARM</span></span>

- <span data-ttu-id="166cc-206">规则的 Unity 应用非常简单，可以生成一个 ARM appx 捆绑包，或直接部署到设备即可运行。</span><span class="sxs-lookup"><span data-stu-id="166cc-206">Straight Unity apps are simple as you can build an ARM appx bundle or deploy directly to the device and it runs.</span></span>
<span data-ttu-id="166cc-207">当 Unity 应用使用本机插件时，会带来一些挑战。</span><span class="sxs-lookup"><span data-stu-id="166cc-207">The challenge comes when the Unity app uses native plugins.</span></span>  <span data-ttu-id="166cc-208">所有本机插件需要升级到 VS2017，并使用 Unity 2019 ARM64 针对 ARM 重新生成。</span><span class="sxs-lookup"><span data-stu-id="166cc-208">All of the native plugins need to be upgraded to VS2017 and rebuilt for ARM, and with Unity 2019, ARM64.</span></span>

- <span data-ttu-id="166cc-209">如果某个应用使用适用于 Unity 的 AudioKinetic Wwise 插件，而所用的版本没有 UWP ARM 插件。</span><span class="sxs-lookup"><span data-stu-id="166cc-209">One app, used the AudioKinetic Wwise plugin for Unity, and the version used didn’t have a UWP ARM plugin.</span></span> <span data-ttu-id="166cc-210">需要花费几天时间才能重新处理该应用程序中的声音，使其可在 ARM 中播放。</span><span class="sxs-lookup"><span data-stu-id="166cc-210">It took several days to re-work the sound in the application to work on ARM.</span></span>

- <span data-ttu-id="166cc-211">在其他情况下，可能不存在应用所需的 UWP/ARM 插件，因此无法在 HoloLens 2 上移植和运行。</span><span class="sxs-lookup"><span data-stu-id="166cc-211">In other cases, a UWP/ARM plugin may not exist for app-required plugins, blocking the ability to port and run on HoloLens 2.</span></span>  <span data-ttu-id="166cc-212">可能需要配合插件提供商来解除这种阻碍并支持 ARM。</span><span class="sxs-lookup"><span data-stu-id="166cc-212">Engagement with the plugin provider may be needed to unblock and support ARM.</span></span>

- <span data-ttu-id="166cc-213">在 HoloLen 2 上，着色器中的 minfloat（以及 min16float、minint 等变量）的行为可能与 HoloLens（第 1 代）上不同。</span><span class="sxs-lookup"><span data-stu-id="166cc-213">The minfloat (and variants such as min16float, minint, etc…) in shaders may behave differently on HoloLen 2 than on HoloLens (1st gen).</span></span> <span data-ttu-id="166cc-214">具体而言，HoloLen 2 保证“至少使用指定的位数”。</span><span class="sxs-lookup"><span data-stu-id="166cc-214">Specifically, these guarantee that “at least the specified number of bits will be used”.</span></span> <span data-ttu-id="166cc-215">在 Intel/Nvidia GPU 上，这些位基本上被视为 32 位。</span><span class="sxs-lookup"><span data-stu-id="166cc-215">On Intel/Nvidia GPUs, these are largely just treated as 32 bits.</span></span> <span data-ttu-id="166cc-216">在 ARM 上，实际上会遵循指定的位数。</span><span class="sxs-lookup"><span data-stu-id="166cc-216">On ARM, the number of bits specified is actually respected.</span></span> <span data-ttu-id="166cc-217">这意味着，在实践中，这些数字在 HoloLens 2 上的精度/范围可能低于 HoloLens（第 1 代）。</span><span class="sxs-lookup"><span data-stu-id="166cc-217">That means that in practice, these numbers may have less precision/range on HoloLens 2 than they did on HoloLens (1st gen).</span></span>

- <span data-ttu-id="166cc-218">_asm 指令似乎在 ARM 上无法正常运行，这意味着，必须重写使用 _asm 指令的所有代码。</span><span class="sxs-lookup"><span data-stu-id="166cc-218">The _asm instructions don’t appear to work on ARM, meaning any code using _asm instructions will have to be rewritten.</span></span>

- <span data-ttu-id="166cc-219">ARM 不支持 SIMD 指令集。</span><span class="sxs-lookup"><span data-stu-id="166cc-219">The SIMD instruction set is not supported on ARM.</span></span> <span data-ttu-id="166cc-220">这意味着，xmmintrin.h、emmintrin.h、tmmintrin.h 和 immintrin.h 等各种标头在 ARM 上不可用。</span><span class="sxs-lookup"><span data-stu-id="166cc-220">This means various headers, such as xmmintrin.h, emmintrin.h, tmmintrin.h, and immintrin.h are not available on ARM.</span></span>

- <span data-ttu-id="166cc-221">ARM 上的着色器编译器将在加载着色器，或者在着色器所依赖的设置发生更改后，在首次发出绘制调用期间运行，而不是在加载着色器时运行。</span><span class="sxs-lookup"><span data-stu-id="166cc-221">The shader compiler on ARM runs during the first draw call after the shader has been loaded or something the shader relies on has changed, not at shader load time.</span></span> <span data-ttu-id="166cc-222">对帧速率的影响可能十分明显，具体取决于需要编译多少个着色器。</span><span class="sxs-lookup"><span data-stu-id="166cc-222">The impact on framerate can be very noticeable, depending on how many shaders need to be compiled.</span></span> <span data-ttu-id="166cc-223">这会在 HoloLens 2 与 HoloLens（第 1 代）中，对着色器的不同处理/打包/更新方式造成各种影响。</span><span class="sxs-lookup"><span data-stu-id="166cc-223">This has various implications for how shaders should be handled/packaged/updated differently on HoloLens 2 vs HoloLens (1st gen).</span></span>

## <a name="see-also"></a><span data-ttu-id="166cc-224">另请参阅</span><span class="sxs-lookup"><span data-stu-id="166cc-224">See also</span></span>
* [<span data-ttu-id="166cc-225">MRTK 版本 2 入门</span><span class="sxs-lookup"><span data-stu-id="166cc-225">Getting started with MRTK version 2</span></span>](mrtk-getting-started.md)
* [<span data-ttu-id="166cc-226">MRTK 版本 2 操作指南</span><span class="sxs-lookup"><span data-stu-id="166cc-226">MRTK Version 2 HowTo</span></span>](https://microsoft.github.io/MixedRealityToolkit-Unity/External/HowTo/README.html)
* [<span data-ttu-id="166cc-227">安装工具</span><span class="sxs-lookup"><span data-stu-id="166cc-227">Install the tools</span></span>](install-the-tools.md)
* [<span data-ttu-id="166cc-228">建议用于 Unity 的设置</span><span class="sxs-lookup"><span data-stu-id="166cc-228">Recommended settings for Unity</span></span>](recommended-settings-for-unity.md)
* [<span data-ttu-id="166cc-229">了解混合现实的性能</span><span class="sxs-lookup"><span data-stu-id="166cc-229">Understanding performance for Mixed Reality</span></span>](understanding-performance-for-mixed-reality.md)

