---
title: MR 学习基础模块 - 高级输入
description: 请完成本课程来了解如何在混合现实应用程序中实现 Azure 人脸识别。
author: jessemcculloch
ms.author: jemccull
ms.date: 02/26/2019
ms.topic: article
ms.localizationpriority: high
keywords: 混合现实, unity, 教程, hololens
ms.openlocfilehash: 32141aafd43c5d729919673509c93bb2014edd37
ms.sourcegitcommit: f20beea6a539d04e1d1fc98116f7601137eebebe
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/05/2019
ms.locfileid: "66719895"
---
# <a name="mr-learning-base-module---advanced-input"></a><span data-ttu-id="02319-104">MR 学习基础模块 - 高级输入</span><span class="sxs-lookup"><span data-stu-id="02319-104">MR Learning Base Module - Advanced Input</span></span>

<span data-ttu-id="02319-105">本课探讨 HoloLens 2 的几个高级输入选项，包括语音命令、平移手势和眼动跟踪的用法。</span><span class="sxs-lookup"><span data-stu-id="02319-105">In this lesson, we will explore several advanced input options for the HoloLens 2, including the use of voice commands, the panning gesture, and eye tracking.</span></span> 

## <a name="objectives"></a><span data-ttu-id="02319-106">目标</span><span class="sxs-lookup"><span data-stu-id="02319-106">Objectives</span></span>

- <span data-ttu-id="02319-107">了解如何使用语音命令和关键字触发事件</span><span class="sxs-lookup"><span data-stu-id="02319-107">Learn how to trigger events using voice commands and keywords</span></span>
- <span data-ttu-id="02319-108">使用跟踪手平移纹理和 3D 对象</span><span class="sxs-lookup"><span data-stu-id="02319-108">Use tracked hands to pan textures and 3D objects</span></span>
- <span data-ttu-id="02319-109">利用 HoloLens 2 的眼动跟踪功能选择对象</span><span class="sxs-lookup"><span data-stu-id="02319-109">Leverage the HoloLens 2's eye tracking capabilities to select objects</span></span>

## <a name="instructions"></a><span data-ttu-id="02319-110">说明</span><span class="sxs-lookup"><span data-stu-id="02319-110">Instructions</span></span>

### <a name="enabling-voice-commands"></a><span data-ttu-id="02319-111">启用语音命令</span><span class="sxs-lookup"><span data-stu-id="02319-111">Enabling Voice Commands</span></span>

<span data-ttu-id="02319-112">在本部分，我们将实现两个语音命令。</span><span class="sxs-lookup"><span data-stu-id="02319-112">In this section, we will be implementing two voice commands.</span></span> <span data-ttu-id="02319-113">首先，通过讲出“切换诊断”来切换帧速率诊断面板。</span><span class="sxs-lookup"><span data-stu-id="02319-113">First, the ability to toggle the frame rate diagnostics panel by saying "toggle diagnostics."</span></span> <span data-ttu-id="02319-114">然后，使用语音命令播放声音。</span><span class="sxs-lookup"><span data-stu-id="02319-114">Second, the ability to play a sound with a voice command.</span></span> <span data-ttu-id="02319-115">我们先探讨负责配置语音命令的 MRTK 配置文件和设置。</span><span class="sxs-lookup"><span data-stu-id="02319-115">We will first explore the MRTK profiles and settings responsible for configuring voice commands.</span></span> 

1. <span data-ttu-id="02319-116">在基本场景层次结构中选择“MixedRealityToolkit”。</span><span class="sxs-lookup"><span data-stu-id="02319-116">In the Base Scene hierarchy select "MixedRealityToolkit."</span></span> <span data-ttu-id="02319-117">在检查器面板中，向下滚动到输入系统设置。</span><span class="sxs-lookup"><span data-stu-id="02319-117">In the inspector panel, scroll down to the input system settings.</span></span> <span data-ttu-id="02319-118">双击输入系统配置文件将其打开。</span><span class="sxs-lookup"><span data-stu-id="02319-118">Double click to open up the input system profile.</span></span> <span data-ttu-id="02319-119">克隆输入系统配置文件以使其可编辑，如[第 1 课](mrlearning-base-ch1.md)中所述</span><span class="sxs-lookup"><span data-stu-id="02319-119">Clone the input system profile to make it editable, as we learned in [Lesson 1](mrlearning-base-ch1.md)</span></span> 

<span data-ttu-id="02319-120">在输入系统配置文件中，会看到各种设置。</span><span class="sxs-lookup"><span data-stu-id="02319-120">In the input system profile, you will see a variety of settings.</span></span> <span data-ttu-id="02319-121">对于语音命令，向下滚动到标有“语音命令设置”的部分。</span><span class="sxs-lookup"><span data-stu-id="02319-121">For voice commands, go down to where it says, “Speech Command Settings.”</span></span> 

![Lesson5 Chapter1 Step2im](images/Lesson5_Chapter1_step2im.PNG)

2. <span data-ttu-id="02319-123">克隆语音命令配置文件以使其可编辑，如[第 1 课](mrlearning-base-ch1.md)中所述</span><span class="sxs-lookup"><span data-stu-id="02319-123">Clone the speech commands profile to make it editable, as we learned in [Lesson 1](mrlearning-base-ch1.md).</span></span> <span data-ttu-id="02319-124">双击语音命令配置文件，此时会看到一系列的设置。</span><span class="sxs-lookup"><span data-stu-id="02319-124">Double click on the speech command profile, where you’ll notice a range of settings.</span></span> <span data-ttu-id="02319-125">有关这些设置的完整说明，请参阅 [MRTK 语音文档](<https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Input/Speech.html>)。</span><span class="sxs-lookup"><span data-stu-id="02319-125">For a full description on these settings, refer the [MRTK speech documentation](<https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/Input/Speech.html>).</span></span> 

><span data-ttu-id="02319-126">注意：默认情况下，一般行为是自动启动。</span><span class="sxs-lookup"><span data-stu-id="02319-126">Note: By default, the general behavior is auto-start.</span></span> <span data-ttu-id="02319-127">可根据需要将其更改为手动启动，但对于本示例，我们将其保留为自动启动。</span><span class="sxs-lookup"><span data-stu-id="02319-127">That can be changed to manual-start if desired, but for this example we are going to keep it on auto-start.</span></span> <span data-ttu-id="02319-128">MRTK 附带了多个默认语音命令（例如菜单、切换诊断和切换探查器）。</span><span class="sxs-lookup"><span data-stu-id="02319-128">The MRTK comes with several default voice commands (such as menu, toggle diagnostics, and toggle profiler).</span></span> <span data-ttu-id="02319-129">我们将使用关键字“切换诊断”来启用和禁用诊断帧速率计数器。</span><span class="sxs-lookup"><span data-stu-id="02319-129">We will be using the keyword “toggle diagnostics” in order to turn on and off the diagnostics framerate counter.</span></span> <span data-ttu-id="02319-130">在以下步骤中，我们还将添加一个新的语音命令。</span><span class="sxs-lookup"><span data-stu-id="02319-130">We will also add a new voice command in the steps below.</span></span>
>
> ![Lesson5 Chapter1 Noteim](images/Lesson5_chapter1_noteim.PNG)

3. <span data-ttu-id="02319-132">添加新的语音命令。</span><span class="sxs-lookup"><span data-stu-id="02319-132">Add a new voice command.</span></span> <span data-ttu-id="02319-133">若要添加新的语音命令，请单击“+ 添加新语音命令”按钮。现有语音命令列表的下面会显示一个新行。</span><span class="sxs-lookup"><span data-stu-id="02319-133">To add a new voice command, click on the “+ add a new speech command” button and you will see a new line that appears down below the list of existing voice commands.</span></span> <span data-ttu-id="02319-134">键入要使用的语音命令。</span><span class="sxs-lookup"><span data-stu-id="02319-134">Type in the voice command you want to use.</span></span> <span data-ttu-id="02319-135">在此音乐示例中，我们将使用命令“播放音乐”。</span><span class="sxs-lookup"><span data-stu-id="02319-135">In this ex musicample we are going to use the command “play music.”</span></span>

><span data-ttu-id="02319-136">提示：还可为语音命令设置键码。</span><span class="sxs-lookup"><span data-stu-id="02319-136">Tip: You can also set a keycode for speech commands.</span></span> <span data-ttu-id="02319-137">这样，在按下某个键盘按键时，会触发语音命令。</span><span class="sxs-lookup"><span data-stu-id="02319-137">This allows for voice commands to trigger upon press of a keyboard key.</span></span>   

4. <span data-ttu-id="02319-138">添加响应语音命令的功能。</span><span class="sxs-lookup"><span data-stu-id="02319-138">Add the ability to respond to voice commands.</span></span> <span data-ttu-id="02319-139">在基本场景层次结构中，选择未附有任何其他输入脚本（例如，未附加操纵处理程序）的任何对象。在检查器面板中，单击“添加组件”。</span><span class="sxs-lookup"><span data-stu-id="02319-139">Select any object in the base scene hierarchy that does not have any other input scripts attached to it (e.g., no manipulation handler.) In the inspector panel, click “add component.”</span></span> <span data-ttu-id="02319-140">键入“语音输入处理程序”。</span><span class="sxs-lookup"><span data-stu-id="02319-140">Type in “speech input handler.”</span></span> <span data-ttu-id="02319-141">选择该组件。</span><span class="sxs-lookup"><span data-stu-id="02319-141">Select it.</span></span>
   <span data-ttu-id="02319-142">![Lesson5 Chapter1 Step4im](images/Lesson5_chapter1_step4im.PNG)</span><span class="sxs-lookup"><span data-stu-id="02319-142">![Lesson5 Chapter1 Step4im](images/Lesson5_chapter1_step4im.PNG)</span></span>

   

<span data-ttu-id="02319-143">默认情况下会看到 2 个复选框，其中一个是“需要聚焦”复选框。</span><span class="sxs-lookup"><span data-stu-id="02319-143">By default, you will see 2 checkboxes, one is the “is focus required” checkbox.</span></span> <span data-ttu-id="02319-144">这表示，只要你使用视线（眼睛视线、头部跟踪视线、控制器视线或手部跟踪视线）指向对象，就会触发语音命令。</span><span class="sxs-lookup"><span data-stu-id="02319-144">What this means is as long as you are pointing to the object with a gaze ray, (eye-gaze, head-gaze, controller-gaze, or hand-gaze) the voice command will be triggered.</span></span> <span data-ttu-id="02319-145">如果取消选中此复选框，则用户无需注视对象就能使用语音命令。</span><span class="sxs-lookup"><span data-stu-id="02319-145">Uncheck this checkbox to make it so that the user does not have to look at the object to use the voice command.</span></span>

5. <span data-ttu-id="02319-146">添加响应语音命令的功能。</span><span class="sxs-lookup"><span data-stu-id="02319-146">Add the ability to respond to a voice command.</span></span> <span data-ttu-id="02319-147">为此，请单击语音输入处理程序中的“+”按钮，然后选择要响应的关键字。</span><span class="sxs-lookup"><span data-stu-id="02319-147">To do this, click the “+” button that’s in the speech input handler and select the keyword you would like to respond to.</span></span>

   > <span data-ttu-id="02319-148">注意：这些关键字是根据在上一步骤中编辑的配置文件填充的。</span><span class="sxs-lookup"><span data-stu-id="02319-148">Note: These keywords are populated based on the profile you edited in the previous step.</span></span>

![Lesson5 Chapter1 Step5im](images/Lesson5_chapter1_step5im.PNG)

6. <span data-ttu-id="02319-150">在“关键字”旁边，会看到一个下拉菜单。</span><span class="sxs-lookup"><span data-stu-id="02319-150">Next to “Keyword” you will see a dropdown menu.</span></span> <span data-ttu-id="02319-151">选择“切换诊断”。</span><span class="sxs-lookup"><span data-stu-id="02319-151">Select “Toggle Diagnostics.”</span></span> <span data-ttu-id="02319-152">这样，每当用户讲出短语“切换诊断”时，就会触发某个操作。</span><span class="sxs-lookup"><span data-stu-id="02319-152">This will make it so that whenever the user says the phrase, “toggle diagnostics” it will trigger an action.</span></span> <span data-ttu-id="02319-153">请注意，可能需要通过按下“元素 0”旁边的箭头将其展开。</span><span class="sxs-lookup"><span data-stu-id="02319-153">Note that you may need to expand "element 0" by pressing the arrow next to it.</span></span>

![Lesson5 Chapter1 Step6im](images/Lesson5_chapter1_step6im.PNG)

7. <span data-ttu-id="02319-155">添加“诊断演示控件脚本”来启用和禁用帧速率计数器诊断。</span><span class="sxs-lookup"><span data-stu-id="02319-155">Add the “diagnostics demo control script” to toggle the framerate counter diagnostic on and off.</span></span> <span data-ttu-id="02319-156">为此，请按“添加组件”按钮，搜索“诊断演示控件脚本”，然后从菜单中添加此脚本。</span><span class="sxs-lookup"><span data-stu-id="02319-156">To do this, press the “add component” button and search for “diagnostics demo control script” then add it from the menu.</span></span> <span data-ttu-id="02319-157">此脚本可添加到任何对象，但为了简单起见，我们将其添加到语音输入处理程序所在的同一对象。</span><span class="sxs-lookup"><span data-stu-id="02319-157">This script can be added to any object, but for simplicity, we will add it to the same object as the speech input handler.</span></span> 

   > <span data-ttu-id="02319-158">注意：此脚本仅包含在这些模块中，而未包含在原始的 MRTK 中。</span><span class="sxs-lookup"><span data-stu-id="02319-158">Note: this script is only included with these modules and is not included with the original MRTK.</span></span>

![Lesson5 Chapter1 Step7im](images/Lesson5_chapter1_step7im.PNG)

8. <span data-ttu-id="02319-160">在语音输入处理程序中添加新的响应。</span><span class="sxs-lookup"><span data-stu-id="02319-160">Add a new response in the Speech Input Handler.</span></span> <span data-ttu-id="02319-161">为此，请单击带有“response ()”字样的元素（在上图中标有绿色箭头）下方的“+”按钮。</span><span class="sxs-lookup"><span data-stu-id="02319-161">To do this click the “+” button underneath where it says “response ()” (marked by green arrow in the picture above).</span></span>

![Lesson5 Chapter1 Step7im](images/Lesson5_chapter1_step8.PNG)

9. <span data-ttu-id="02319-163">将包含诊断演示控件脚本的对象拖放到刚刚在步骤 8 中创建的新响应。</span><span class="sxs-lookup"><span data-stu-id="02319-163">Drag the object that has the Diagnostics Demo Controls script to the new response you just created in step 8.</span></span>
    <span data-ttu-id="02319-164">![Lesson5 Chapter1 Step9im](images/Lesson5_chapter1_step9im.PNG)</span><span class="sxs-lookup"><span data-stu-id="02319-164">![Lesson5 Chapter1 Step9im](images/Lesson5_chapter1_step9im.PNG)</span></span>

10. <span data-ttu-id="02319-165">现在请选择“无函数”下拉列表，选择诊断演示控件，然后选择“on toggle diagnostics ()”。</span><span class="sxs-lookup"><span data-stu-id="02319-165">Now select the “no function” dropdown list, select diagnostic demo controls, then “on toggle diagnostics ().”</span></span> <span data-ttu-id="02319-166">此函数会启用或禁用诊断。</span><span class="sxs-lookup"><span data-stu-id="02319-166">This function toggles your diagnostics on and off.</span></span>  ![Lesson5 Chapter1 Step10im](images/Lesson5_chapter1_step10im.PNG)
    
> <span data-ttu-id="02319-168">请注意，在设备上生成之前，需要启用麦克风设置。</span><span class="sxs-lookup"><span data-stu-id="02319-168">Note that before building to your device you need to enable mic settings.</span></span> <span data-ttu-id="02319-169">为此，请单击“文件”，转到“生成设置”>“播放器设置”，并确保已设置麦克风功能。</span><span class="sxs-lookup"><span data-stu-id="02319-169">To do that click on file, go to build settings, from there, player settings, and ensure the microphone capability is set.</span></span>

<span data-ttu-id="02319-170">接下来，我们将添加使用“八面体”对象从语音命令播放音频文件的功能。</span><span class="sxs-lookup"><span data-stu-id="02319-170">Next, we are adding the ability to play an audio file from voice command using the "octa" object.</span></span> <span data-ttu-id="02319-171">回顾[第 4 课](mrlearning-base-ch4.md)，我们已添加通过触摸八面体对象播放音频剪辑的功能。</span><span class="sxs-lookup"><span data-stu-id="02319-171">Recall from [lesson 4](mrlearning-base-ch4.md), we added the ability to play an audio clip from touching the octa object.</span></span> <span data-ttu-id="02319-172">我们会将此音频源同样用于音乐语音命令。</span><span class="sxs-lookup"><span data-stu-id="02319-172">We will leverage this same audio source for our music voice command.</span></span>

11. <span data-ttu-id="02319-173">在基本场景层次结构中选择八面体对象。</span><span class="sxs-lookup"><span data-stu-id="02319-173">Select the octa object in the base scene hierarchy.</span></span>

12. <span data-ttu-id="02319-174">添加另一个语音输入处理程序（重复步骤 4 至 5），但使用八面体对象。</span><span class="sxs-lookup"><span data-stu-id="02319-174">Add another speech input handler (repeat steps 4 and 5), but with the octa object.</span></span> 

13. <span data-ttu-id="02319-175">不要添加步骤 6 中所述的“切换诊断”语音命令，而是如下图所示添加“播放音乐”语音命令。</span><span class="sxs-lookup"><span data-stu-id="02319-175">Instead of adding the “Toggle Diagnostics” voice command from step 6, add the “play music” voice command, as shown in the image below.</span></span>
    
     ![Lesson5 Chapter1 Step13im](images/Lesson5_chapter1_step13im.PNG)
    
    
    
14. <span data-ttu-id="02319-177">如步骤 8 和 9 中所述添加新的响应，并将八面体拖放到响应中的空槽。</span><span class="sxs-lookup"><span data-stu-id="02319-177">As with steps 8 and 9, add a new response, and drag the octa to the empty slot on response.</span></span>

15. <span data-ttu-id="02319-178">选择带有“无函数”字样的下拉菜单，选择“音频源”，然后选择“PlayOneShot (AudioClip)”。</span><span class="sxs-lookup"><span data-stu-id="02319-178">Select the dropdown menu that says “no function," select “Audio Source,” then select “PlayOneShot (AudioClip).”</span></span>

![Lesson5 Chapter1 Step15im](images/Lesson5_chapter1_step15im.PNG)

16. <span data-ttu-id="02319-180">对于本示例中的音频剪辑，我们将使用[第 4 课](mrlearning-base-ch4.md)中所述的相同音频剪辑。</span><span class="sxs-lookup"><span data-stu-id="02319-180">For the audio clip, for this example we are going to use the same audio clip from [Lesson 4](mrlearning-base-ch4.md).</span></span> <span data-ttu-id="02319-181">转到项目面板，搜索“MRTK_Gem”音频剪辑并将其拖入音频源槽，如下图所示。</span><span class="sxs-lookup"><span data-stu-id="02319-181">Go into your project panel, search for “MRTK_Gem” audio clip and drag it into the audio source slot, as shown in the image below.</span></span> <span data-ttu-id="02319-182">现在，应用程序应该可以响应语音命令“切换诊断”来切换帧速率计数器面板，并响应“播放音乐”来播放 MRTK_Gem 歌曲。</span><span class="sxs-lookup"><span data-stu-id="02319-182">Now your application should be able to respond to the voice commands “toggle diagnostics” to toggle the frame rate counter panel and “play music” to play the MRTK_Gem song.</span></span>
     <span data-ttu-id="02319-183">![Lesson5 Chapter1 Step16im](images/Lesson5_chapter1_step16im.PNG)</span><span class="sxs-lookup"><span data-stu-id="02319-183">![Lesson5 Chapter1 Step16im](images/Lesson5_chapter1_step16im.PNG)</span></span>


### <a name="the-pan-gesture"></a><span data-ttu-id="02319-184">平移手势</span><span class="sxs-lookup"><span data-stu-id="02319-184">The Pan Gesture</span></span> 

<span data-ttu-id="02319-185">本章介绍如何使用平移手势。</span><span class="sxs-lookup"><span data-stu-id="02319-185">In this chapter, we will learn how to use the pan gesture.</span></span> <span data-ttu-id="02319-186">滚动功能（使用手指或手滚动浏览内容）非常有用。还可以使用平移手势来旋转对象、循环 3D 对象的集合，甚至滚动 2D UI。</span><span class="sxs-lookup"><span data-stu-id="02319-186">It’s useful for scrolling (using your finger or hand to scroll through content.) You can also use the pan gesture to rotate objects, to cycle through a collection of 3D objects, or even scroll a 2D UI.</span></span> <span data-ttu-id="02319-187">我们将了解如何使用平移手势来扭曲纹理。</span><span class="sxs-lookup"><span data-stu-id="02319-187">We will be learning how to use the pan gesture to warp a texture.</span></span> <span data-ttu-id="02319-188">此外，我们将了解如何移动 3D 对象的集合。</span><span class="sxs-lookup"><span data-stu-id="02319-188">We will also explore how to move a collection of 3D objects.</span></span>

1. <span data-ttu-id="02319-189">创建一个四面体。</span><span class="sxs-lookup"><span data-stu-id="02319-189">Create a quad.</span></span> <span data-ttu-id="02319-190">在基本场景层次结构中单击右键，选择“3D 对象”，然后选择“四面体”。</span><span class="sxs-lookup"><span data-stu-id="02319-190">In your base scene hierarchy, right click, select “3D Object,” then select “Quad.”</span></span>

![Lesson5 Chapter2 Step2im](images/Lesson5_chapter2_step2im.PNG)

2. <span data-ttu-id="02319-192">适当地重新定位四面体。</span><span class="sxs-lookup"><span data-stu-id="02319-192">Reposition the quad as appropriate.</span></span> <span data-ttu-id="02319-193">在本示例中，我们相对于相机位置设置了 x = 0，y = 0 和 z = 1.5，以便在 HoloLens 2 中获得一个舒适的操作位置。</span><span class="sxs-lookup"><span data-stu-id="02319-193">For our example, we set the x = 0, the y = 0 and the z = 1.5 away from the camera for a comfortable position from the HoloLens 2.</span></span>

   > <span data-ttu-id="02319-194">注意：如果四面体块位于前面课程中任何内容的前面，请务必将其移动，使其不会阻挡任何其他对象。</span><span class="sxs-lookup"><span data-stu-id="02319-194">Note: If the quad blocks (is infront of) any content from the previous lessons, be sure to move it such that it doesn’t block any of the other objects.</span></span>

3. <span data-ttu-id="02319-195">将材料应用到四面体。</span><span class="sxs-lookup"><span data-stu-id="02319-195">Apply a material to the quad.</span></span> <span data-ttu-id="02319-196">此材料将是我们要使用平移手势滚动浏览的材料。</span><span class="sxs-lookup"><span data-stu-id="02319-196">This material will be the material we will be scrolling through with the pan gesture.</span></span> 

![Lesson5 Chapter2 Step3im](images/Lesson5_chapter2_step3im.PNG)

4. <span data-ttu-id="02319-198">在项目面板上的搜索框中键入“平移内容”。</span><span class="sxs-lookup"><span data-stu-id="02319-198">In your projects panel, type in the search box “pan content.”</span></span> <span data-ttu-id="02319-199">将该材料拖放到场景中的四面体。</span><span class="sxs-lookup"><span data-stu-id="02319-199">Drag that material on to the quad in your scene.</span></span> 

> <span data-ttu-id="02319-200">注意：“平移内容”材料未包含在 MRTK 中，它是此模块的资产包中的一个资产，已在前面的课程中导入。</span><span class="sxs-lookup"><span data-stu-id="02319-200">Note: The "Pan content" material is not included in the MRTK, but it is an asset in this module's asset package, as imported in previous lessons.</span></span> 

> <span data-ttu-id="02319-201">注意：添加平移内容时，其外观可能像是已拉伸过。</span><span class="sxs-lookup"><span data-stu-id="02319-201">Note: When you add the pan content, it may look stretched.</span></span> <span data-ttu-id="02319-202">若要修正，可以调整四面体大小的 x、y 和 z 值，直到其外观让你满意。</span><span class="sxs-lookup"><span data-stu-id="02319-202">You can fix this by adjusting the values x, y and z values of the size of the quad until you are satisfied with the way it looks.</span></span>

<span data-ttu-id="02319-203">若要使用平移手势，需要在对象中添加一个碰撞体。</span><span class="sxs-lookup"><span data-stu-id="02319-203">To use the pan gesture, you will need a collider on your object.</span></span> <span data-ttu-id="02319-204">你可能会看到，四面体已有一个网格碰撞体。</span><span class="sxs-lookup"><span data-stu-id="02319-204">You may see the quad already has a mesh collider.</span></span> <span data-ttu-id="02319-205">但是，该网格碰撞体并不理想，因为它非常小，很难将其选中。</span><span class="sxs-lookup"><span data-stu-id="02319-205">However, the mesh collider is not ideal, because it is extremely thin and difficult to select.</span></span> <span data-ttu-id="02319-206">我们建议将网格碰撞体替换为盒碰撞体。</span><span class="sxs-lookup"><span data-stu-id="02319-206">We suggest replacing the mesh collider with a box collider.</span></span>

5. <span data-ttu-id="02319-207">右键单击四面体上的网格碰撞器（在检查器面板中），然后单击“删除组件”将其删除。</span><span class="sxs-lookup"><span data-stu-id="02319-207">Right click the mesh collider that’s on the quad (in the inspector panel) then remove it by clicking “remove component.”</span></span> 
   <span data-ttu-id="02319-208">![Lesson5 Chapter2 Step5im](images/Lesson5_chapter2_step5im.PNG)</span><span class="sxs-lookup"><span data-stu-id="02319-208">![Lesson5 Chapter2 Step5im](images/Lesson5_chapter2_step5im.PNG)</span></span>

6. <span data-ttu-id="02319-209">现在，通过单击“添加组件”并搜索“盒碰撞体”，来添加盒碰撞体。</span><span class="sxs-lookup"><span data-stu-id="02319-209">Now add the box collider by clicking “add component” and searching “box collider.”</span></span> <span data-ttu-id="02319-210">默认添加的盒碰撞体仍旧太小，因此，请单击“编辑碰撞体”按钮对其进行编辑。</span><span class="sxs-lookup"><span data-stu-id="02319-210">The default added box collider is still too thin, so click the “edit collider” button to edit it.</span></span> <span data-ttu-id="02319-211">按下该对象后，可以使用 x、y 和 z 值或场景编辑器中的元素来调整其大小。</span><span class="sxs-lookup"><span data-stu-id="02319-211">When it’s pressed in, you can adjust the size using the x, y and z values or the elements in the scene editor.</span></span> <span data-ttu-id="02319-212">对于本示例，我们希望盒碰撞体稍微靠在四面体的后面。</span><span class="sxs-lookup"><span data-stu-id="02319-212">For our example, we want to extend the box collider a little behind the quad.</span></span> <span data-ttu-id="02319-213">在场景编辑器中，将盒碰撞体往后朝外拖动（参考下图）。</span><span class="sxs-lookup"><span data-stu-id="02319-213">In the scene editor, drag the box collider from the back, outwards (see the image below).</span></span> <span data-ttu-id="02319-214">这样，用户不仅可以使用手指，而且还可以用手滚动浏览。</span><span class="sxs-lookup"><span data-stu-id="02319-214">What this will do is allow the user to not only use their finger, but their entire hand to scroll.</span></span> 
    <span data-ttu-id="02319-215">![Lesson5 Chapter2 Step6im](images/Lesson5_chapter2_step6im.PNG)</span><span class="sxs-lookup"><span data-stu-id="02319-215">![Lesson5 Chapter2 Step6im](images/Lesson5_chapter2_step6im.PNG)</span></span>
7. <span data-ttu-id="02319-216">使对象具有交互能力。</span><span class="sxs-lookup"><span data-stu-id="02319-216">Make it interactive.</span></span> <span data-ttu-id="02319-217">由于我们想要直接与四面体交互，因此需要使用“近距交互可触摸”组件（在第 4 课中，我们也使用了此组件来从八面体播放音乐）。</span><span class="sxs-lookup"><span data-stu-id="02319-217">Since we want to interact with the quad directly, we want to use the “near interaction touchable” component (we also used this in Lesson 4 for playing music from the octa).</span></span> <span data-ttu-id="02319-218">单击“添加组件”，搜索“近距交互可触摸”并将其选中，如下图所示。</span><span class="sxs-lookup"><span data-stu-id="02319-218">Click “add component” and search for “near interaction touchable” and select it, as shown in the images below.</span></span> 

8. <span data-ttu-id="02319-219">添加识别平移手势的功能。</span><span class="sxs-lookup"><span data-stu-id="02319-219">Add the ability to recognize the pan gesture.</span></span> <span data-ttu-id="02319-220">单击“添加组件”并键入“手动交互平移”。</span><span class="sxs-lookup"><span data-stu-id="02319-220">Click “add component” and type “hand interaction pan.”</span></span> <span data-ttu-id="02319-221">可以选择手部跟踪光线（可从远处平移）或食指。</span><span class="sxs-lookup"><span data-stu-id="02319-221">You will have a choice between hand ray (allowing you to pan from a distance) and index finger.</span></span> <span data-ttu-id="02319-222">本示例将其保留为食指。</span><span class="sxs-lookup"><span data-stu-id="02319-222">For this example, leave it at index finger.</span></span> 
    <span data-ttu-id="02319-223">![Lesson5 Chapter2 Step7 8Im](images/Lesson5_chapter2_step7-8im.PNG)</span><span class="sxs-lookup"><span data-stu-id="02319-223">![Lesson5 Chapter2 Step7 8Im](images/Lesson5_chapter2_step7-8im.PNG)</span></span>

![Lesson5 Chapter2 Step8im](images/Lesson5_chapter2_step8im.PNG)

9. <span data-ttu-id="02319-225">在手动交互平移脚本中，选中“水平锁定”和“垂直锁定”复选框会锁定相应方向的移动。</span><span class="sxs-lookup"><span data-stu-id="02319-225">In the hand interaction pan script, the “lock horizontal” and “lock vertical” checkboxes will lock the movements, respectively.</span></span> <span data-ttu-id="02319-226">扭曲纹理设置会使纹理（纹理映射）遵循用户的平移动作。</span><span class="sxs-lookup"><span data-stu-id="02319-226">The wrap texture settings will make the texture (texture mapping) follow the user's pan movements.</span></span> <span data-ttu-id="02319-227">本示例选中了该框。</span><span class="sxs-lookup"><span data-stu-id="02319-227">For this example, we are going to check that box.</span></span> <span data-ttu-id="02319-228">此外，还有一个“活动速率”复选框，如果不选中它，平移手势将不起作用。</span><span class="sxs-lookup"><span data-stu-id="02319-228">There is also “velocity active” which, if unchecked, the pan gesture will not work.</span></span> <span data-ttu-id="02319-229">同样请选中此框。</span><span class="sxs-lookup"><span data-stu-id="02319-229">Check this box as well.</span></span> <span data-ttu-id="02319-230">现已创建一个启用了平移的四面体。</span><span class="sxs-lookup"><span data-stu-id="02319-230">Now you should have a pan-enabled quad.</span></span>

   

   <span data-ttu-id="02319-231">接下来，我们了解如何平移 3D 对象。</span><span class="sxs-lookup"><span data-stu-id="02319-231">Next, we will learn how to pan 3D objects.</span></span> 

10. <span data-ttu-id="02319-232">右键单击四面体对象，选择 3D 对象，然后单击“立方体”。</span><span class="sxs-lookup"><span data-stu-id="02319-232">Right click the quad object, select 3D object then click “cube.”</span></span> <span data-ttu-id="02319-233">缩放该立方体，使其维度大致为 x = 0.1，y = 0.1 和 z = 0.1。</span><span class="sxs-lookup"><span data-stu-id="02319-233">Scale the cube so that it’s roughly x = 0.1, y = 0.1 and z = 0.1.</span></span> <span data-ttu-id="02319-234">复制该立方体 3 次（右键单击该立方体并按“复制”，或按 Ctrl/Command 键 + D）。</span><span class="sxs-lookup"><span data-stu-id="02319-234">Copy that cube 3 times (by right clicking the cube and pressing duplicate, or by pressing control/command D).</span></span> <span data-ttu-id="02319-235">以均匀的间距排布这些立方体。</span><span class="sxs-lookup"><span data-stu-id="02319-235">Space them out evenly.</span></span> <span data-ttu-id="02319-236">场景应如下图所示。</span><span class="sxs-lookup"><span data-stu-id="02319-236">Your scene should look similar to the picture below.</span></span>

![Lesson5 Chapter2 Step10im](images/Lesson5_chapter2_step10im.PNG)







11. <span data-ttu-id="02319-238">再次选择四面体，在手动交互平移脚本下，我们需要为每个立方体设置平移操作。</span><span class="sxs-lookup"><span data-stu-id="02319-238">Select the quad again, and under the hand interaction pan script, we want to set the pan actions to each of the cubes.</span></span> <span data-ttu-id="02319-239">在“平移事件接收器”下，我们需要指定接收事件的对象数。</span><span class="sxs-lookup"><span data-stu-id="02319-239">Under “pan event receivers” we want to specify the number of objects that are receiving the event.</span></span> <span data-ttu-id="02319-240">由于存在 4 个立方体，因此请键入“4”并按 Enter。</span><span class="sxs-lookup"><span data-stu-id="02319-240">Since there are 4 cubes, type “4” and press enter.</span></span> <span data-ttu-id="02319-241">应会显示 4 个空字段。</span><span class="sxs-lookup"><span data-stu-id="02319-241">4 empty fields should appear.</span></span>


![Lesson5 Chapter2 Step11im](images/Lesson5_chapter2_step11im.PNG)



12. <span data-ttu-id="02319-243">将每个立方体拖入每个空元素槽。</span><span class="sxs-lookup"><span data-stu-id="02319-243">Drag each of the cubes in to each of the empty element slots.</span></span>
     <span data-ttu-id="02319-244">![Lesson5 Chapter2 Step12im](images/Lesson5_chapter2_step12im.PNG)</span><span class="sxs-lookup"><span data-stu-id="02319-244">![Lesson5 Chapter2 Step12im](images/Lesson5_chapter2_step12im.PNG)</span></span>
    
13. <span data-ttu-id="02319-245">将“平移移动”脚本添加到所有立方体。</span><span class="sxs-lookup"><span data-stu-id="02319-245">Add the “move with pan” script to all of the cubes.</span></span> <span data-ttu-id="02319-246">为此，请在按住 Ctrl/Command 键的同时选择每个对象。</span><span class="sxs-lookup"><span data-stu-id="02319-246">To do this, press and hold control/command and select each object.</span></span> <span data-ttu-id="02319-247">然后，在检查器面板中，单击“添加组件”并搜索“平移移动”。</span><span class="sxs-lookup"><span data-stu-id="02319-247">Then, in the inspector panel, click “add component” and search for “move with pan.”</span></span> <span data-ttu-id="02319-248">单击脚本，它随即会添加到每个立方体。</span><span class="sxs-lookup"><span data-stu-id="02319-248">Click the script and it will be added to each cube.</span></span> <span data-ttu-id="02319-249">现在，使用平移手势即可移动 3D 对象！</span><span class="sxs-lookup"><span data-stu-id="02319-249">Now the 3D objects will move with your pan gesture!</span></span> <span data-ttu-id="02319-250">如果删除了四面体上的网格渲染器，则四面体会随即不可见，只能通过 3D 对象列表来平移它。</span><span class="sxs-lookup"><span data-stu-id="02319-250">If you remove the mesh render on your quad, you should now have an invisible quad where you can pan through a list of 3D objects.</span></span>

### <a name="eye-tracking"></a><span data-ttu-id="02319-251">眼动跟踪</span><span class="sxs-lookup"><span data-stu-id="02319-251">Eye Tracking</span></span>

<span data-ttu-id="02319-252">本章探讨如何在演示中启用眼动跟踪。</span><span class="sxs-lookup"><span data-stu-id="02319-252">In this chapter, we will explore how to enable eye tracking in our demo.</span></span> <span data-ttu-id="02319-253">我们将在眼睛凝视 3D 菜单项时，缓慢地将其旋转。</span><span class="sxs-lookup"><span data-stu-id="02319-253">We will slowly spin our 3D menu items when they are being gazed upon with eye gaze.</span></span> <span data-ttu-id="02319-254">此外，在选择所凝视的项时，我们还会触发一种有趣的效果。</span><span class="sxs-lookup"><span data-stu-id="02319-254">We will also trigger a fun effect when the gazed-upon item is selected.</span></span>

1. <span data-ttu-id="02319-255">请确保已正确配置混合现实工具包配置文件。</span><span class="sxs-lookup"><span data-stu-id="02319-255">Ensure the Mixed Reality Toolkit profiles are properly configured.</span></span> <span data-ttu-id="02319-256">在撰写本文时，混合现实工具包配置文件配置默认并不包括眼动跟踪功能。</span><span class="sxs-lookup"><span data-stu-id="02319-256">As of this writing, the mixed reality toolkit profile configuration does not include eye tracking capabilities by default.</span></span> <span data-ttu-id="02319-257">若要添加眼动跟踪功能，请遵照[混合现实工具包文档](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/EyeTracking/EyeTracking_BasicSetup.html#setting-up-the-mrtk-profiles-required-for-eye-tracking  )的“设置眼动跟踪所需的 MRTK 配置文件”部分中提供的说明。</span><span class="sxs-lookup"><span data-stu-id="02319-257">To add eye tracking capabilities, follow the instructions in the “Setting up the MRTK profiles required for Eye Tracking” section as outlined in the [Mixed Reality Toolkit Documentation](https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/EyeTracking/EyeTracking_BasicSetup.html#setting-up-the-mrtk-profiles-required-for-eye-tracking  ).</span></span> <span data-ttu-id="02319-258">确保遵循上述文档链接中的所有剩余步骤正确配置眼动跟踪，包括在 GazeProvider（附加到相机的组件）中启用眼动跟踪，并在 Unity 编辑器中启用眼动跟踪的模拟。</span><span class="sxs-lookup"><span data-stu-id="02319-258">Ensure that eye tracking is properly configured by following any remaining steps in the documentation link above, including enabling eye tracking in GazeProvider (component attached to camera) and enabling simulation of eye tracking in the Unity editor.</span></span> <span data-ttu-id="02319-259">请注意，将来的 MRTK 版本默认可能会包含眼动跟踪。</span><span class="sxs-lookup"><span data-stu-id="02319-259">Note that future version of the MRTK may include eye tracking by default.</span></span>

    <span data-ttu-id="02319-260">上述链接提供了有关以下操作的简要说明：</span><span class="sxs-lookup"><span data-stu-id="02319-260">The link above provides brief instructions for:</span></span>

    - <span data-ttu-id="02319-261">创建可在 MRTK 配置文件中使用的视线数据提供程序</span><span class="sxs-lookup"><span data-stu-id="02319-261">Creating the Eye Gaze Data Provider for use in the MRTK Profile</span></span>
    - <span data-ttu-id="02319-262">在视线提供程序中启用眼动跟踪</span><span class="sxs-lookup"><span data-stu-id="02319-262">Enabling eye tracking in the Gaze Provider</span></span>
    - <span data-ttu-id="02319-263">在编辑器中模拟眼动跟踪的设置</span><span class="sxs-lookup"><span data-stu-id="02319-263">Set up for simulating eye tracking in the editor</span></span>
    - <span data-ttu-id="02319-264">编辑 Visual Studio 解决方案的功能，以便在生成的应用程序中进行眼动跟踪</span><span class="sxs-lookup"><span data-stu-id="02319-264">Editing the Visual Studio solution's capabilities to allow eye tracking in the built application</span></span>

2. <span data-ttu-id="02319-265">将眼动跟踪目标组件添加到目标对象。</span><span class="sxs-lookup"><span data-stu-id="02319-265">Add the Eye Tracking Target component to target objects.</span></span> <span data-ttu-id="02319-266">要使某个对象对凝视事件做出响应，需在我们要使用视线交互的每个对象中添加 EyeTrackingTarget 组件。</span><span class="sxs-lookup"><span data-stu-id="02319-266">To allow an object to respond to eye gaze events, we will need to add the EyeTrackingTarget component on each object that we wish to interact with using eye gaze.</span></span> <span data-ttu-id="02319-267">将此组件添加到网格集合中的每个（共九个）3D 对象。</span><span class="sxs-lookup"><span data-stu-id="02319-267">Add this component to each of the nine 3D objects that are part of the grid collection.</span></span> <span data-ttu-id="02319-268">提示：在层次结构中选择多个项可以批量添加 EyeTrackingTarget 组件。</span><span class="sxs-lookup"><span data-stu-id="02319-268">Tip: select multiple items in the hierarchy to bulk-add the EyeTrackingTarget component.</span></span>
    <span data-ttu-id="02319-269">![Lesson5 Chapter3 Step2](images/Lesson5Chapter3Step2.JPG)</span><span class="sxs-lookup"><span data-stu-id="02319-269">![Lesson5 Chapter3 Step2](images/Lesson5Chapter3Step2.JPG)</span></span>

3. <span data-ttu-id="02319-270">接下来，我们将添加 EyeTrackingTutorialDemo 脚本以完成一些有意思的交互。</span><span class="sxs-lookup"><span data-stu-id="02319-270">Next we will add the EyeTrackingTutorialDemo script for some exciting interactions.</span></span> <span data-ttu-id="02319-271">EyeTrackingTutorialDemo 脚本已包含在本教程系列的存储库中，默认未包含在混合现实工具包中。</span><span class="sxs-lookup"><span data-stu-id="02319-271">The EyeTrackingTutorialDemo script is included as part of this tutorial series’ repository and is not included by default with the Mixed Reality Toolkit.</span></span> <span data-ttu-id="02319-272">对于网格集合中的每个 3D 对象，请通过在“添加组件”菜单中搜索该组件来添加 EyeTrackingTutorialDemo 脚本。</span><span class="sxs-lookup"><span data-stu-id="02319-272">For each 3D object in the grid collection, add the EyeTrackingTutorialDemo script by searching for the component in the “Add Component” menu.</span></span>
   <span data-ttu-id="02319-273">![Lesson5 Chapter3 Step3](images/Lesson5Chapter3Step3.JPG)</span><span class="sxs-lookup"><span data-stu-id="02319-273">![Lesson5 Chapter3 Step3](images/Lesson5Chapter3Step3.JPG)</span></span>

   4. <span data-ttu-id="02319-274">在注视目标的同时旋转对象。</span><span class="sxs-lookup"><span data-stu-id="02319-274">Spin the object while looking at the target.</span></span> <span data-ttu-id="02319-275">我们希望将此 3D 对象配置为在注视时旋转。</span><span class="sxs-lookup"><span data-stu-id="02319-275">We would like to configure our 3D object to spin while we are looking at it.</span></span> <span data-ttu-id="02319-276">为此，请在 EyeTrackingTarget 组件的“注视目标时”节中插入一个新字段，如下图所示。</span><span class="sxs-lookup"><span data-stu-id="02319-276">To do this, insert a new field in the “While Looking At Target” section of the EyeTrackingTarget component, as shown in the image below.</span></span> 

<span data-ttu-id="02319-277">![Lesson5 Chapter3 Step4a](images/Lesson5Chapter3Step4a.JPG)
![Lesson5 Chapter3 Step4b](images/Lesson5Chapter3Step4b.JPG)</span><span class="sxs-lookup"><span data-stu-id="02319-277">![Lesson5 Chapter3 Step4a](images/Lesson5Chapter3Step4a.JPG)
![Lesson5 Chapter3 Step4b](images/Lesson5Chapter3Step4b.JPG)</span></span>



<span data-ttu-id="02319-278">在新建的字段中，将当前游戏对象添加到空字段，并选择“EyeTrackingTutorialDemo”>“RotateTarget()”，如下图所示。</span><span class="sxs-lookup"><span data-stu-id="02319-278">In newly created field, add the current Game Object to the empty field, and select EyeTrackingTutorialDemo > RotateTarget() as shown in the image below.</span></span> <span data-ttu-id="02319-279">现在，该 3D 对象已配置为在使用眼动跟踪凝视它时会自动旋转。</span><span class="sxs-lookup"><span data-stu-id="02319-279">Now the 3D object is configured to spin when it is being gazed upon with eye tracking.</span></span> 

5. <span data-ttu-id="02319-280">将功能到在执行选择（隔空敲击，或讲出“选择”）时凝视的“光点目标”。</span><span class="sxs-lookup"><span data-stu-id="02319-280">Add in ability to “blip target” that is being gazed at upon select (air-tap, or saying “select”).</span></span> <span data-ttu-id="02319-281">类似于步骤 4，我们需要通过将“EyeTrackingTutorialDemo”>“BlipTarget()”分配到 EyeTrackingTarget 组件的游戏对象“select()”字段来触发它，如下图所示。</span><span class="sxs-lookup"><span data-stu-id="02319-281">Similar to Step 4, we want to trigger EyeTrackingTutorialDemo > BlipTarget() by assigning it to the Game Object’s “Select()” field of the EyeTrackingTarget component, as shown in the figure below.</span></span> <span data-ttu-id="02319-282">完成此项配置后，你会注意到，每当触发一个选择操作（例如隔空敲击或发出语音命令“选择”），游戏对象中都会出现一个微小的光点。</span><span class="sxs-lookup"><span data-stu-id="02319-282">With this now configured, you will notice a slight blip in the game object whenever you trigger a select action, such as air-tap or the voice command “select.”</span></span> 
    <span data-ttu-id="02319-283">![Lesson5 Chapter3 Step5](images/Lesson5Chapter3Step5.JPG)</span><span class="sxs-lookup"><span data-stu-id="02319-283">![Lesson5 Chapter3 Step5](images/Lesson5Chapter3Step5.JPG)</span></span>
6. <span data-ttu-id="02319-284">在 HoloLens 2 中生成之前，请确保已正确配置眼动跟踪功能。</span><span class="sxs-lookup"><span data-stu-id="02319-284">Ensure eye tracking capabilities are properly configured before building to HoloLens 2.</span></span> <span data-ttu-id="02319-285">在撰写本文时，无法在 Unity 中设置视线输入（眼动跟踪）功能。</span><span class="sxs-lookup"><span data-stu-id="02319-285">As of this writing, Unity does not yet have the ability to set the gaze input (for eye tracking) capability.</span></span> <span data-ttu-id="02319-286">必须设置此功能，才能在 HoloLens 2 中运行眼动跟踪。</span><span class="sxs-lookup"><span data-stu-id="02319-286">Setting this capability is required for eye tracking to work on the HoloLens 2.</span></span> <span data-ttu-id="02319-287">请遵照混合现实工具包文档中的以下说明启用视线输入功能： https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/EyeTracking/EyeTracking_BasicSetup.html#testing-your-unity-app-on-a-hololens-2</span><span class="sxs-lookup"><span data-stu-id="02319-287">Follow these instructions on the mixed reality toolkit documentation to enable the gaze input capability: https://microsoft.github.io/MixedRealityToolkit-Unity/Documentation/EyeTracking/EyeTracking_BasicSetup.html#testing-your-unity-app-on-a-hololens-2</span></span> 


### <a name="congratulations"></a><span data-ttu-id="02319-288">祝贺你！</span><span class="sxs-lookup"><span data-stu-id="02319-288">Congratulations!</span></span> 
<span data-ttu-id="02319-289">现已将基本的眼动跟踪功能成功添加到应用程序。</span><span class="sxs-lookup"><span data-stu-id="02319-289">You’ve successfully added basic eye tracking capabilities to the application.</span></span> <span data-ttu-id="02319-290">这些操作仅为眼动跟踪实现的探索领域开了一个头。</span><span class="sxs-lookup"><span data-stu-id="02319-290">These actions are only the beginning of a world of possibilities with eye tracking.</span></span> <span data-ttu-id="02319-291">本章也是第 5 课的最后一个部分。在第 5 课中，我们学习了语音命令、平移手势和眼动跟踪等高级输入功能。</span><span class="sxs-lookup"><span data-stu-id="02319-291">This chapter also concludes lesson 5, where we learned about advanced input functionality such as voice commands, panning gestures, and eye tracking.</span></span> 

[<span data-ttu-id="02319-292">下一课：登月舱模块装配示例体验</span><span class="sxs-lookup"><span data-stu-id="02319-292">Next Lesson: Lunar Module Assembly Sample Experience</span></span>](mrlearning-base-ch6.md)

