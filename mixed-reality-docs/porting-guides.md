---
title: 移植指南
description: 说明如何移植现有 Windows Mixed reality 沉浸式应用程序执行步骤的演练。
author: ChimeraScorn
ms.author: cwhite
ms.date: 10/02/2018
ms.topic: article
keywords: 端口、 迁移、 unity、 中间件，引擎，UWP
ms.openlocfilehash: a4a8c78f1c45fd8e3b85a767d139bae9f67540e0
ms.sourcegitcommit: 384b0087899cd835a3a965f75c6f6c607c9edd1b
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/12/2019
ms.locfileid: "59592421"
---
# <a name="porting-guides"></a><span data-ttu-id="34b70-104">移植指南</span><span class="sxs-lookup"><span data-stu-id="34b70-104">Porting guides</span></span>

> [!NOTE]
> <span data-ttu-id="34b70-105">特定于 HoloLens 2 的更多指导[即将推出](index.md#news-and-notes)。</span><span class="sxs-lookup"><span data-stu-id="34b70-105">More guidance specific to HoloLens 2 [coming soon](index.md#news-and-notes).</span></span>

<span data-ttu-id="34b70-106">Windows 10 直接包括沉浸式和全息耳机的支持。</span><span class="sxs-lookup"><span data-stu-id="34b70-106">Windows 10 includes support for immersive and holographic headsets directly.</span></span> <span data-ttu-id="34b70-107">如果您已经生成如 Oculus Rift 或 HTC 欢跃另一台设备的内容，这些依赖项上存在上述操作系统的平台 API 的库。</span><span class="sxs-lookup"><span data-stu-id="34b70-107">If you have built content for another device such as the Oculus Rift or HTC Vive, these have dependencies on libraries that exist above the operating system's platform API.</span></span> <span data-ttu-id="34b70-108">将现有内容引入 Windows Mixed Reality 涉及重定目标到 Windows Api 的这些其他 sdk 的使用情况。</span><span class="sxs-lookup"><span data-stu-id="34b70-108">Bringing existing content over to Windows Mixed Reality involves retargeting usage of these other SDKs to the Windows APIs.</span></span> <span data-ttu-id="34b70-109">[混合现实的 Windows 平台 Api](https://docs.microsoft.com/uwp/api/Windows.Perception)仅适用于通用 Windows 平台 (UWP) 应用程序模型。</span><span class="sxs-lookup"><span data-stu-id="34b70-109">The [Windows platform APIs for mixed reality](https://docs.microsoft.com/uwp/api/Windows.Perception) only work in the Universal Windows Platform (UWP) app model.</span></span> <span data-ttu-id="34b70-110">因此如果您的应用程序尚未生成适用于 UWP，移植到 UWP 将移植体验的一部分。</span><span class="sxs-lookup"><span data-stu-id="34b70-110">So if your app is not already built for UWP, porting to UWP will be part of the porting experience.</span></span>

## <a name="porting-overview"></a><span data-ttu-id="34b70-111">迁移概述</span><span class="sxs-lookup"><span data-stu-id="34b70-111">Porting overview</span></span>

<span data-ttu-id="34b70-112">在高级别，这些是在移植现有内容所涉及的步骤：</span><span class="sxs-lookup"><span data-stu-id="34b70-112">At a high-level, these are the steps involved in porting existing content:</span></span>
1. <span data-ttu-id="34b70-113">**请确保您的电脑正在运行 Windows 10 Fall Creators Update (版本 16299)。**</span><span class="sxs-lookup"><span data-stu-id="34b70-113">**Make sure your PC is running the Windows 10 Fall Creators Update (16299).**</span></span> <span data-ttu-id="34b70-114">我们不再建议提前 Insider 跳过通道，请从接收预览生成的生成不是最稳定的混合的现实开发。</span><span class="sxs-lookup"><span data-stu-id="34b70-114">We no longer recommend receiving preview builds from the Insider Skip Ahead ring, as those builds won't be the most stable for mixed reality development.</span></span>
2. <span data-ttu-id="34b70-115">**升级到最新版本的图形或游戏引擎。**</span><span class="sxs-lookup"><span data-stu-id="34b70-115">**Upgrade to the latest version of your graphics or game engine.**</span></span> <span data-ttu-id="34b70-116">游戏引擎都需要支持 Windows 10 SDK 版本 10.0.15063.0 （在 2017 年 4 月发布） 或更高版本。</span><span class="sxs-lookup"><span data-stu-id="34b70-116">Game engines will need to support the Windows 10 SDK version 10.0.15063.0 (released in April 2017) or higher.</span></span>
3. <span data-ttu-id="34b70-117">**升级任何中间件、 插件或组件。**</span><span class="sxs-lookup"><span data-stu-id="34b70-117">**Upgrade any middleware, plug-ins or components.**</span></span> <span data-ttu-id="34b70-118">如果您的应用程序中包含的任何组件，它是一个好办法升级到最新版本。</span><span class="sxs-lookup"><span data-stu-id="34b70-118">If your app contains any components, it's a good idea to upgrade to the latest version.</span></span> <span data-ttu-id="34b70-119">较新版本的最常见的插件都适用于 UWP 的支持。</span><span class="sxs-lookup"><span data-stu-id="34b70-119">Newer versions of most common plug-ins have support for UWP.</span></span>
4. <span data-ttu-id="34b70-120">**删除重复的 Sdk 的依赖项**。</span><span class="sxs-lookup"><span data-stu-id="34b70-120">**Remove dependencies on duplicate SDKs**.</span></span> <span data-ttu-id="34b70-121">具体取决于你的内容所针对的设备，你将需要删除或有条件地编译出该 SDK (例如 SteamVR)，可改为针对 Windows Api。</span><span class="sxs-lookup"><span data-stu-id="34b70-121">Depending on which device your content was targeting, you'll need to remove or conditionally compile out that SDK (e.g. SteamVR) so you can target the Windows APIs instead.</span></span>
5. <span data-ttu-id="34b70-122">**解决生成问题。**</span><span class="sxs-lookup"><span data-stu-id="34b70-122">**Work through build issues.**</span></span> <span data-ttu-id="34b70-123">此时，移植练习是特定于您的应用程序、 在引擎和有组件依赖项。</span><span class="sxs-lookup"><span data-stu-id="34b70-123">At this point, the porting exercise is specific to your app, your engine, and the component dependencies you have.</span></span>

## <a name="common-porting-steps"></a><span data-ttu-id="34b70-124">常见的迁移步骤</span><span class="sxs-lookup"><span data-stu-id="34b70-124">Common porting steps</span></span>

### <a name="common-step-1-make-sure-you-have-the-right-development-hardware"></a><span data-ttu-id="34b70-125">常见的步骤 1:请确保具有正确的开发硬件</span><span class="sxs-lookup"><span data-stu-id="34b70-125">Common step 1: Make sure you have the right development hardware</span></span>

<span data-ttu-id="34b70-126">[安装的工具](install-the-tools.md#for-immersive-vr-headset-development)页列出了建议的开发硬件。</span><span class="sxs-lookup"><span data-stu-id="34b70-126">The [install the tools](install-the-tools.md#for-immersive-vr-headset-development) page lists the recommended development hardware.</span></span>

### <a name="common-step-2-upgrade-to-the-latest-flight-of-windows-10"></a><span data-ttu-id="34b70-127">通用步骤 2:升级到最新的 Windows 10 飞行</span><span class="sxs-lookup"><span data-stu-id="34b70-127">Common step 2: Upgrade to the latest flight of Windows 10</span></span>

<span data-ttu-id="34b70-128">Windows Mixed Reality 平台仍处于积极开发阶段，并为最有效，我们建议在"Windows Insider Fast"航班上。</span><span class="sxs-lookup"><span data-stu-id="34b70-128">The Windows Mixed Reality platform is still under active development, and to be most effective, we recommend being on the "Windows Insider Fast" flight.</span></span> <span data-ttu-id="34b70-129">为了有权访问 windows 航班，您需要向[加入 Windows 预览体验计划](https://insider.windows.com/)。</span><span class="sxs-lookup"><span data-stu-id="34b70-129">In order to have access to windows flights, you will need to [join the Windows Insider Program](https://insider.windows.com/).</span></span>
1. <span data-ttu-id="34b70-130">安装[Windows 10 创意者更新](https://www.microsoft.com/software-download/windows10)</span><span class="sxs-lookup"><span data-stu-id="34b70-130">Install the [Windows 10 Creators Update](https://www.microsoft.com/software-download/windows10)</span></span>
2. <span data-ttu-id="34b70-131">[加入](https://insider.windows.com/)Windows 预览体验计划。</span><span class="sxs-lookup"><span data-stu-id="34b70-131">[Join](https://insider.windows.com/) the Windows Insider Program.</span></span>
3. <span data-ttu-id="34b70-132">启用[开发人员模式](https://docs.microsoft.com/windows/uwp/get-started/enable-your-device-for-development)</span><span class="sxs-lookup"><span data-stu-id="34b70-132">Enable [Developer Mode](https://docs.microsoft.com/windows/uwp/get-started/enable-your-device-for-development)</span></span>
4. <span data-ttu-id="34b70-133">切换到[快速 Windows Insider 航班](https://blogs.technet.microsoft.com/uktechnet/2016/07/01/joining-insider-preview)通过设置--> 更新和安全性部分</span><span class="sxs-lookup"><span data-stu-id="34b70-133">Switch to the [Windows Insider Fast flights](https://blogs.technet.microsoft.com/uktechnet/2016/07/01/joining-insider-preview) through Settings --> Update & Security Section</span></span>

### <a name="common-step-3-upgrade-to-the-most-recent-build-of-visual-studio"></a><span data-ttu-id="34b70-134">常见的步骤 3:升级到最新版本的 Visual Studio</span><span class="sxs-lookup"><span data-stu-id="34b70-134">Common step 3: Upgrade to the most recent build of Visual Studio</span></span>
* <span data-ttu-id="34b70-135">请参阅[安装的工具](install-the-tools.md#installation-checklist)页下 Visual Studio 2017</span><span class="sxs-lookup"><span data-stu-id="34b70-135">Please see [Install the tools](install-the-tools.md#installation-checklist) page under Visual Studio 2017</span></span>

### <a name="common-step-4-be-ready-for-the-store"></a><span data-ttu-id="34b70-136">通用步骤 4:为应用商店做好准备</span><span class="sxs-lookup"><span data-stu-id="34b70-136">Common step 4: Be Ready for The Store</span></span>
* <span data-ttu-id="34b70-137">使用[Windows 应用认证工具包](https://developer.microsoft.com/windows/develop/app-certification-kit)(又称 WACK) 尽早并经常 ！</span><span class="sxs-lookup"><span data-stu-id="34b70-137">Use [Windows App Certification Kit](https://developer.microsoft.com/windows/develop/app-certification-kit) (aka WACK) early and often!</span></span>
* <span data-ttu-id="34b70-138">使用[可移植性分析器](https://docs.microsoft.com/dotnet/standard/portability-analyzer)([下载](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer))</span><span class="sxs-lookup"><span data-stu-id="34b70-138">Use [Portability Analyzer](https://docs.microsoft.com/dotnet/standard/portability-analyzer) ([Download](https://marketplace.visualstudio.com/items?itemName=ConnieYau.NETPortabilityAnalyzer))</span></span>

### <a name="common-step-5-choose-the-correct-adapter"></a><span data-ttu-id="34b70-139">常见的步骤 5:选择正确的适配器</span><span class="sxs-lookup"><span data-stu-id="34b70-139">Common step 5: Choose the correct Adapter</span></span>
* <span data-ttu-id="34b70-140">在系统中使用两个 Gpu 的笔记本等[面向正确的适配器](rendering-in-directx.md#hybrid-graphics-pcs-and-mixed-reality-applications)。</span><span class="sxs-lookup"><span data-stu-id="34b70-140">In systems like notebooks with two GPUs, [target the correct adapter](rendering-in-directx.md#hybrid-graphics-pcs-and-mixed-reality-applications).</span></span> <span data-ttu-id="34b70-141">这适用于 Unity 应用，此外本机 DirectX 应用程序，其中创建，显式或隐式 ID3D11Device （媒体基础），其功能。</span><span class="sxs-lookup"><span data-stu-id="34b70-141">This applies to Unity apps, in addition to native DirectX apps, where a ID3D11Device is created, either explicitly or implicitly (Media Foundation), for its functionality.</span></span>

## <a name="unity-porting-guidance"></a><span data-ttu-id="34b70-142">Unity 的移植指南</span><span class="sxs-lookup"><span data-stu-id="34b70-142">Unity porting guidance</span></span>

### <a name="unity-step-1-follow-the-common-porting-steps"></a><span data-ttu-id="34b70-143">Unity 步骤 1:请按照常见的迁移步骤</span><span class="sxs-lookup"><span data-stu-id="34b70-143">Unity step 1: Follow the common porting steps</span></span>

<span data-ttu-id="34b70-144">遵循所有常见步骤。</span><span class="sxs-lookup"><span data-stu-id="34b70-144">Follow all of the common steps.</span></span> <span data-ttu-id="34b70-145">当在步骤 #3 中，选择**使用 Unity 的游戏开发**工作负荷。</span><span class="sxs-lookup"><span data-stu-id="34b70-145">When in step #3, select the **Game Development with Unity** workload.</span></span> <span data-ttu-id="34b70-146">因为您将从下面的说明安装 Unity 的较新版本，可能会取消选择 Unity 编辑器的可选组件。</span><span class="sxs-lookup"><span data-stu-id="34b70-146">You may deselect the Unity Editor optional component since you'll be installing a newer version of Unity from the instructions below.</span></span>

### <a name="unity-step-2-upgrade-to-the-latest-public-build-of-unity-with-windows-mr-support"></a><span data-ttu-id="34b70-147">Unity 步骤 2:升级到最新的公共版本的 Windows MR 支持 Unity</span><span class="sxs-lookup"><span data-stu-id="34b70-147">Unity step 2: Upgrade to the latest public build of Unity with Windows MR Support</span></span>
1. <span data-ttu-id="34b70-148">下载最新[建议使用公共生成的 Unity](install-the-tools.md)与混合现实支持。</span><span class="sxs-lookup"><span data-stu-id="34b70-148">Download the latest [recommended public build of Unity](install-the-tools.md) with mixed reality support.</span></span>
2. <span data-ttu-id="34b70-149">在开始之前保存您的项目的副本</span><span class="sxs-lookup"><span data-stu-id="34b70-149">Save a copy of your project before you get started</span></span>
3. <span data-ttu-id="34b70-150">审阅[文档](https://docs.unity3d.com/Manual/UpgradeGuides.html)从 Unity 移植上可用。</span><span class="sxs-lookup"><span data-stu-id="34b70-150">Review the [documentation](https://docs.unity3d.com/Manual/UpgradeGuides.html) available from Unity on porting.</span></span>
4. <span data-ttu-id="34b70-151">请按照[说明](https://docs.unity3d.com/Manual/APIUpdater.html)上 Unity 的站点以使用其自动 API 更新程序</span><span class="sxs-lookup"><span data-stu-id="34b70-151">Follow the [instructions](https://docs.unity3d.com/Manual/APIUpdater.html) on Unity's site for using their automatic API updater</span></span>
5. <span data-ttu-id="34b70-152">检查并查看是否存在以使项目运行，所需的其他更改，完成任何剩余的错误和警告。</span><span class="sxs-lookup"><span data-stu-id="34b70-152">Check and see if there are additional changes that you need to make to get your project running, and work through any remaining errors and warnings.</span></span> <span data-ttu-id="34b70-153">注意：如果你依赖的中间件，可能需要更新该中间件，若要开始 （在下面的步骤 3 中更多详细信息）。</span><span class="sxs-lookup"><span data-stu-id="34b70-153">Note: If you have middleware that you depend on, you may need to update that middleware to get going (more details in step 3 below).</span></span>

### <a name="unity-step-3-upgrade-your-middleware-to-the-latest-versions"></a><span data-ttu-id="34b70-154">Unity 步骤 3:升级到最新版本的中间件</span><span class="sxs-lookup"><span data-stu-id="34b70-154">Unity step 3: Upgrade your middleware to the latest versions</span></span>

<span data-ttu-id="34b70-155">使用 Unity 的任何更新，则很可能需要更新您的游戏或应用程序依赖于的一个或多个中间件包。</span><span class="sxs-lookup"><span data-stu-id="34b70-155">With any Unity update, there is a good chance that you need to update one or more middleware packages that your game or application depends on.</span></span> <span data-ttu-id="34b70-156">此外，最新版本的所有中间件会增加您成功的可能性的移植过程的其余部分。</span><span class="sxs-lookup"><span data-stu-id="34b70-156">Additionally, being on the latest version of all of your middleware will increase your likelihood of success throughout the rest of the porting process.</span></span> <span data-ttu-id="34b70-157">许多中间件包最近添加了支持的通用 Windows 平台 (UWP)，并升级到最新版本将让您充分利用该工作。</span><span class="sxs-lookup"><span data-stu-id="34b70-157">Many middleware packages have recently added support for Universal Windows Platform (UWP), and upgrading to the most recent versions will let you leverage that work.</span></span>

### <a name="unity-step-4-target-your-application-to-run-on-universal-windows-platform-uwp"></a><span data-ttu-id="34b70-158">Unity 步骤 4:目标应用程序运行在通用 Windows 平台 (UWP)</span><span class="sxs-lookup"><span data-stu-id="34b70-158">Unity step 4: Target your application to run on Universal Windows Platform (UWP)</span></span>

<span data-ttu-id="34b70-159">安装工具后，你需要获取为通用 Windows 应用运行的应用程序。</span><span class="sxs-lookup"><span data-stu-id="34b70-159">After installing the tools, you need to get your app running as a Universal Windows app.</span></span>
* <span data-ttu-id="34b70-160">请按照[详细的步骤的演练中全程](https://unity3d.com/partners/microsoft/porting-guides)通过 Unity 提供。</span><span class="sxs-lookup"><span data-stu-id="34b70-160">Follow the [detailed step by step walk through](https://unity3d.com/partners/microsoft/porting-guides) provided by Unity.</span></span> <span data-ttu-id="34b70-161">请注意，应始终保持最新 LTS 版本 （任何 20xx.4 发行版） 的 Windows MR 上。</span><span class="sxs-lookup"><span data-stu-id="34b70-161">Please note that you should stay on the latest LTS release (any 20xx.4 release) for Windows MR.</span></span>
* <span data-ttu-id="34b70-162">有关更多的 UWP 开发资源，看一看[Windows 10 游戏开发指南](https://docs.microsoft.com/windows/uwp/gaming/e2e)。</span><span class="sxs-lookup"><span data-stu-id="34b70-162">For more UWP development resources, take a look at the [Windows 10 game development guide](https://docs.microsoft.com/windows/uwp/gaming/e2e).</span></span>
* <span data-ttu-id="34b70-163">请注意，Unity 会继续改进 IL2CPP 支持;IL2CPP 会使某些 UWP 端口容易。</span><span class="sxs-lookup"><span data-stu-id="34b70-163">Please note that Unity continues to improve IL2CPP support; IL2CPP makes some UWP ports significantly easier.</span></span> <span data-ttu-id="34b70-164">如果当前要面向的.Net 后端脚本，则应考虑转换而是利用 IL2CPP 后端。</span><span class="sxs-lookup"><span data-stu-id="34b70-164">If you are currently targeting the .Net scripting backend, you should consider converting to leverage the IL2CPP backend instead.</span></span>

<span data-ttu-id="34b70-165">注意：如果你的应用程序有任何依赖项上设备的特定服务，例如匹配，从而使从流，需要在此步骤中禁用它们。</span><span class="sxs-lookup"><span data-stu-id="34b70-165">Note: If your application has any dependencies on device specific services, such as match making from Steam, you will need to disable them at this step.</span></span> <span data-ttu-id="34b70-166">在更高版本时，你可以连接到 Windows 提供的等效服务。</span><span class="sxs-lookup"><span data-stu-id="34b70-166">At a later time, you can hook up to the equivalent services that Windows provides.</span></span>

### <a name="unity-step-5-deprecated"></a><span data-ttu-id="34b70-167">Unity 步骤 5:（已弃用）</span><span class="sxs-lookup"><span data-stu-id="34b70-167">Unity step 5: (Deprecated)</span></span>

<span data-ttu-id="34b70-168">步骤 5 不再是必需的。</span><span class="sxs-lookup"><span data-stu-id="34b70-168">Step 5 is no longer required.</span></span> <span data-ttu-id="34b70-169">以便对索引步骤保持不变，我们将从此处离开它。</span><span class="sxs-lookup"><span data-stu-id="34b70-169">We are leaving it here so that the indexing of steps remains the same.</span></span>

### <a name="unity-step-6-get-your-windows-mixed-reality-hardware-set-up"></a><span data-ttu-id="34b70-170">Unity 步骤 6:获取 Windows Mixed Reality 硬件设置</span><span class="sxs-lookup"><span data-stu-id="34b70-170">Unity step 6: Get your Windows Mixed Reality hardware set up</span></span>
1. <span data-ttu-id="34b70-171">中的步骤查看[沉浸式头戴式安装程序](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/before-you-start
)</span><span class="sxs-lookup"><span data-stu-id="34b70-171">Review steps in [Immersive headset setup](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/before-you-start
)</span></span>
2. <span data-ttu-id="34b70-172">了解如何[使用 Windows Mixed Reality 模拟器](using-the-windows-mixed-reality-simulator.md)和[导航 Windows Mixed Reality 主页](navigating-the-windows-mixed-reality-home.md)</span><span class="sxs-lookup"><span data-stu-id="34b70-172">Learn about [Using the Windows Mixed Reality simulator](using-the-windows-mixed-reality-simulator.md) and [Navigating the Windows Mixed Reality home](navigating-the-windows-mixed-reality-home.md)</span></span>

### <a name="unity-step-7-target-your-application-to-run-on-windows-mixed-reality"></a><span data-ttu-id="34b70-173">Unity 步骤 7:在应用程序在 Windows Mixed Reality 上运行的目标</span><span class="sxs-lookup"><span data-stu-id="34b70-173">Unity step 7: Target your application to run on Windows Mixed Reality</span></span>
1. <span data-ttu-id="34b70-174">首先，必须删除或有条件地编译出任何其他特定于特定 VR SDK 的库支持。</span><span class="sxs-lookup"><span data-stu-id="34b70-174">First, you must remove or conditionally compile out any other library support specific to a particular VR SDK.</span></span> <span data-ttu-id="34b70-175">这些资产经常更改设置和其他如 Windows Mixed Reality 的 VR Sdk 与不兼容的方法中的项目的属性。</span><span class="sxs-lookup"><span data-stu-id="34b70-175">Those assets frequently change settings and properties on your project in ways that are incompatible with other VR SDKs, such as Windows Mixed Reality.</span></span>
    * <span data-ttu-id="34b70-176">例如，如果你的项目引用 SteamVR SDK，你将需要更新项目以针对 Windows 应用商店生成目标导出时排除这些预设和脚本 API 调用。</span><span class="sxs-lookup"><span data-stu-id="34b70-176">For example, if your project references the SteamVR SDK, you will need to update your project to exclude those prefabs and script API calls when exporting for the Windows Store build target.</span></span>
    * <span data-ttu-id="34b70-177">有条件地不包括其他 VR Sdk 的特定步骤即将推出。</span><span class="sxs-lookup"><span data-stu-id="34b70-177">Specific steps for conditionally excluding other VR SDKs is coming soon.</span></span>
2. <span data-ttu-id="34b70-178">在 Unity 项目中，[面向 Windows 10 SDK](holograms-100.md#target-windows-10-sdk)</span><span class="sxs-lookup"><span data-stu-id="34b70-178">In your Unity project, [target the Windows 10 SDK](holograms-100.md#target-windows-10-sdk)</span></span>
3. <span data-ttu-id="34b70-179">为每个场景[设置照相机](holograms-100.md#chapter-2---setup-the-camera)</span><span class="sxs-lookup"><span data-stu-id="34b70-179">For each scene, [setup the camera](holograms-100.md#chapter-2---setup-the-camera)</span></span>

### <a name="unity-step-8-use-the-stage-to-place-content-on-the-floor"></a><span data-ttu-id="34b70-180">Unity 步骤 8:使用阶段在地板上放置的内容</span><span class="sxs-lookup"><span data-stu-id="34b70-180">Unity step 8: Use the stage to place content on the floor</span></span>

<span data-ttu-id="34b70-181">可以跨各种构建混合现实体验[体验刻度](coordinate-systems.md)。</span><span class="sxs-lookup"><span data-stu-id="34b70-181">You can build Mixed Reality experiences across a wide range of [experience scales](coordinate-systems.md).</span></span>

<span data-ttu-id="34b70-182">如果您要移植**装规模体验**，您必须确保 Unity 设置为**保持静止**跟踪空间类型：</span><span class="sxs-lookup"><span data-stu-id="34b70-182">If you're porting a **seated-scale experience**, you must ensure Unity is set to the **Stationary** tracking space type:</span></span>

```cs
XRDevice.SetTrackingSpaceType(TrackingSpaceType.Stationary);
```

<span data-ttu-id="34b70-183">这将设置 Unity 的世界坐标系统来跟踪[固定参考框架](coordinate-systems.md#spatial-coordinate-systems)。</span><span class="sxs-lookup"><span data-stu-id="34b70-183">This sets Unity's world coordinate system to track the [stationary frame of reference](coordinate-systems.md#spatial-coordinate-systems).</span></span> <span data-ttu-id="34b70-184">在保持静止跟踪模式下，内容放置正前方照相机的默认位置在编辑器中 （正向是-Z） 在应用启动时将显示用户。</span><span class="sxs-lookup"><span data-stu-id="34b70-184">In the Stationary tracking mode, content placed in the editor just in front of the camera's default location (forward is -Z) will appear in front of the user when the app launches.</span></span> <span data-ttu-id="34b70-185">自动用户的安装源，您可以调用 Unity 的[XR。InputTracking.Recenter](https://docs.unity3d.com/ScriptReference/XR.InputTracking.Recenter.html)方法。</span><span class="sxs-lookup"><span data-stu-id="34b70-185">To recenter the user's seated origin, you can call Unity's [XR.InputTracking.Recenter](https://docs.unity3d.com/ScriptReference/XR.InputTracking.Recenter.html) method.</span></span>

<span data-ttu-id="34b70-186">如果您要移植**现有规模体验**或**聊天室规模体验**，将放置内容相对于基底。</span><span class="sxs-lookup"><span data-stu-id="34b70-186">If you're porting a **standing-scale experience** or **room-scale experience**, you'll be placing content relative to the floor.</span></span> <span data-ttu-id="34b70-187">有关用户的原因使用 floor **[空间阶段](coordinate-systems.md#spatial-coordinate-systems)**、 floor 级别来源和可选空间边界表示用户的定义、 设置期间首次运行。</span><span class="sxs-lookup"><span data-stu-id="34b70-187">You reason about the user's floor using the **[spatial stage](coordinate-systems.md#spatial-coordinate-systems)**, which represents the user's defined floor-level origin and optional room boundary, set up during first run.</span></span> <span data-ttu-id="34b70-188">这些体验，您必须确保 Unity 设置为**RoomScale**跟踪空间类型。</span><span class="sxs-lookup"><span data-stu-id="34b70-188">For these experiences, you must ensure Unity is set to the **RoomScale** tracking space type.</span></span> <span data-ttu-id="34b70-189">尽管 RoomScale 是默认值，你将需要显式设置，并确保你获取返回 true，以捕获其中用户已离开它们校准的房间移动用户的计算机的情况下：</span><span class="sxs-lookup"><span data-stu-id="34b70-189">While RoomScale is the default, you'll want to set it explicitly and ensure you get back true, to catch situations where the user has moved their computer away from the room they calibrated:</span></span>

```cs
if (XRDevice.SetTrackingSpaceType(TrackingSpaceType.RoomScale))
{
    // RoomScale mode was set successfully.  App can now assume that y=0 in Unity world coordinate represents the floor.
}
else
{
    // RoomScale mode was not set successfully.  App cannot make assumptions about where the floor plane is.
}
```

<span data-ttu-id="34b70-190">一旦您的应用程序已成功设置跟踪空间类型，内容在 y 轴上放置 RoomScale = 的 0 平面将显示在地板。</span><span class="sxs-lookup"><span data-stu-id="34b70-190">Once your app successfully sets the RoomScale tracking space type, content placed on the y=0 plane will appear on the floor.</span></span> <span data-ttu-id="34b70-191">（0，0，0） 处的原点将在其中用户花了安装过程中的空间，-z 表示的向前他们在安装过程中面临着的车间的具体位置。</span><span class="sxs-lookup"><span data-stu-id="34b70-191">The origin at (0, 0, 0) will be the specific place on the floor where the user stood during room setup, with -Z representing the forward direction they were facing during setup.</span></span>

<span data-ttu-id="34b70-192">在脚本代码中，随后可以调用你的 TryGetGeometry 方法是 UnityEngine.Experimental.XR.Boundary 类型获取边界多边形指定 TrackedArea 边界类型。</span><span class="sxs-lookup"><span data-stu-id="34b70-192">In script code, you can then call the TryGetGeometry method on your the UnityEngine.Experimental.XR.Boundary type to get a boundary polygon, specifying a boundary type of TrackedArea.</span></span> <span data-ttu-id="34b70-193">如果用户定义的边界 （重新获取顶点的列表），您知道安全地交付**聊天室规模体验**给用户，他们可以在其中引导在场景周围创建。</span><span class="sxs-lookup"><span data-stu-id="34b70-193">If the user defined a boundary (you get back a list of vertices), you know it is safe to deliver a **room-scale experience** to the user, where they can walk around the scene you create.</span></span>

<span data-ttu-id="34b70-194">请注意，当用户接近其，系统会自动呈现边界。</span><span class="sxs-lookup"><span data-stu-id="34b70-194">Note that the system will automatically render the boundary when the user approaches it.</span></span> <span data-ttu-id="34b70-195">您的应用程序不需要使用此多边形呈现自身的边界。</span><span class="sxs-lookup"><span data-stu-id="34b70-195">Your app does not need to use this polygon to render the boundary itself.</span></span>

<span data-ttu-id="34b70-196">有关更多详细信息，请参阅[Unity 中的坐标系统](coordinate-systems-in-unity.md)页。</span><span class="sxs-lookup"><span data-stu-id="34b70-196">For more details, see the [Coordinate systems in Unity](coordinate-systems-in-unity.md) page.</span></span>

<span data-ttu-id="34b70-197">某些应用程序使用矩形将限制它们的交互。</span><span class="sxs-lookup"><span data-stu-id="34b70-197">Some applications use a rectangle to constrain their interaction.</span></span> <span data-ttu-id="34b70-198">检索的最大的内接的矩形不直接支持 UWP API 或 Unity 中。</span><span class="sxs-lookup"><span data-stu-id="34b70-198">Retrieving the largest inscribed rectangle is not directly supported in the UWP API or Unity.</span></span> <span data-ttu-id="34b70-199">示例代码链接到下显示了如何查找跟踪边界内的矩形。</span><span class="sxs-lookup"><span data-stu-id="34b70-199">The example code linked to below shows how to find a rectangle within the traced bounds.</span></span> <span data-ttu-id="34b70-200">它是启发式方法，因此可能找不到最佳的解决方案，但是，结果通常是一致的期望。</span><span class="sxs-lookup"><span data-stu-id="34b70-200">It is heuristic based so may not find the optimal solution, however, results are generally consistent with expectations.</span></span> <span data-ttu-id="34b70-201">若要查找更精确的结果，但代价是处理时间，可以优化算法中的参数。</span><span class="sxs-lookup"><span data-stu-id="34b70-201">Parameters in the algorithm can be tuned to find more precise results at the cost of processing time.</span></span> <span data-ttu-id="34b70-202">该算法是使用 5.6 预览版 MRTP Unity 版本的混合现实工具包的分支中。</span><span class="sxs-lookup"><span data-stu-id="34b70-202">The algorithm is in a fork of the Mixed Reality Toolkit that uses the 5.6 preview MRTP version of Unity.</span></span> <span data-ttu-id="34b70-203">这不是公开提供。</span><span class="sxs-lookup"><span data-stu-id="34b70-203">This is not publically available.</span></span> <span data-ttu-id="34b70-204">代码应为可在 Unity 2017.2 和更高版本中直接使用。</span><span class="sxs-lookup"><span data-stu-id="34b70-204">The code should be directly usable in 2017.2 and higher versions of Unity.</span></span> <span data-ttu-id="34b70-205">将在不久的将来将代码移植到当前 MRTK。</span><span class="sxs-lookup"><span data-stu-id="34b70-205">The code will be ported to the current MRTK in the near future.</span></span>

<span data-ttu-id="34b70-206">[GitHub 上的代码的 zip 文件](https://github.com/KevinKennedy/MixedRealityToolkit-Unity/releases/tag/5.6.MRTP20)重要文件：</span><span class="sxs-lookup"><span data-stu-id="34b70-206">[zip file of code on GitHub](https://github.com/KevinKennedy/MixedRealityToolkit-Unity/releases/tag/5.6.MRTP20) Important files:</span></span>
* <span data-ttu-id="34b70-207">Assets/HoloToolkit/Stage/Scripts/StageManager.cs-用法的示例</span><span class="sxs-lookup"><span data-stu-id="34b70-207">Assets/HoloToolkit/Stage/Scripts/StageManager.cs - example of usage</span></span>
* <span data-ttu-id="34b70-208">Assets/HoloToolkit/Stage/Scripts/LargestRectangle.cs-算法的实现</span><span class="sxs-lookup"><span data-stu-id="34b70-208">Assets/HoloToolkit/Stage/Scripts/LargestRectangle.cs - implementation of the algorithm</span></span>
* <span data-ttu-id="34b70-209">Assets/HoloToolkit-UnitTests/Editor/Stage/LargestRectangleTest.cs-算法的简单测试</span><span class="sxs-lookup"><span data-stu-id="34b70-209">Assets/HoloToolkit-UnitTests/Editor/Stage/LargestRectangleTest.cs - trivial test of the algorithm</span></span>

<span data-ttu-id="34b70-210">结果的示例：</span><span class="sxs-lookup"><span data-stu-id="34b70-210">Example of results:</span></span>

![结果示例](images/largestrectangle-400px.jpg)

<span data-ttu-id="34b70-212">算法基于 Daniel Smilkov 博客：[多边形内的最大矩形](https://d3plus.org/blog/behind-the-scenes/2014/07/08/largest-rect/)</span><span class="sxs-lookup"><span data-stu-id="34b70-212">Algorithm is based on a blog by Daniel Smilkov: [Largest rectangle in a polygon](https://d3plus.org/blog/behind-the-scenes/2014/07/08/largest-rect/)</span></span>

### <a name="unity-step-9-work-through-your-input-model"></a><span data-ttu-id="34b70-213">Unity 步骤 9:通过输入模型起作用</span><span class="sxs-lookup"><span data-stu-id="34b70-213">Unity step 9: Work through your input model</span></span>

<span data-ttu-id="34b70-214">每个游戏或定位现有 HMD 应用程序将有一组它处理的输入，输入所需的体验，和特定 Api，它调用以获取这些输入的类型。</span><span class="sxs-lookup"><span data-stu-id="34b70-214">Each game or application targeting an existing HMD will have a set of inputs that it handles, types of inputs that it needs for the experience, and specific APIs that it calls to get those inputs.</span></span> <span data-ttu-id="34b70-215">我们已致力于尝试将其作为简单明了，若要充分利用 Windows Mixed Reality 中提供的输入。</span><span class="sxs-lookup"><span data-stu-id="34b70-215">We have invested in trying to make it as simple and straightforward as possible to take advantage of the inputs available in Windows Mixed Reality.</span></span>
1. <span data-ttu-id="34b70-216">通读**[输入移植指南 Unity](input-porting-guide-for-unity.md)**  Windows Mixed Reality 的方式的详细信息公开输入，和如何映射到你的应用程序可能会立即执行。</span><span class="sxs-lookup"><span data-stu-id="34b70-216">Read through the **[Input porting guide for Unity](input-porting-guide-for-unity.md)** for details of how Windows Mixed Reality exposes input, and how that maps to what your application may do today.</span></span>
2. <span data-ttu-id="34b70-217">选择是否想要利用 Unity 的跨-VR 的 SDK 输入 API，或特定于 MR 的输入 API。</span><span class="sxs-lookup"><span data-stu-id="34b70-217">Choose whether you are going to leverage Unity's cross-VR-SDK input API, or the MR-specific input API.</span></span> <span data-ttu-id="34b70-218">常规 Input.GetButton/Input.GetAxis Api 由 Unity VR 应用如今用来[Oculus 输入](https://docs.unity3d.com/Manual/OculusControllers.html)并[OpenVR 输入](https://docs.unity3d.com/Manual/OpenVRControllers.html)。</span><span class="sxs-lookup"><span data-stu-id="34b70-218">The general Input.GetButton/Input.GetAxis APIs are used by Unity VR apps today for [Oculus input](https://docs.unity3d.com/Manual/OculusControllers.html) and [OpenVR input](https://docs.unity3d.com/Manual/OpenVRControllers.html).</span></span> <span data-ttu-id="34b70-219">如果您的应用程序已对 motion 控制器使用这些 Api，这是最简单路径-只需重新映射按钮和轴中输入管理器。</span><span class="sxs-lookup"><span data-stu-id="34b70-219">If your apps are already using these APIs for motion controllers, this is the easiest path - you should just need to remap buttons and axes in the Input Manager.</span></span>
    * <span data-ttu-id="34b70-220">您可以访问在 Unity 中使用常规跨 VR SDK Input.GetButton/Input.GetAxis Api 或特定于 MR 的 UnityEngine.XR.WSA.Input Api 的运动控制器数据。</span><span class="sxs-lookup"><span data-stu-id="34b70-220">You can access motion controller data in Unity using either the general cross-VR-SDK Input.GetButton/Input.GetAxis APIs or the MR-specific UnityEngine.XR.WSA.Input APIs.</span></span> <span data-ttu-id="34b70-221">（以前在 Unity 5.6 中的 UnityEngine.XR.WSA.Input 命名空间）</span><span class="sxs-lookup"><span data-stu-id="34b70-221">(previously in the UnityEngine.XR.WSA.Input namespace in Unity 5.6)</span></span>
    * <span data-ttu-id="34b70-222">请参阅[工具包中的示例](https://github.com/Microsoft/HoloToolkit-Unity/pull/572)组合游戏手柄和动作的控制器。</span><span class="sxs-lookup"><span data-stu-id="34b70-222">See the [example in Toolkit](https://github.com/Microsoft/HoloToolkit-Unity/pull/572) that combines gamepad and motion controllers.</span></span>

### <a name="unity-step-10-performance-testing-and-tuning"></a><span data-ttu-id="34b70-223">Unity 步骤 10:性能测试和优化</span><span class="sxs-lookup"><span data-stu-id="34b70-223">Unity step 10: Performance testing and tuning</span></span>

<span data-ttu-id="34b70-224">Windows Mixed Reality 将在设备的广泛类上可用，范围为从高结束游戏的 Pc，到广泛的市场主流 Pc。</span><span class="sxs-lookup"><span data-stu-id="34b70-224">Windows Mixed Reality will be available on a broad class of devices, ranging from high end gaming PCs, down to broad market mainstream PCs.</span></span> <span data-ttu-id="34b70-225">具体取决于您面向的哪些市场，没有为应用程序可用的计算和图形预算显著差异。</span><span class="sxs-lookup"><span data-stu-id="34b70-225">Depending on what market you are targeting, there is a significant difference in the available compute and graphics budgets for your application.</span></span> <span data-ttu-id="34b70-226">在此移植练习中，有可能利用高级 PC，并获得了大量的计算和图形预算提供对您的应用程序。</span><span class="sxs-lookup"><span data-stu-id="34b70-226">During this porting exercise, you are likely leveraging a premium PC, and have had significant compute and graphics budgets available to your app.</span></span> <span data-ttu-id="34b70-227">如果你想要向更广泛的受众提供您的应用程序，应测试并分析你的应用[想要的代表性硬件目标](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines)。</span><span class="sxs-lookup"><span data-stu-id="34b70-227">If you wish to make your app available to a broader audience, you should test and profile your app on [the representative hardware that you wish to target](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines).</span></span>

<span data-ttu-id="34b70-228">这两[Unity](https://docs.unity3d.com/Manual/Profiler.html)并[Visual Studio](https://docs.microsoft.com/visualstudio/profiling/index)包括性能探查器，并且两个[Microsoft](understanding-performance-for-mixed-reality.md)并[Intel](https://software.intel.com/articles/vr-content-developer-guide)上发布指导原则性能分析和优化。</span><span class="sxs-lookup"><span data-stu-id="34b70-228">Both [Unity](https://docs.unity3d.com/Manual/Profiler.html) and [Visual Studio](https://docs.microsoft.com/visualstudio/profiling/index) include performance profilers, and both [Microsoft](understanding-performance-for-mixed-reality.md) and [Intel](https://software.intel.com/articles/vr-content-developer-guide) publish guidelines on performance profiling and optimization.</span></span> <span data-ttu-id="34b70-229">没有在可用的性能的全面讨论[混合现实的了解性能](understanding-performance-for-mixed-reality.md)。</span><span class="sxs-lookup"><span data-stu-id="34b70-229">There is an extensive discussion of performance available at [Understanding Performance for Mixed Reality](understanding-performance-for-mixed-reality.md).</span></span> <span data-ttu-id="34b70-230">此外，有 Unity 下的特定详细信息[Unity 的性能建议](performance-recommendations-for-unity.md)。</span><span class="sxs-lookup"><span data-stu-id="34b70-230">Further, there are specific details for Unity under [Performance Recommendations for Unity](performance-recommendations-for-unity.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="34b70-231">请参阅</span><span class="sxs-lookup"><span data-stu-id="34b70-231">See also</span></span>
* [<span data-ttu-id="34b70-232">移植指南 Unity 的输入</span><span class="sxs-lookup"><span data-stu-id="34b70-232">Input porting guide for Unity</span></span>](input-porting-guide-for-unity.md)
* [<span data-ttu-id="34b70-233">Windows Mixed Reality 最小 PC 硬件兼容性指南</span><span class="sxs-lookup"><span data-stu-id="34b70-233">Windows Mixed Reality minimum PC hardware compatibility guidelines</span></span>](https://docs.microsoft.com/windows/mixed-reality/enthusiast-guide/windows-mixed-reality-minimum-pc-hardware-compatibility-guidelines)
* [<span data-ttu-id="34b70-234">混合现实的了解性能</span><span class="sxs-lookup"><span data-stu-id="34b70-234">Understanding Performance for Mixed Reality</span></span>](understanding-performance-for-mixed-reality.md)
* [<span data-ttu-id="34b70-235">Unity 的性能建议</span><span class="sxs-lookup"><span data-stu-id="34b70-235">Performance Recommendations for Unity</span></span>](performance-recommendations-for-unity.md)
* [<span data-ttu-id="34b70-236">适用于 UWP 将 Xbox Live 支持添加到 Unity</span><span class="sxs-lookup"><span data-stu-id="34b70-236">Add Xbox Live support to Unity for UWP</span></span>](https://docs.microsoft.com/windows/uwp/xbox-live/get-started-with-partner/partner-add-xbox-live-to-unity-uwp)
