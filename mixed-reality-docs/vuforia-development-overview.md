---
title: 将 Vuforia 与 Unity 一起使用
description: 利用 Vuforia 在 Unity 中构建 Windows Mixed Reality 应用程序。
author: thetuvix
ms.author: alexturn
ms.date: 01/28/2019
ms.topic: article
keywords: Vuforia，标记，坐标，引用框架，跟踪
ms.openlocfilehash: 0ab87a6262cbe74fd116fdc0a7045961bf8695d9
ms.sourcegitcommit: 6bc6757b9b273a63f260f1716c944603dfa51151
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/01/2019
ms.locfileid: "73437136"
---
# <a name="using-vuforia-engine-with-unity"></a><span data-ttu-id="933f1-104">将 Vuforia 引擎与 Unity 一起使用</span><span class="sxs-lookup"><span data-stu-id="933f1-104">Using Vuforia Engine with Unity</span></span>

<span data-ttu-id="933f1-105">Vuforia 引擎为 HoloLens 提供一项重要功能–将 AR 体验连接到环境中的特定映像和对象的能力。</span><span class="sxs-lookup"><span data-stu-id="933f1-105">Vuforia Engine brings an important capability to HoloLens – the power to connect AR experiences to specific images and objects in the environment.</span></span> <span data-ttu-id="933f1-106">你可以使用此功能来覆盖工业企业的机械上的引导式分步说明，或者向物理产品或游戏添加数字功能和体验。</span><span class="sxs-lookup"><span data-stu-id="933f1-106">You can use this capability to overlay guided step-by-step instructions on top of machinery for the industrial enterprise or add digital features and experiences to a physical product or game.</span></span> 

<span data-ttu-id="933f1-107">为了在开发 AR 体验时获得更大的灵活性，Vuforia 引擎提供了范围广泛的功能和目标。</span><span class="sxs-lookup"><span data-stu-id="933f1-107">For greater flexibility when developing AR experiences, Vuforia Engine offers a broad range of features and targets.</span></span> <span data-ttu-id="933f1-108">我们最新的功能 Vuforia 模型目标之一是用于商业和工业用途的一项重要功能。</span><span class="sxs-lookup"><span data-stu-id="933f1-108">One of our newest features, Vuforia Model Targets, is a key capability for both commercial and industrial uses.</span></span> <span data-ttu-id="933f1-109">模型目标允许应用程序识别诸如计算机、汽车或玩具等物理对象，并根据 CAD 或数字3D 模型对其进行跟踪。</span><span class="sxs-lookup"><span data-stu-id="933f1-109">Model Targets allow applications to recognize physical objects like machines, automobiles or toys and track them based on a CAD or digital 3D model.</span></span> <span data-ttu-id="933f1-110">对于工业用途，此功能可以为程序集工作者和服务技术人员提供 AR 工作说明和过程指南，同时在现场或现场推出。</span><span class="sxs-lookup"><span data-stu-id="933f1-110">For industrial uses, this feature can provide assembly workers and service technicians with AR work instructions and procedural guidance while in the factory or out in the field.</span></span> 

<span data-ttu-id="933f1-111">在 Unity 中，可以轻松地在 Unity 中配置为手机和平板电脑构建的现有 Vuforia 引擎应用。</span><span class="sxs-lookup"><span data-stu-id="933f1-111">Existing Vuforia Engine apps that were built for phones and tablets can easily be configured in Unity to run on HoloLens.</span></span> <span data-ttu-id="933f1-112">甚至可以使用 Vuforia 引擎将新的 HoloLens 应用程序带到 Windows 10 平板电脑，如 Surface Pro 4 和 Surface Book。</span><span class="sxs-lookup"><span data-stu-id="933f1-112">You can even use Vuforia Engine to take your new HoloLens app to Windows 10 tablets such as the Surface Pro 4 and Surface Book.</span></span>

## <a name="get-the-tools"></a><span data-ttu-id="933f1-113">获取工具</span><span class="sxs-lookup"><span data-stu-id="933f1-113">Get the tools</span></span>

<span data-ttu-id="933f1-114">安装 Visual Studio 和 Unity[的推荐版本](install-the-tools.md)，然后将 Unity 配置为使用 Visual studio 和首选 IDE 和编译器。</span><span class="sxs-lookup"><span data-stu-id="933f1-114">[Install the recommended versions](install-the-tools.md) of Visual Studio and Unity and then configure Unity to use Visual Studio and the preferred IDE and compiler.</span></span> 

<span data-ttu-id="933f1-115">安装 Unity 时，请确保安装 "Windows 应用商店 .NET 脚本后端" 或 "Windows 应用商店 IL2CPP 脚本后端"。</span><span class="sxs-lookup"><span data-stu-id="933f1-115">When installing Unity, be sure to install either the “Windows Store .NET Scripting Backend” or the “Windows Store IL2CPP Scripting Backend”.</span></span> <span data-ttu-id="933f1-116">另外，请务必选择 "Vuforia 扩充的现实支持"，以在 Unity 内启用 Vuforia 引擎。</span><span class="sxs-lookup"><span data-stu-id="933f1-116">Also, be sure to select “Vuforia Augmented Reality Support” to enable Vuforia Engine within Unity.</span></span>


## <a name="getting-started-with-vuforia-engine"></a><span data-ttu-id="933f1-117">Vuforia 引擎入门</span><span class="sxs-lookup"><span data-stu-id="933f1-117">Getting started with Vuforia Engine</span></span>

<span data-ttu-id="933f1-118">由于 Vuforia 引擎已集成到 Unity 中，开发人员无需下载或安装任何其他工具。</span><span class="sxs-lookup"><span data-stu-id="933f1-118">Since Vuforia Engine is integrated into Unity, developers don’t need to download or install any extra tools.</span></span> <span data-ttu-id="933f1-119">推荐的 Unity 版本是 LTS 流，该流目前为2017.3，并包括 Vuforia Engine 7.0.57。</span><span class="sxs-lookup"><span data-stu-id="933f1-119">The recommended version of Unity is the LTS stream which is currently at 2017.3 and includes Vuforia Engine 7.0.57.</span></span> <span data-ttu-id="933f1-120">了解将 Vuforia Engine 与 HoloLens 配合使用的最佳起点是使用[Vuforia 引擎 HoloLens 示例](https://assetstore.unity.com/packages/templates/packs/vuforia-hololens-sample-101553)（可在 Unity 资产存储库中找到）。</span><span class="sxs-lookup"><span data-stu-id="933f1-120">The best starting point for learning about using Vuforia Engine with HoloLens is with the [Vuforia Engine HoloLens sample](https://assetstore.unity.com/packages/templates/packs/vuforia-hololens-sample-101553) (available in the Unity Asset Store).</span></span> <span data-ttu-id="933f1-121">该示例提供了一个完整的 HoloLens 项目，其中包括可以部署到 HoloLens 的预配置的场景。</span><span class="sxs-lookup"><span data-stu-id="933f1-121">The sample provides a complete HoloLens project including pre-configured scenes that can be deployed to a HoloLens.</span></span>

<span data-ttu-id="933f1-122">幕后介绍了如何使用 Vuforia 图像目标识别映像，并在 HoloLens 体验中使用数字内容对其进行扩充。</span><span class="sxs-lookup"><span data-stu-id="933f1-122">The scenes show how to use Vuforia Image Targets to recognize an image and augment it with digital content in a HoloLens experience.</span></span> <span data-ttu-id="933f1-123">使用最新版本的 Unity 和 Vuforia 的开发人员有权访问更新的示例，其中包括显示在 HoloLens 上使用模型目标的场景。</span><span class="sxs-lookup"><span data-stu-id="933f1-123">Developers using more recent versions of Unity and Vuforia have access to updated samples which include a scene showing the usage of Model Targets on HoloLens.</span></span> <span data-ttu-id="933f1-124">你可以轻松地在幕后替换你自己的内容，以尝试创建使用 Vuforia 引擎的 HoloLens 应用。</span><span class="sxs-lookup"><span data-stu-id="933f1-124">You can easily substitute your own content in the scenes to experiment with the creation of HoloLens apps that use Vuforia Engine.</span></span>


## <a name="configuring-a-vuforia-app-for-hololens"></a><span data-ttu-id="933f1-125">为 HoloLens 配置 Vuforia 应用</span><span class="sxs-lookup"><span data-stu-id="933f1-125">Configuring a Vuforia App for HoloLens</span></span>

<span data-ttu-id="933f1-126">开发适用于 HoloLens 的 Vuforia 引擎应用与为其他设备开发 Vuforia 引擎应用基本相同。</span><span class="sxs-lookup"><span data-stu-id="933f1-126">Developing a Vuforia Engine app for HoloLens is fundamentally the same as developing Vuforia Engine apps for other devices.</span></span> <span data-ttu-id="933f1-127">然后，你可以应用以下部分中所述的生成设置和配置。</span><span class="sxs-lookup"><span data-stu-id="933f1-127">You can then apply the build settings and configurations described in the section below.</span></span> <span data-ttu-id="933f1-128">这就是使 Vuforia 引擎能够使用 HoloLens 空间映射和位置跟踪系统所需的全部操作。</span><span class="sxs-lookup"><span data-stu-id="933f1-128">That’s all that’s needed to enable Vuforia Engine to work with the HoloLens spatial mapping and positional tracking systems.</span></span>

## <a name="build-and-run-the-vuforia-engine-sample-for-hololens"></a><span data-ttu-id="933f1-129">生成和运行 HoloLens 的 Vuforia 引擎示例</span><span class="sxs-lookup"><span data-stu-id="933f1-129">Build and Run the Vuforia Engine Sample for HoloLens</span></span>
1.  <span data-ttu-id="933f1-130">从 Unity 资产存储区下载[适用于 HoloLens 的 Vuforia 引擎示例](https://assetstore.unity.com/packages/templates/packs/vuforia-hololens-sample-101553)</span><span class="sxs-lookup"><span data-stu-id="933f1-130">Download the [Vuforia Engine Sample for HoloLens](https://assetstore.unity.com/packages/templates/packs/vuforia-hololens-sample-101553) from the Unity Asset Store</span></span>
2.  <span data-ttu-id="933f1-131">[为电源和性能应用建议的 Unity 引擎选项](performance-recommendations-for-unity.md)</span><span class="sxs-lookup"><span data-stu-id="933f1-131">Apply the [recommended Unity engine options for power and performance](performance-recommendations-for-unity.md)</span></span>
3.  <span data-ttu-id="933f1-132">在生成中将示例场景添加到场景中。</span><span class="sxs-lookup"><span data-stu-id="933f1-132">Add the sample scenes to Scenes in Build.</span></span>
4.  <span data-ttu-id="933f1-133">在文件 > 生成设置 "中设置" 通用 Windows 平台 "的平台生成目标。</span><span class="sxs-lookup"><span data-stu-id="933f1-133">Set your platform build target for “Universal Windows Platform” in File > Build Settings.</span></span>
5.  <span data-ttu-id="933f1-134">选择以下平台生成配置设置：</span><span class="sxs-lookup"><span data-stu-id="933f1-134">Select the following platform build configuration settings:</span></span> 
   * <span data-ttu-id="933f1-135">目标设备 = HoloLens</span><span class="sxs-lookup"><span data-stu-id="933f1-135">Target Device = HoloLens</span></span>
   * <span data-ttu-id="933f1-136">生成类型 = D3D</span><span class="sxs-lookup"><span data-stu-id="933f1-136">Build Type = D3D</span></span>
   * <span data-ttu-id="933f1-137">SDK = 最新安装</span><span class="sxs-lookup"><span data-stu-id="933f1-137">SDK = Latest Installed</span></span>
   * <span data-ttu-id="933f1-138">Visual Studio 版本 = 最新安装</span><span class="sxs-lookup"><span data-stu-id="933f1-138">Visual Studio Version = Latest Installed</span></span>
   * <span data-ttu-id="933f1-139">生成并运行于 = 本地计算机</span><span class="sxs-lookup"><span data-stu-id="933f1-139">Build and Run on = Local Machine</span></span>
6.  <span data-ttu-id="933f1-140">在**播放机设置**中定义唯一**产品名称**，以在安装在 HoloLens 上时充当应用程序的名称。</span><span class="sxs-lookup"><span data-stu-id="933f1-140">Define a unique **Product Name**, in **Player Settings**, to serve as the name of the app when installed on the HoloLens.</span></span>
7.  <span data-ttu-id="933f1-141">在**播放机设置 > XR 设置**中检查**Vuforia 扩充的现实**和**虚拟现实**</span><span class="sxs-lookup"><span data-stu-id="933f1-141">Check **Vuforia Augmented Reality** and **Virtual Reality Supported** in **Player Settings > XR Settings**</span></span>
8.  <span data-ttu-id="933f1-142">同时，在**XR 设置**下，确保已将 "Windows Mixed Reality" 添加到**虚拟现实 sdk**列表中</span><span class="sxs-lookup"><span data-stu-id="933f1-142">Also under **XR Settings**, make sure that “Windows Mixed Reality” is added to the **Virtual Reality SDKs** List</span></span>
9.  <span data-ttu-id="933f1-143">检查播放机设置中的以下功能 > 发布设置</span><span class="sxs-lookup"><span data-stu-id="933f1-143">Check the following Capabilities in Player Settings > Publish Settings</span></span> 
   * <span data-ttu-id="933f1-144">InternetClient</span><span class="sxs-lookup"><span data-stu-id="933f1-144">InternetClient</span></span>
   * <span data-ttu-id="933f1-145">网络摄像头</span><span class="sxs-lookup"><span data-stu-id="933f1-145">WebCam</span></span>
   * <span data-ttu-id="933f1-146">SpatialPerception-如果你打算使用 Surface 观察器 API</span><span class="sxs-lookup"><span data-stu-id="933f1-146">SpatialPerception - if you intend to use the Surface Observer API</span></span>
10. <span data-ttu-id="933f1-147">选择 "生成" 以生成 Visual Studio 项目</span><span class="sxs-lookup"><span data-stu-id="933f1-147">Select Build to generate a Visual Studio project</span></span>
11. <span data-ttu-id="933f1-148">从 Visual Studio 生成可执行文件并将其安装在 HoloLens 上</span><span class="sxs-lookup"><span data-stu-id="933f1-148">Build the executable from Visual Studio and install it on your HoloLens</span></span>

<span data-ttu-id="933f1-149">注意：从版本7.2 开始，HoloLens 的 Vuforia 引擎示例包含一个示例场景，其中包括模型目标的示例用法</span><span class="sxs-lookup"><span data-stu-id="933f1-149">Note: Starting with version 7.2, the Vuforia Engine Sample for HoloLens includes a sample scene including example usage of Model Targets</span></span>

## <a name="the-vuforia-developer-portal"></a><span data-ttu-id="933f1-150">Vuforia 开发人员门户</span><span class="sxs-lookup"><span data-stu-id="933f1-150">The Vuforia Developer Portal</span></span>

<span data-ttu-id="933f1-151">希望用 Vuforia 引擎和 HoloLens 创建自己的 AR 体验的开发人员应在[developer.vuforia.com](https://developer.vuforia.com/)的 Vuforia 开发人员门户注册。</span><span class="sxs-lookup"><span data-stu-id="933f1-151">Developers looking to create their own AR experiences with Vuforia Engine and HoloLens should sign up on our Vuforia Developer Portal at [developer.vuforia.com](https://developer.vuforia.com/).</span></span> <span data-ttu-id="933f1-152">在门户中，开发人员有权访问[Vuforia 引擎论坛](https://developer.vuforia.com/forum)，他们可以在其中加入社区讨论、包含有关所有 Vuforia 引擎功能的深入文档的[库](https://library.vuforia.com/)，以及用户可以使用的[Vuforia 目标经理](https://developer.vuforia.com/target-manager)创建自己的自定义目标。</span><span class="sxs-lookup"><span data-stu-id="933f1-152">In the portal, developers have access to the [Vuforia Engine Forums](https://developer.vuforia.com/forum) where they can join community discussions, a [library](https://library.vuforia.com/) with in-depth documentation on all the Vuforia Engine Features, and the [Vuforia Target Manager](https://developer.vuforia.com/target-manager) where users can create their own custom Targets.</span></span> <span data-ttu-id="933f1-153">开发人员还可以使用[Vuforia 许可证管理器](https://developer.vuforia.com/license-manager)注册免费的开发人员许可证。</span><span class="sxs-lookup"><span data-stu-id="933f1-153">Developers can also sign up for a free Developer License using the [Vuforia License Manager](https://developer.vuforia.com/license-manager).</span></span>

## <a name="extended-tracking-with-vuforia"></a><span data-ttu-id="933f1-154">Vuforia 扩展跟踪</span><span class="sxs-lookup"><span data-stu-id="933f1-154">Extended tracking with Vuforia</span></span>

<span data-ttu-id="933f1-155">即使目标不再处于视图中，[扩展跟踪](https://library.vuforia.com/articles/Training/Extended-Tracking)也会创建一个环境映射来维护跟踪。</span><span class="sxs-lookup"><span data-stu-id="933f1-155">[Extended tracking](https://library.vuforia.com/articles/Training/Extended-Tracking) creates a map of the environment to maintain tracking even when a target is no longer in view.</span></span> <span data-ttu-id="933f1-156">它是由 HoloLens 执行的空间映射的 Vuforia 引擎。</span><span class="sxs-lookup"><span data-stu-id="933f1-156">It is Vuforia Engines’ counterpart to the spatial mapping performed by HoloLens.</span></span> <span data-ttu-id="933f1-157">启用目标的扩展跟踪后，会使该目标的姿势传递到空间映射系统。</span><span class="sxs-lookup"><span data-stu-id="933f1-157">When you enable extended tracking on a target, you enable the pose of that target to be passed to the spatial mapping system.</span></span> <span data-ttu-id="933f1-158">通过这种方式，目标可以同时存在于 Vuforia 引擎和 HoloLens 空间坐标系统中，但不能同时存在。</span><span class="sxs-lookup"><span data-stu-id="933f1-158">In this way, targets can exist in both the Vuforia Engine and HoloLens spatial coordinate systems, though not simultaneously.</span></span>

<span data-ttu-id="933f1-159">![Unity 设置 "窗口](images/vuforia-extendedtracking.png)</span><span class="sxs-lookup"><span data-stu-id="933f1-159">![Unity settings window](images/vuforia-extendedtracking.png)</span></span><br>
<span data-ttu-id="933f1-160">*Unity 设置窗口*</span><span class="sxs-lookup"><span data-stu-id="933f1-160">*Unity settings window*</span></span>

<span data-ttu-id="933f1-161">**启用目标的扩展跟踪**</span><span class="sxs-lookup"><span data-stu-id="933f1-161">**Enabling Extended Tracking on a Target**</span></span>

<span data-ttu-id="933f1-162">Vuforia 引擎会自动将使用扩展跟踪的目标的姿势转换为 HoloLens 空间坐标系统。</span><span class="sxs-lookup"><span data-stu-id="933f1-162">Vuforia Engine will automatically transform the pose of a target that uses extended tracking into the HoloLens spatial coordinate system.</span></span> <span data-ttu-id="933f1-163">这允许 HoloLens 接管跟踪，并将任何内容扩充集成到目标环境的空间映射中。</span><span class="sxs-lookup"><span data-stu-id="933f1-163">This allows HoloLens to take over tracking, and to integrate any content augmenting into the spatial mapping of the target’s surroundings.</span></span> <span data-ttu-id="933f1-164">此过程发生在 Unity 中的 Vuforia 引擎和混合现实 Api 之间，不需要开发人员进行任何编程-它会自动进行处理。</span><span class="sxs-lookup"><span data-stu-id="933f1-164">This process occurs between Vuforia Engine and mixed reality APIs in Unity and does not require any programming by the developer - it's handled automatically.</span></span>

<span data-ttu-id="933f1-165">**下面是发生的情况 .。。**</span><span class="sxs-lookup"><span data-stu-id="933f1-165">**Here is what occurs...**</span></span>
1. <span data-ttu-id="933f1-166">Vuforia 的目标跟踪器识别目标</span><span class="sxs-lookup"><span data-stu-id="933f1-166">Vuforia’s target Tracker recognizes the target</span></span>
2. <span data-ttu-id="933f1-167">然后初始化目标跟踪</span><span class="sxs-lookup"><span data-stu-id="933f1-167">Target tracking is then initialized</span></span>
3. <span data-ttu-id="933f1-168">分析目标的位置和旋转，以便为 HoloLens 提供可靠的姿势估算</span><span class="sxs-lookup"><span data-stu-id="933f1-168">The position and rotation of the target are analyzed to provide a robust pose estimate for HoloLens to use</span></span>
4. <span data-ttu-id="933f1-169">Vuforia 将目标的姿势转换为 HoloLens 空间映射坐标空间</span><span class="sxs-lookup"><span data-stu-id="933f1-169">Vuforia transforms the target's pose into the HoloLens spatial mapping coordinate space</span></span>
5. <span data-ttu-id="933f1-170">HoloLens 接管跟踪，并停用 Vuforia 跟踪器</span><span class="sxs-lookup"><span data-stu-id="933f1-170">HoloLens takes over tracking and the Vuforia tracker is deactivated</span></span>

<span data-ttu-id="933f1-171">开发人员可以通过在 TargetBehaviour 上禁用扩展跟踪来控制此过程，以将控件返回到 Vuforia。</span><span class="sxs-lookup"><span data-stu-id="933f1-171">The developer can control this process, to return control to Vuforia, by disabling extended tracking on the TargetBehaviour.</span></span>

<span data-ttu-id="933f1-172">**注意：** 从 Vuforia 7.2 开始，不再按目标启用扩展跟踪。</span><span class="sxs-lookup"><span data-stu-id="933f1-172">**NOTE:** Starting with Vuforia 7.2, Extended Tracking is no longer enabled on a per-target basis.</span></span> <span data-ttu-id="933f1-173">相反，开发人员可以启用设备跟踪，以便在场景中的所有目标上启用类似的功能。</span><span class="sxs-lookup"><span data-stu-id="933f1-173">Instead, developers can turn on Device Tracking to enable similar functionality on all the targets in the scene.</span></span>


## <a name="see-also"></a><span data-ttu-id="933f1-174">另请参阅</span><span class="sxs-lookup"><span data-stu-id="933f1-174">See also</span></span>
* [<span data-ttu-id="933f1-175">安装工具</span><span class="sxs-lookup"><span data-stu-id="933f1-175">Install the tools</span></span>](install-the-tools.md)
* [<span data-ttu-id="933f1-176">坐标系统</span><span class="sxs-lookup"><span data-stu-id="933f1-176">Coordinate systems</span></span>](coordinate-systems.md)
* [<span data-ttu-id="933f1-177">空间映射</span><span class="sxs-lookup"><span data-stu-id="933f1-177">Spatial mapping</span></span>](spatial-mapping.md)
* [<span data-ttu-id="933f1-178">Unity 中的相机</span><span class="sxs-lookup"><span data-stu-id="933f1-178">Camera in Unity</span></span>](camera-in-unity.md)
* [<span data-ttu-id="933f1-179">导出和构建 Unity Visual Studio 解决方案</span><span class="sxs-lookup"><span data-stu-id="933f1-179">Exporting and building a Unity Visual Studio solution</span></span>](exporting-and-building-a-unity-visual-studio-solution.md)
* [<span data-ttu-id="933f1-180">Vuforia 文档：针对 Unity 中的 Windows 10 进行开发</span><span class="sxs-lookup"><span data-stu-id="933f1-180">Vuforia documentation: Developing for Windows 10 in Unity</span></span>](https://library.vuforia.com/articles/Solution/Developing-for-Windows-10-in-Unity)
* [<span data-ttu-id="933f1-181">Vuforia 文档：如何安装 Vuforia Unity 扩展</span><span class="sxs-lookup"><span data-stu-id="933f1-181">Vuforia documentation: How to install the Vuforia Unity extension</span></span>](https://library.vuforia.com/articles/Solution/Installing-the-Unity-Extension)
* [<span data-ttu-id="933f1-182">Vuforia 文档：在 Unity 中使用 HoloLens 示例</span><span class="sxs-lookup"><span data-stu-id="933f1-182">Vuforia documentation: Working with the HoloLens sample in Unity</span></span>](https://library.vuforia.com/articles/Solution/Working-with-the-HoloLens-sample-in-Unity)
* [<span data-ttu-id="933f1-183">Vuforia 文档： Vuforia 中的扩展跟踪</span><span class="sxs-lookup"><span data-stu-id="933f1-183">Vuforia documentation: Extended tracking in Vuforia</span></span>](https://library.vuforia.com/articles/Training/Extended-Tracking)
